!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n,r,o={exports:{}},i={};var l,a,s=(r||(r=1,o.exports=function(){if(n)return i;n=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(t,n,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==n.key&&(o=""+n.key),"key"in n)for(var i in r={},n)"key"!==i&&(r[i]=n[i]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:o,ref:void 0!==n?n:null,props:r}}return i.Fragment=t,i.jsx=r,i.jsxs=r,i}()),o.exports),u={exports:{}},c={};function d(){if(l)return c;l=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function _(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var E=b.prototype=new _;E.constructor=b,g(E,y.prototype),E.isPureReactComponent=!0;var S=Array.isArray;function w(){}var T={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function C(t,n,r){var o=r.ref;return{$$typeof:e,type:t,key:n,ref:void 0!==o?o:null,props:r}}function I(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var x=/\/+/g;function k(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function O(n,r,o,i,l){var a=typeof n;"undefined"!==a&&"boolean"!==a||(n=null);var s,u,c=!1;if(null===n)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(n.$$typeof){case e:case t:c=!0;break;case p:return O((c=n._init)(n._payload),r,o,i,l)}}if(c)return l=l(n),c=""===i?"."+k(n,0):i,S(l)?(o="",null!=c&&(o=c.replace(x,"$&/")+"/"),O(l,r,o,"",function(e){return e})):null!=l&&(I(l)&&(s=l,u=o+(null==l.key||n&&n.key===l.key?"":(""+l.key).replace(x,"$&/")+"/")+c,l=C(s.type,u,s.props)),r.push(l)),1;c=0;var d,f=""===i?".":i+":";if(S(n))for(var h=0;h<n.length;h++)c+=O(i=n[h],r,o,a=f+k(i,h),l);else if("function"==typeof(h=null===(d=n)||"object"!=typeof d?null:"function"==typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(n=h.call(n),h=0;!(i=n.next()).done;)c+=O(i=i.value,r,o,a=f+k(i,h++),l);else if("object"===a){if("function"==typeof n.then)return O(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(w,w):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,o,i,l);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return c}function N(e,t,n){if(null==e)return e;var r=[],o=0;return O(e,r,"","",function(e){return t.call(n,e,o++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},M={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};return c.Activity=f,c.Children=M,c.Component=y,c.Fragment=n,c.Profiler=o,c.PureComponent=b,c.StrictMode=r,c.Suspense=u,c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,c.__COMPILER_RUNTIME={__proto__:null,c:function(e){return T.H.useMemoCache(e)}},c.cache=function(e){return function(){return e.apply(null,arguments)}},c.cacheSignal=function(){return null},c.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.key&&(o=""+t.key),t)!A.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var l=Array(i),a=0;a<i;a++)l[a]=arguments[a+2];r.children=l}return C(e.type,o,r)},c.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:i,_context:e},e},c.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)A.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var a=Array(l),s=0;s<l;s++)a[s]=arguments[s+2];o.children=a}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return C(e,i,o)},c.createRef=function(){return{current:null}},c.forwardRef=function(e){return{$$typeof:s,render:e}},c.isValidElement=I,c.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:P}},c.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},c.startTransition=function(e){var t=T.T,n={};T.T=n;try{var r=e(),o=T.S;null!==o&&o(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(w,R)}catch(i){R(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),T.T=t}},c.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},c.use=function(e){return T.H.use(e)},c.useActionState=function(e,t,n){return T.H.useActionState(e,t,n)},c.useCallback=function(e,t){return T.H.useCallback(e,t)},c.useContext=function(e){return T.H.useContext(e)},c.useDebugValue=function(){},c.useDeferredValue=function(e,t){return T.H.useDeferredValue(e,t)},c.useEffect=function(e,t){return T.H.useEffect(e,t)},c.useEffectEvent=function(e){return T.H.useEffectEvent(e)},c.useId=function(){return T.H.useId()},c.useImperativeHandle=function(e,t,n){return T.H.useImperativeHandle(e,t,n)},c.useInsertionEffect=function(e,t){return T.H.useInsertionEffect(e,t)},c.useLayoutEffect=function(e,t){return T.H.useLayoutEffect(e,t)},c.useMemo=function(e,t){return T.H.useMemo(e,t)},c.useOptimistic=function(e,t){return T.H.useOptimistic(e,t)},c.useReducer=function(e,t,n){return T.H.useReducer(e,t,n)},c.useRef=function(e){return T.H.useRef(e)},c.useState=function(e){return T.H.useState(e)},c.useSyncExternalStore=function(e,t,n){return T.H.useSyncExternalStore(e,t,n)},c.useTransition=function(){return T.H.useTransition()},c.version="19.2.0",c}function p(){return a||(a=1,u.exports=d()),u.exports}var f=p();const m=t(f);var h,g,v={exports:{}},y={},_={exports:{}},b={};function E(){return g||(g=1,_.exports=(h||(h=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,l=i>>>1;r<l;){var a=2*(r+1)-1,s=e[a],u=a+1,c=e[u];if(0>o(s,n))u<i&&0>o(c,s)?(e[r]=c,e[u]=n,r=u):(e[r]=s,e[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var s=[],u=[],c=1,d=null,p=3,f=!1,m=!1,h=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var o=n(u);null!==o;){if(null===o.callback)r(u);else{if(!(o.startTime<=e))break;r(u),o.sortIndex=o.expirationTime,t(s,o)}o=n(u)}}function E(e){if(h=!1,b(e),!m)if(null!==n(s))m=!0,w||(w=!0,S());else{var t=n(u);null!==t&&N(E,t.startTime-e)}}var S,w=!1,T=-1,A=5,C=-1;function I(){return!(!g&&e.unstable_now()-C<A)}function x(){if(g=!1,w){var t=e.unstable_now();C=t;var o=!0;try{e:{m=!1,h&&(h=!1,y(T),T=-1),f=!0;var i=p;try{t:{for(b(t),d=n(s);null!==d&&!(d.expirationTime>t&&I());){var l=d.callback;if("function"==typeof l){d.callback=null,p=d.priorityLevel;var a=l(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof a){d.callback=a,b(t),o=!0;break t}d===n(s)&&r(s),b(t)}else r(s);d=n(s)}if(null!==d)o=!0;else{var c=n(u);null!==c&&N(E,c.startTime-t),o=!1}}break e}finally{d=null,p=i,f=!1}o=void 0}}finally{o?S():w=!1}}}if("function"==typeof _)S=function(){_(x)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,O=k.port2;k.port1.onmessage=x,S=function(){O.postMessage(null)}}else S=function(){v(x,0)};function N(t,n){T=v(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_scheduleCallback=function(r,o,i){var l=e.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?l+i:l,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:c++,callback:o,priorityLevel:r,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>l?(r.sortIndex=i,t(u,r),null===n(s)&&r===n(u)&&(h?(y(T),T=-1):h=!0,N(E,i-l))):(r.sortIndex=a,t(s,r),m||f||(m=!0,w||(w=!0,S()))),r},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}}(b)),b)),_.exports}var S,w,T,A,C={exports:{}},I={};function x(){if(S)return I;S=1;var e=p();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return I.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,I.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},I.flushSync=function(e){var t=i.T,n=r.p;try{if(i.T=null,r.p=2,e)return e()}finally{i.T=t,r.p=n,r.d.f()}},I.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},I.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},I.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,o=l(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:o,integrity:i,fetchPriority:a}):"script"===n&&r.d.X(e,{crossOrigin:o,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},I.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},I.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,o=l(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:o,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},I.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=l(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},I.requestFormReset=function(e){r.d.r(e)},I.unstable_batchedUpdates=function(e,t){return e(t)},I.useFormState=function(e,t,n){return i.H.useFormState(e,t,n)},I.useFormStatus=function(){return i.H.useHostTransitionStatus()},I.version="19.2.0",I}function k(){if(T)return y;T=1;var e=E(),t=p(),n=(w||(w=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),C.exports=x()),C.exports);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function i(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function a(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function s(e){if(i(e)!==e)throw Error(r(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var c=Object.assign,d=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),b=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===D?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case h:return"Fragment";case v:return"Profiler";case g:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList";case N:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case b:return e.displayName||"Context";case _:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}var U=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},q=[],G=-1;function z(e){return{current:e}}function V(e){0>G||(e.current=q[G],q[G]=null,G--)}function B(e,t){G++,q[G]=e.current,e.current=t}var $,J,Y=z(null),W=z(null),K=z(null),Q=z(null);function X(e,t){switch(B(K,t),B(W,e),B(Y,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ed(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=Sd(t=Ed(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(Y),B(Y,e)}function Z(){V(Y),V(W),V(K)}function ee(e){null!==e.memoizedState&&B(Q,e);var t=Y.current,n=Sd(t,e.type);t!==n&&(B(W,e),B(Y,n))}function te(e){W.current===e&&(V(Y),V(W)),Q.current===e&&(V(Q),mp._currentValue=H)}function ne(e){if(void 0===$)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$=t&&t[1]||"",J=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+$+e+J}var re=!1;function oe(e,t){if(!e||re)return"";re=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(l){r=l}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"==typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),l=i[0],a=i[1];if(l&&a){var s=l.split("\n"),u=a.split("\n");for(o=r=0;r<s.length&&!s[r].includes("DetermineComponentFrameRoot");)r++;for(;o<u.length&&!u[o].includes("DetermineComponentFrameRoot");)o++;if(r===s.length||o===u.length)for(r=s.length-1,o=u.length-1;1<=r&&0<=o&&s[r]!==u[o];)o--;for(;1<=r&&0<=o;r--,o--)if(s[r]!==u[o]){if(1!==r||1!==o)do{if(r--,0>--o||s[r]!==u[o]){var c="\n"+s[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=o);break}}}finally{re=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ne(n):""}function ie(e,t){switch(e.tag){case 26:case 27:case 5:return ne(e.type);case 16:return ne("Lazy");case 13:return e.child!==t&&null!==t?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return oe(e.type,!1);case 11:return oe(e.type.render,!1);case 1:return oe(e.type,!0);case 31:return ne("Activity");default:return""}}function le(e){try{var t="",n=null;do{t+=ie(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var ae=Object.prototype.hasOwnProperty,se=e.unstable_scheduleCallback,ue=e.unstable_cancelCallback,ce=e.unstable_shouldYield,de=e.unstable_requestPaint,pe=e.unstable_now,fe=e.unstable_getCurrentPriorityLevel,me=e.unstable_ImmediatePriority,he=e.unstable_UserBlockingPriority,ge=e.unstable_NormalPriority,ve=e.unstable_LowPriority,ye=e.unstable_IdlePriority,_e=e.log,be=e.unstable_setDisableYieldValue,Ee=null,Se=null;function we(e){if("function"==typeof _e&&be(e),Se&&"function"==typeof Se.setStrictMode)try{Se.setStrictMode(Ee,e)}catch(t){}}var Te=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Ae(e)/Ce|0)|0},Ae=Math.log,Ce=Math.LN2;var Ie=256,xe=262144,ke=4194304;function Oe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ne(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,i=e.suspendedLanes,l=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~i)?o=Oe(r):0!==(l&=a)?o=Oe(l):n||0!==(n=a&~e)&&(o=Oe(n)):0!==(a=r&~i)?o=Oe(a):0!==l?o=Oe(l):n||0!==(n=r&~e)&&(o=Oe(n)),0===o?0:0!==t&&t!==o&&0===(t&i)&&((i=o&-o)>=(n=t&-t)||32===i&&4194048&n)?t:o}function Pe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Re(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Me(){var e=ke;return!(62914560&(ke<<=1))&&(ke=4194304),e}function De(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Le(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ue(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Te(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function je(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Te(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Fe(e,t){var n=t&-t;return 0!==((n=42&n?1:He(n))&(e.suspendedLanes|t))?0:n}function He(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qe(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ge(){var e=F.p;return 0!==e?e:void 0===(e=window.event)?32:Op(e.type)}function ze(e,t){var n=F.p;try{return F.p=e,t()}finally{F.p=n}}var Ve=Math.random().toString(36).slice(2),Be="__reactFiber$"+Ve,$e="__reactProps$"+Ve,Je="__reactContainer$"+Ve,Ye="__reactEvents$"+Ve,We="__reactListeners$"+Ve,Ke="__reactHandles$"+Ve,Qe="__reactResources$"+Ve,Xe="__reactMarker$"+Ve;function Ze(e){delete e[Be],delete e[$e],delete e[Ye],delete e[We],delete e[Ke]}function et(e){var t=e[Be];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Je]||n[Be]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hd(e);null!==e;){if(n=e[Be])return n;e=Hd(e)}return t}n=(e=n).parentNode}return null}function tt(e){if(e=e[Be]||e[Je]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function nt(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function rt(e){var t=e[Qe];return t||(t=e[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ot(e){e[Xe]=!0}var it=new Set,lt={};function at(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(lt[e]=t,e=0;e<t.length;e++)it.add(t[e])}var ut=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ct={},dt={};function pt(e,t,n){if(o=t,ae.call(dt,o)||!ae.call(ct,o)&&(ut.test(o)?dt[o]=!0:(ct[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function ft(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function mt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function gt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function vt(e){if(!e._valueTracker){var t=gt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function yt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=gt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function _t(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var bt=/[\n"\\]/g;function Et(e){return e.replace(bt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function St(e,t,n,r,o,i,l,a){e.name="",null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?e.type=l:e.removeAttribute("type"),null!=t?"number"===l?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==l&&"reset"!==l||e.removeAttribute("value"),null!=t?Tt(e,l,ht(t)):null!=n?Tt(e,l,ht(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!=typeof o&&"symbol"!=typeof o),null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.name=""+ht(a):e.removeAttribute("name")}function wt(e,t,n,r,o,i,l,a){if(null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.type=i),null!=t||null!=n){if(("submit"===i||"reset"===i)&&null==t)return void vt(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:o)&&"symbol"!=typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l&&(e.name=l),vt(e)}function Tt(e,t,n){"number"===t&&_t(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function At(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function It(e,t,n,o){if(null==t){if(null!=o){if(null!=n)throw Error(r(92));if(U(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(o=e.textContent)===n&&""!==o&&null!==o&&(e.value=o),vt(e)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ot(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nt(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var o in n)!n.hasOwnProperty(o)||null!=t&&t.hasOwnProperty(o)||(0===o.indexOf("--")?e.setProperty(o,""):"float"===o?e.cssFloat="":e[o]="");for(var i in t)o=t[i],t.hasOwnProperty(i)&&n[i]!==o&&Ot(e,i,o)}else for(var l in t)t.hasOwnProperty(l)&&Ot(e,l,t[l])}function Pt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dt(e){return Mt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Lt(){}var Ut=null;function jt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ft=null,Ht=null;function qt(e){var t=tt(e);if(t&&(e=t.stateNode)){var n=e[$e]||null;e:switch(e=t.stateNode,t.type){case"input":if(St(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Et(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=o[$e]||null;if(!i)throw Error(r(90));St(o,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(o=n[t]).form===e.form&&yt(o)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&At(e,!!n.multiple,t,!1)}}}var Gt=!1;function zt(e,t,n){if(Gt)return e(t,n);Gt=!0;try{return e(t)}finally{if(Gt=!1,(null!==Ft||null!==Ht)&&(rc(),Ft&&(t=Ft,e=Ht,Ht=Ft=null,qt(t),e)))for(t=0;t<e.length;t++)qt(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var o=n[$e]||null;if(null===o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var Bt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),$t=!1;if(Bt)try{var Jt={};Object.defineProperty(Jt,"passive",{get:function(){$t=!0}}),window.addEventListener("test",Jt,Jt),window.removeEventListener("test",Jt,Jt)}catch(tf){$t=!1}var Yt=null,Wt=null,Kt=null;function Qt(){if(Kt)return Kt;var e,t,n=Wt,r=n.length,o="value"in Yt?Yt.value:Yt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var l=r-e;for(t=1;t<=l&&n[r-t]===o[i-t];t++);return Kt=o.slice(e,1<t?1-t:void 0)}function Xt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Zt(){return!0}function en(){return!1}function tn(e){function t(t,n,r,o,i){for(var l in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Zt:en,this.isPropagationStopped=en,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Zt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Zt)},persist:function(){},isPersistent:Zt}),t}var nn,rn,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},an=tn(ln),sn=c({},ln,{view:0,detail:0}),un=tn(sn),cn=c({},sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(nn=e.screenX-on.screenX,rn=e.screenY-on.screenY):rn=nn=0,on=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),dn=tn(cn),pn=tn(c({},cn,{dataTransfer:0})),fn=tn(c({},sn,{relatedTarget:0})),mn=tn(c({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=tn(c({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),gn=tn(c({},ln,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return bn}var Sn=tn(c({},sn,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?Xt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),wn=tn(c({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=tn(c({},sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=tn(c({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=tn(c({},cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),In=tn(c({},ln,{newState:0,oldState:0})),xn=[9,13,27,32],kn=Bt&&"CompositionEvent"in window,On=null;Bt&&"documentMode"in document&&(On=document.documentMode);var Nn=Bt&&"TextEvent"in window&&!On,Pn=Bt&&(!kn||On&&8<On&&11>=On),Rn=String.fromCharCode(32),Mn=!1;function Dn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ft?Ht?Ht.push(r):Ht=[r]:Ft=r,0<(t=ad(t,"onChange")).length&&(n=new an("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Gn=null;function zn(e){Zc(e,0)}function Vn(e){if(yt(nt(e)))return e}function Bn(e,t){if("change"===e)return t}var $n=!1;if(Bt){var Jn;if(Bt){var Yn="oninput"in document;if(!Yn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Yn="function"==typeof Wn.oninput}Jn=Yn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function Kn(){qn&&(qn.detachEvent("onpropertychange",Qn),Gn=qn=null)}function Qn(e){if("value"===e.propertyName&&Vn(Gn)){var t=[];Hn(t,Gn,e,jt(e)),zt(zn,t)}}function Xn(e,t,n){"focusin"===e?(Kn(),Gn=n,(qn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Kn()}function Zn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Gn)}function er(e,t){if("click"===e)return Vn(t)}function tr(e,t){if("input"===e||"change"===e)return Vn(t)}var nr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function rr(e,t){if(nr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ae.call(t,o)||!nr(e[o],t[o]))return!1}return!0}function or(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ir(e,t){var n,r=or(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=or(r)}}function lr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?lr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ar(e){for(var t=_t((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=_t((e=t.contentWindow).document)}return t}function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ur=Bt&&"documentMode"in document&&11>=document.documentMode,cr=null,dr=null,pr=null,fr=!1;function mr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;fr||null==cr||cr!==_t(r)||("selectionStart"in(r=cr)&&sr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},pr&&rr(pr,r)||(pr=r,0<(r=ad(dr,"onSelect")).length&&(t=new an("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cr)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},vr={},yr={};function _r(e){if(vr[e])return vr[e];if(!gr[e])return e;var t,n=gr[e];for(t in n)if(n.hasOwnProperty(t)&&t in yr)return vr[e]=n[t];return e}Bt&&(yr=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);var br=_r("animationend"),Er=_r("animationiteration"),Sr=_r("animationstart"),wr=_r("transitionrun"),Tr=_r("transitionstart"),Ar=_r("transitioncancel"),Cr=_r("transitionend"),Ir=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Ir.set(e,t),at(t,[e])}xr.push("scrollEnd");var Or="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Nr=[],Pr=0,Rr=0;function Mr(){for(var e=Pr,t=Rr=Pr=0;t<e;){var n=Nr[t];Nr[t++]=null;var r=Nr[t];Nr[t++]=null;var o=Nr[t];Nr[t++]=null;var i=Nr[t];if(Nr[t++]=null,null!==r&&null!==o){var l=r.pending;null===l?o.next=o:(o.next=l.next,l.next=o),r.pending=o}0!==i&&jr(n,o,i)}}function Dr(e,t,n,r){Nr[Pr++]=e,Nr[Pr++]=t,Nr[Pr++]=n,Nr[Pr++]=r,Rr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Lr(e,t,n,r){return Dr(e,t,n,r),Fr(e)}function Ur(e,t){return Dr(e,null,null,t),Fr(e)}function jr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,o&&null!==t&&(o=31-Te(n),null===(r=(e=i.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),i):null}function Fr(e){if(50<Yu)throw Yu=0,Wu=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Hr={};function qr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(e,t,n,r){return new qr(e,t,n,r)}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vr(e,t){var n=e.alternate;return null===n?((n=Gr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $r(e,t,n,o,i,l){var a=0;if(o=e,"function"==typeof e)zr(e)&&(a=1);else if("string"==typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,Y.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Gr(31,n,t,i)).elementType=N,e.lanes=l,e;case h:return Jr(n.children,i,l,t);case g:a=8,i|=24;break;case v:return(e=Gr(12,n,t,2|i)).elementType=v,e.lanes=l,e;case A:return(e=Gr(13,n,t,i)).elementType=A,e.lanes=l,e;case I:return(e=Gr(19,n,t,i)).elementType=I,e.lanes=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:a=10;break e;case _:a=9;break e;case S:a=11;break e;case k:a=14;break e;case O:a=16,o=null;break e}a=29,n=Error(r(130,null===e?"null":typeof e,"")),o=null}return(t=Gr(a,n,t,i)).elementType=e,t.type=o,t.lanes=l,t}function Jr(e,t,n,r){return(e=Gr(7,e,r,t)).lanes=n,e}function Yr(e,t,n){return(e=Gr(6,e,null,t)).lanes=n,e}function Wr(e){var t=Gr(18,null,null,0);return t.stateNode=e,t}function Kr(e,t,n){return(t=Gr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qr=new WeakMap;function Xr(e,t){if("object"==typeof e&&null!==e){var n=Qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:le(t)},Qr.set(e,t),t)}return{value:e,source:t,stack:le(t)}}var Zr=[],eo=0,to=null,no=0,ro=[],oo=0,io=null,lo=1,ao="";function so(e,t){Zr[eo++]=no,Zr[eo++]=to,to=e,no=t}function uo(e,t,n){ro[oo++]=lo,ro[oo++]=ao,ro[oo++]=io,io=e;var r=lo;e=ao;var o=32-Te(r)-1;r&=~(1<<o),n+=1;var i=32-Te(t)+o;if(30<i){var l=o-o%5;i=(r&(1<<l)-1).toString(32),r>>=l,o-=l,lo=1<<32-Te(t)+o|n<<o|r,ao=i+e}else lo=1<<i|n<<o|r,ao=e}function co(e){null!==e.return&&(so(e,1),uo(e,1,0))}function po(e){for(;e===to;)to=Zr[--eo],Zr[eo]=null,no=Zr[--eo],Zr[eo]=null;for(;e===io;)io=ro[--oo],ro[oo]=null,ao=ro[--oo],ro[oo]=null,lo=ro[--oo],ro[oo]=null}function fo(e,t){ro[oo++]=lo,ro[oo++]=ao,ro[oo++]=io,lo=t.id,ao=t.overflow,io=e}var mo=null,ho=null,go=!1,vo=null,yo=!1,_o=Error(r(519));function bo(e){throw Co(Xr(Error(r(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),_o}function Eo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Be]=e,t[$e]=r,n){case"dialog":ed("cancel",t),ed("close",t);break;case"iframe":case"object":case"embed":ed("load",t);break;case"video":case"audio":for(n=0;n<Qc.length;n++)ed(Qc[n],t);break;case"source":ed("error",t);break;case"img":case"image":case"link":ed("error",t),ed("load",t);break;case"details":ed("toggle",t);break;case"input":ed("invalid",t),wt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":ed("invalid",t);break;case"textarea":ed("invalid",t),It(t,r.value,r.defaultValue,r.children)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||fd(t.textContent,n)?(null!=r.popover&&(ed("beforetoggle",t),ed("toggle",t)),null!=r.onScroll&&ed("scroll",t),null!=r.onScrollEnd&&ed("scrollend",t),null!=r.onClick&&(t.onclick=Lt),t=!0):t=!1,t||bo(e,!0)}function So(e){for(mo=e.return;mo;)switch(mo.tag){case 5:case 31:case 13:return void(yo=!1);case 27:case 3:return void(yo=!0);default:mo=mo.return}}function wo(e){if(e!==mo)return!1;if(!go)return So(e),go=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&ho&&bo(e),So(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));ho=Fd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));ho=Fd(e)}else 27===n?(n=ho,Od(e.type)?(e=jd,jd=null,ho=e):ho=n):ho=mo?Ud(e.stateNode.nextSibling):null;return!0}function To(){ho=mo=null,go=!1}function Ao(){var e=vo;return null!==e&&(null===Mu?Mu=e:Mu.push.apply(Mu,e),vo=null),e}function Co(e){null===vo?vo=[e]:vo.push(e)}var Io=z(null),xo=null,ko=null;function Oo(e,t,n){B(Io,t._currentValue),t._currentValue=n}function No(e){e._currentValue=Io.current,V(Io)}function Po(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t,n,o){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var l=i.dependencies;if(null!==l){var a=i.child;l=l.firstContext;e:for(;null!==l;){var s=l;l=i;for(var u=0;u<t.length;u++)if(s.context===t[u]){l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),Po(l.return,n,e),o||(a=null);break e}l=s.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(r(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Po(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Mo(e,t,n,o){e=null;for(var i=t,l=!1;null!==i;){if(!l)if(524288&i.flags)l=!0;else if(262144&i.flags)break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(r(387));if(null!==(a=a.memoizedProps)){var s=i.type;nr(i.pendingProps.value,a.value)||(null!==e?e.push(s):e=[s])}}else if(i===Q.current){if(null===(a=i.alternate))throw Error(r(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(mp):e=[mp])}i=i.return}null!==e&&Ro(t,e,n,o),t.flags|=262144}function Do(e){for(e=e.firstContext;null!==e;){if(!nr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Lo(e){xo=e,ko=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Uo(e){return Fo(xo,e)}function jo(e,t){return null===xo&&Lo(e),Fo(e,t)}function Fo(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ko){if(null===e)throw Error(r(308));ko=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ko=ko.next=t;return n}var Ho="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},qo=e.unstable_scheduleCallback,Go=e.unstable_NormalPriority,zo={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vo(){return{controller:new Ho,data:new Map,refCount:0}}function Bo(e){e.refCount--,0===e.refCount&&qo(Go,function(){e.controller.abort()})}var $o=null,Jo=0,Yo=0,Wo=null;function Ko(){if(0===--Jo&&null!==$o){null!==Wo&&(Wo.status="fulfilled");var e=$o;$o=null,Yo=0,Wo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Qo=j.S;j.S=function(e,t){Uu=pe(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===$o){var n=$o=[];Jo=0,Yo=$c(),Wo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Jo++,t.then(Ko,Ko)}(0,t),null!==Qo&&Qo(e,t)};var Xo=z(null);function Zo(){var e=Xo.current;return null!==e?e:yu.pooledCache}function ei(e,t){B(Xo,null===t?Xo.current:t.pool)}function ti(){var e=Zo();return null===e?null:{parent:zo._currentValue,pool:e}}var ni=Error(r(460)),ri=Error(r(474)),oi=Error(r(542)),ii={then:function(){}};function li(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ai(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Lt,Lt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw di(e=t.reason),e;default:if("string"==typeof t.status)t.then(Lt,Lt);else{if(null!==(e=yu)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw di(e=t.reason),e}throw ui=t,ni}}function si(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw ui=t,ni;throw t}}var ui=null;function ci(){if(null===ui)throw Error(r(459));var e=ui;return ui=null,e}function di(e){if(e===ni||e===oi)throw Error(r(483))}var pi=null,fi=0;function mi(e){var t=fi;return fi+=1,null===pi&&(pi=[]),ai(pi,e,t)}function hi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function gi(e,t){if(t.$$typeof===d)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Vr(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Yr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===h?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===O&&si(o)===t.type)?(hi(t=i(t,n.props),n),t.return=e,t):(hi(t=$r(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Jr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Yr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case f:return hi(n=$r(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Kr(t,e.mode,n)).return=e,t;case O:return p(e,t=si(t),n)}if(U(t)||M(t))return(t=Jr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,mi(t),n);if(t.$$typeof===b)return p(e,jo(e,t),n);gi(e,t)}return null}function g(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==o?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case f:return n.key===o?u(e,t,n,r):null;case m:return n.key===o?c(e,t,n,r):null;case O:return g(e,t,n=si(n),r)}if(U(n)||M(n))return null!==o?null:d(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,mi(n),r);if(n.$$typeof===b)return g(e,t,jo(e,n),r);gi(e,n)}return null}function v(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case f:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case O:return v(e,t,n,r=si(r),o)}if(U(r)||M(r))return d(t,e=e.get(n)||null,r,o,null);if("function"==typeof r.then)return v(e,t,n,mi(r),o);if(r.$$typeof===b)return v(e,t,n,jo(t,r),o);gi(t,r)}return null}function y(s,u,c,d){if("object"==typeof c&&null!==c&&c.type===h&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case f:e:{for(var _=c.key;null!==u;){if(u.key===_){if((_=c.type)===h){if(7===u.tag){n(s,u.sibling),(d=i(u,c.props.children)).return=s,s=d;break e}}else if(u.elementType===_||"object"==typeof _&&null!==_&&_.$$typeof===O&&si(_)===u.type){n(s,u.sibling),hi(d=i(u,c.props),c),d.return=s,s=d;break e}n(s,u);break}t(s,u),u=u.sibling}c.type===h?((d=Jr(c.props.children,s.mode,d,c.key)).return=s,s=d):(hi(d=$r(c.type,c.key,c.props,null,s.mode,d),c),d.return=s,s=d)}return a(s);case m:e:{for(_=c.key;null!==u;){if(u.key===_){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(s,u.sibling),(d=i(u,c.children||[])).return=s,s=d;break e}n(s,u);break}t(s,u),u=u.sibling}(d=Kr(c,s.mode,d)).return=s,s=d}return a(s);case O:return y(s,u,c=si(c),d)}if(U(c))return function(r,i,a,s){for(var u=null,c=null,d=i,f=i=0,m=null;null!==d&&f<a.length;f++){d.index>f?(m=d,d=null):m=d.sibling;var h=g(r,d,a[f],s);if(null===h){null===d&&(d=m);break}e&&d&&null===h.alternate&&t(r,d),i=l(h,i,f),null===c?u=h:c.sibling=h,c=h,d=m}if(f===a.length)return n(r,d),go&&so(r,f),u;if(null===d){for(;f<a.length;f++)null!==(d=p(r,a[f],s))&&(i=l(d,i,f),null===c?u=d:c.sibling=d,c=d);return go&&so(r,f),u}for(d=o(d);f<a.length;f++)null!==(m=v(d,r,f,a[f],s))&&(e&&null!==m.alternate&&d.delete(null===m.key?f:m.key),i=l(m,i,f),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(r,e)}),go&&so(r,f),u}(s,u,c,d);if(M(c)){if("function"!=typeof(_=M(c)))throw Error(r(150));return function(i,a,s,u){if(null==s)throw Error(r(151));for(var c=null,d=null,f=a,m=a=0,h=null,y=s.next();null!==f&&!y.done;m++,y=s.next()){f.index>m?(h=f,f=null):h=f.sibling;var _=g(i,f,y.value,u);if(null===_){null===f&&(f=h);break}e&&f&&null===_.alternate&&t(i,f),a=l(_,a,m),null===d?c=_:d.sibling=_,d=_,f=h}if(y.done)return n(i,f),go&&so(i,m),c;if(null===f){for(;!y.done;m++,y=s.next())null!==(y=p(i,y.value,u))&&(a=l(y,a,m),null===d?c=y:d.sibling=y,d=y);return go&&so(i,m),c}for(f=o(f);!y.done;m++,y=s.next())null!==(y=v(f,i,m,y.value,u))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),a=l(y,a,m),null===d?c=y:d.sibling=y,d=y);return e&&f.forEach(function(e){return t(i,e)}),go&&so(i,m),c}(s,u,c=_.call(c),d)}if("function"==typeof c.then)return y(s,u,mi(c),d);if(c.$$typeof===b)return y(s,u,jo(s,c),d);gi(s,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(s,u.sibling),(d=i(u,c)).return=s,s=d):(n(s,u),(d=Yr(c,s.mode,d)).return=s,s=d),a(s)):n(s,u)}return function(e,t,n,r){try{fi=0;var o=y(e,t,n,r);return pi=null,o}catch(l){if(l===ni||l===oi)throw l;var i=Gr(29,l,null,e.mode);return i.lanes=r,i.return=e,i}}}var yi=vi(!0),_i=vi(!1),bi=!1;function Ei(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Si(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function wi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&vu){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Fr(e),jr(e,null,n),t}return Dr(e,r,t,n),Fr(e)}function Ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}function Ci(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var l={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=l:i=i.next=l,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ii=!1;function xi(){if(Ii){if(null!==Wo)throw Wo}}function ki(e,t,n,r){Ii=!1;var o=e.updateQueue;bi=!1;var i=o.firstBaseUpdate,l=o.lastBaseUpdate,a=o.shared.pending;if(null!==a){o.shared.pending=null;var s=a,u=s.next;s.next=null,null===l?i=u:l.next=u,l=s;var d=e.alternate;null!==d&&((a=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===a?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=s))}if(null!==i){var p=o.baseState;for(l=0,d=u=s=null,a=i;;){var f=-536870913&a.lane,m=f!==a.lane;if(m?(bu&f)===f:(r&f)===f){0!==f&&f===Yo&&(Ii=!0),null!==d&&(d=d.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var h=e,g=a;f=t;var v=n;switch(g.tag){case 1:if("function"==typeof(h=g.payload)){p=h.call(v,p,f);break e}p=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(f="function"==typeof(h=g.payload)?h.call(v,p,f):h))break e;p=c({},p,f);break e;case 2:bi=!0}}null!==(f=a.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=o.callbacks)?o.callbacks=[f]:m.push(f))}else m={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(u=d=m,s=p):d=d.next=m,l|=f;if(null===(a=a.next)){if(null===(a=o.shared.pending))break;a=(m=a).next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}null===d&&(s=p),o.baseState=s,o.firstBaseUpdate=u,o.lastBaseUpdate=d,null===i&&(o.shared.lanes=0),xu|=l,e.lanes=l,e.memoizedState=p}}function Oi(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function Ni(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Oi(n[e],t)}var Pi=z(null),Ri=z(0);function Mi(e,t){B(Ri,e=Cu),B(Pi,t),Cu=e|t.baseLanes}function Di(){B(Ri,Cu),B(Pi,Pi.current)}function Li(){Cu=Ri.current,V(Pi),V(Ri)}var Ui=z(null),ji=null;function Fi(e){var t=e.alternate;B(Vi,1&Vi.current),B(Ui,e),null===ji&&(null===t||null!==Pi.current||null!==t.memoizedState)&&(ji=e)}function Hi(e){B(Vi,Vi.current),B(Ui,e),null===ji&&(ji=e)}function qi(e){22===e.tag?(B(Vi,Vi.current),B(Ui,e),null===ji&&(ji=e)):Gi()}function Gi(){B(Vi,Vi.current),B(Ui,Ui.current)}function zi(e){V(Ui),ji===e&&(ji=null),V(Vi)}var Vi=z(0);function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Dd(n)||Ld(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $i=0,Ji=null,Yi=null,Wi=null,Ki=!1,Qi=!1,Xi=!1,Zi=0,el=0,tl=null,nl=0;function rl(){throw Error(r(321))}function ol(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nr(e[n],t[n]))return!1;return!0}function il(e,t,n,r,o,i){return $i=i,Ji=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j.H=null===e||null===e.memoizedState?ba:Ea,Xi=!1,i=n(r,o),Xi=!1,Qi&&(i=al(t,n,r,o)),ll(e),i}function ll(e){j.H=_a;var t=null!==Yi&&null!==Yi.next;if($i=0,Wi=Yi=Ji=null,Ki=!1,el=0,tl=null,t)throw Error(r(300));null===e||Ua||null!==(e=e.dependencies)&&Do(e)&&(Ua=!0)}function al(e,t,n,o){Ji=e;var i=0;do{if(Qi&&(tl=null),el=0,Qi=!1,25<=i)throw Error(r(301));if(i+=1,Wi=Yi=null,null!=e.updateQueue){var l=e.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,null!=l.memoCache&&(l.memoCache.index=0)}j.H=Sa,l=t(n,o)}while(Qi);return l}function sl(){var e=j.H,t=e.useState()[0];return t="function"==typeof t.then?ml(t):t,e=e.useState()[0],(null!==Yi?Yi.memoizedState:null)!==e&&(Ji.flags|=1024),t}function ul(){var e=0!==Zi;return Zi=0,e}function cl(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function dl(e){if(Ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ki=!1}$i=0,Wi=Yi=Ji=null,Qi=!1,el=Zi=0,tl=null}function pl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?Ji.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function fl(){if(null===Yi){var e=Ji.alternate;e=null!==e?e.memoizedState:null}else e=Yi.next;var t=null===Wi?Ji.memoizedState:Wi.next;if(null!==t)Wi=t,Yi=e;else{if(null===e){if(null===Ji.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Yi=e).memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},null===Wi?Ji.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function ml(e){var t=el;return el+=1,null===tl&&(tl=[]),e=ai(tl,e,t),t=Ji,null===(null===Wi?t.memoizedState:Wi.next)&&(t=t.alternate,j.H=null===t||null===t.memoizedState?ba:Ea),e}function hl(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ml(e);if(e.$$typeof===b)return Uo(e)}throw Error(r(438,String(e)))}function gl(e){var t=null,n=Ji.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Ji.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=P;return t.index++,n}function vl(e,t){return"function"==typeof t?t(e):t}function yl(e){return _l(fl(),Yi,e)}function _l(e,t,n){var o=e.queue;if(null===o)throw Error(r(311));o.lastRenderedReducer=n;var i=e.baseQueue,l=o.pending;if(null!==l){if(null!==i){var a=i.next;i.next=l.next,l.next=a}t.baseQueue=i=l,o.pending=null}if(l=e.baseState,null===i)e.memoizedState=l;else{var s=a=null,u=null,c=t=i.next,d=!1;do{var p=-536870913&c.lane;if(p!==c.lane?(bu&p)===p:($i&p)===p){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===Yo&&(d=!0);else{if(($i&f)===f){c=c.next,f===Yo&&(d=!0);continue}p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=p,a=l):u=u.next=p,Ji.lanes|=f,xu|=f}p=c.action,Xi&&n(l,p),l=c.hasEagerState?c.eagerState:n(l,p)}else f={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=f,a=l):u=u.next=f,Ji.lanes|=p,xu|=p;c=c.next}while(null!==c&&c!==t);if(null===u?a=l:u.next=s,!nr(l,e.memoizedState)&&(Ua=!0,d&&null!==(n=Wo)))throw n;e.memoizedState=l,e.baseState=a,e.baseQueue=u,o.lastRenderedState=l}return null===i&&(o.lanes=0),[e.memoizedState,o.dispatch]}function bl(e){var t=fl(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var o=n.dispatch,i=n.pending,l=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{l=e(l,a.action),a=a.next}while(a!==i);nr(l,t.memoizedState)||(Ua=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,o]}function El(e,t,n){var o=Ji,i=fl(),l=go;if(l){if(void 0===n)throw Error(r(407));n=n()}else n=t();var a=!nr((Yi||i).memoizedState,n);if(a&&(i.memoizedState=n,Ua=!0),i=i.queue,$l(Tl.bind(null,o,i,e),[e]),i.getSnapshot!==t||a||null!==Wi&&1&Wi.memoizedState.tag){if(o.flags|=2048,ql(9,{destroy:void 0},wl.bind(null,o,i,n,t),null),null===yu)throw Error(r(349));l||127&$i||Sl(o,t,n)}return n}function Sl(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ji.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function wl(e,t,n,r){t.value=n,t.getSnapshot=r,Al(t)&&Cl(e)}function Tl(e,t,n){return n(function(){Al(t)&&Cl(e)})}function Al(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nr(e,n)}catch(r){return!0}}function Cl(e){var t=Ur(e,2);null!==t&&Xu(t,e,2)}function Il(e){var t=pl();if("function"==typeof e){var n=e;if(e=n(),Xi){we(!0);try{n()}finally{we(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:e},t}function xl(e,t,n,r){return e.baseState=n,_l(e,Yi,"function"==typeof r?r:vl)}function kl(e,t,n,o,i){if(ga(e))throw Error(r(485));if(null!==(e=t.action)){var l={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){l.listeners.push(e)}};null!==j.T?n(!0):l.isTransition=!1,o(l),null===(n=t.pending)?(l.next=t.pending=l,Ol(t,l)):(l.next=n.next,t.pending=n.next=l)}}function Ol(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=j.T,l={};j.T=l;try{var a=n(o,r),s=j.S;null!==s&&s(l,a),Nl(e,t,a)}catch(u){Rl(e,t,u)}finally{null!==i&&null!==l.types&&(i.types=l.types),j.T=i}}else try{Nl(e,t,i=n(o,r))}catch(c){Rl(e,t,c)}}function Nl(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){Pl(e,t,n)},function(n){return Rl(e,t,n)}):Pl(e,t,n)}function Pl(e,t,n){t.status="fulfilled",t.value=n,Ml(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ol(e,n)))}function Rl(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ml(t),t=t.next}while(t!==r)}e.action=null}function Ml(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Dl(e,t){return t}function Ll(e,t){if(go){var n=yu.formState;if(null!==n){e:{var r=Ji;if(go){if(ho){t:{for(var o=ho,i=yo;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=Ud(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){ho=Ud(o.nextSibling),r="F!"===o.data;break e}}bo(r)}r=!1}r&&(t=n[0])}}return(n=pl()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:t},n.queue=r,n=fa.bind(null,Ji,r),r.dispatch=n,r=Il(!1),i=ha.bind(null,Ji,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=pl()).queue=o,n=kl.bind(null,Ji,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ul(e){return jl(fl(),Yi,e)}function jl(e,t,n){if(t=_l(e,t,Dl)[0],e=yl(vl)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=ml(t)}catch(l){if(l===ni)throw oi;throw l}else r=t;var o=(t=fl()).queue,i=o.dispatch;return n!==t.memoizedState&&(Ji.flags|=2048,ql(9,{destroy:void 0},Fl.bind(null,o,n),null)),[r,i,e]}function Fl(e,t){e.action=t}function Hl(e){var t=fl(),n=Yi;if(null!==n)return jl(t,n,e);fl(),t=t.memoizedState;var r=(n=fl()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ql(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Ji.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Gl(){return fl().memoizedState}function zl(e,t,n,r){var o=pl();Ji.flags|=e,o.memoizedState=ql(1|t,{destroy:void 0},n,void 0===r?null:r)}function Vl(e,t,n,r){var o=fl();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==Yi&&null!==r&&ol(r,Yi.memoizedState.deps)?o.memoizedState=ql(t,i,n,r):(Ji.flags|=e,o.memoizedState=ql(1|t,i,n,r))}function Bl(e,t){zl(8390656,8,e,t)}function $l(e,t){Vl(2048,8,e,t)}function Jl(e){var t=fl().memoizedState;return function(e){Ji.flags|=4;var t=Ji.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ji.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(2&vu)throw Error(r(440));return t.impl.apply(void 0,arguments)}}function Yl(e,t){return Vl(4,2,e,t)}function Wl(e,t){return Vl(4,4,e,t)}function Kl(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ql(e,t,n){n=null!=n?n.concat([e]):null,Vl(4,4,Kl.bind(null,t,e),n)}function Xl(){}function Zl(e,t){var n=fl();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ol(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ea(e,t){var n=fl();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ol(t,r[1]))return r[0];if(r=e(),Xi){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r}function ta(e,t,n){return void 0===n||1073741824&$i&&!(261930&bu)?e.memoizedState=t:(e.memoizedState=n,e=Qu(),Ji.lanes|=e,xu|=e,n)}function na(e,t,n,r){return nr(n,t)?n:null!==Pi.current?(e=ta(e,n,r),nr(e,t)||(Ua=!0),e):42&$i&&(!(1073741824&$i)||261930&bu)?(e=Qu(),Ji.lanes|=e,xu|=e,t):(Ua=!0,e.memoizedState=n)}function ra(e,t,n,r,o){var i=F.p;F.p=0!==i&&8>i?i:8;var l,a,s,u=j.T,c={};j.T=c,ha(e,!1,t,n);try{var d=o(),p=j.S;if(null!==p&&p(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)ma(e,t,(l=r,a=[],s={status:"pending",value:null,reason:null,then:function(e){a.push(e)}},d.then(function(){s.status="fulfilled",s.value=l;for(var e=0;e<a.length;e++)(0,a[e])(l)},function(e){for(s.status="rejected",s.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),s),Ku());else ma(e,t,r,Ku())}catch(f){ma(e,t,{then:function(){},status:"rejected",reason:f},Ku())}finally{F.p=i,null!==u&&null!==c.types&&(u.types=c.types),j.T=u}}function oa(){}function ia(e,t,n,o){if(5!==e.tag)throw Error(r(476));var i=la(e).queue;ra(e,i,t,H,null===n?oa:function(){return aa(e),n(o)})}function la(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:H},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function aa(e){var t=la(e);null===t.next&&(t=e.alternate.memoizedState),ma(e,t.next.queue,{},Ku())}function sa(){return Uo(mp)}function ua(){return fl().memoizedState}function ca(){return fl().memoizedState}function da(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ku(),r=Ti(t,e=wi(n),n);return null!==r&&(Xu(r,t,n),Ai(r,t,n)),t={cache:Vo()},void(e.payload=t)}t=t.return}}function pa(e,t,n){var r=Ku();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ga(e)?va(t,n):null!==(n=Lr(e,t,n,r))&&(Xu(n,e,r),ya(n,t,r))}function fa(e,t,n){ma(e,t,n,Ku())}function ma(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ga(e))va(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var l=t.lastRenderedState,a=i(l,n);if(o.hasEagerState=!0,o.eagerState=a,nr(a,l))return Dr(e,t,o,0),null===yu&&Mr(),!1}catch(s){}if(null!==(n=Lr(e,t,o,r)))return Xu(n,e,r),ya(n,t,r),!0}return!1}function ha(e,t,n,o){if(o={lane:2,revertLane:$c(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ga(e)){if(t)throw Error(r(479))}else null!==(t=Lr(e,n,o,2))&&Xu(t,e,2)}function ga(e){var t=e.alternate;return e===Ji||null!==t&&t===Ji}function va(e,t){Qi=Ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ya(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}var _a={readContext:Uo,use:hl,useCallback:rl,useContext:rl,useEffect:rl,useImperativeHandle:rl,useLayoutEffect:rl,useInsertionEffect:rl,useMemo:rl,useReducer:rl,useRef:rl,useState:rl,useDebugValue:rl,useDeferredValue:rl,useTransition:rl,useSyncExternalStore:rl,useId:rl,useHostTransitionStatus:rl,useFormState:rl,useActionState:rl,useOptimistic:rl,useMemoCache:rl,useCacheRefresh:rl};_a.useEffectEvent=rl;var ba={readContext:Uo,use:hl,useCallback:function(e,t){return pl().memoizedState=[e,void 0===t?null:t],e},useContext:Uo,useEffect:Bl,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,zl(4194308,4,Kl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zl(4194308,4,e,t)},useInsertionEffect:function(e,t){zl(4,2,e,t)},useMemo:function(e,t){var n=pl();t=void 0===t?null:t;var r=e();if(Xi){we(!0);try{e()}finally{we(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=pl();if(void 0!==n){var o=n(t);if(Xi){we(!0);try{n(t)}finally{we(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=pa.bind(null,Ji,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},pl().memoizedState=e},useState:function(e){var t=(e=Il(e)).queue,n=fa.bind(null,Ji,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xl,useDeferredValue:function(e,t){return ta(pl(),e,t)},useTransition:function(){var e=Il(!1);return e=ra.bind(null,Ji,e.queue,!0,!1),pl().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var o=Ji,i=pl();if(go){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===yu)throw Error(r(349));127&bu||Sl(o,t,n)}i.memoizedState=n;var l={value:n,getSnapshot:t};return i.queue=l,Bl(Tl.bind(null,o,l,e),[e]),o.flags|=2048,ql(9,{destroy:void 0},wl.bind(null,o,l,n,t),null),n},useId:function(){var e=pl(),t=yu.identifierPrefix;if(go){var n=ao;t="_"+t+"R_"+(n=(lo&~(1<<32-Te(lo)-1)).toString(32)+n),0<(n=Zi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=nl++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:sa,useFormState:Ll,useActionState:Ll,useOptimistic:function(e){var t=pl();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ha.bind(null,Ji,!0,n),n.dispatch=t,[e,t]},useMemoCache:gl,useCacheRefresh:function(){return pl().memoizedState=da.bind(null,Ji)},useEffectEvent:function(e){var t=pl(),n={impl:e};return t.memoizedState=n,function(){if(2&vu)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},Ea={readContext:Uo,use:hl,useCallback:Zl,useContext:Uo,useEffect:$l,useImperativeHandle:Ql,useInsertionEffect:Yl,useLayoutEffect:Wl,useMemo:ea,useReducer:yl,useRef:Gl,useState:function(){return yl(vl)},useDebugValue:Xl,useDeferredValue:function(e,t){return na(fl(),Yi.memoizedState,e,t)},useTransition:function(){var e=yl(vl)[0],t=fl().memoizedState;return["boolean"==typeof e?e:ml(e),t]},useSyncExternalStore:El,useId:ua,useHostTransitionStatus:sa,useFormState:Ul,useActionState:Ul,useOptimistic:function(e,t){return xl(fl(),0,e,t)},useMemoCache:gl,useCacheRefresh:ca};Ea.useEffectEvent=Jl;var Sa={readContext:Uo,use:hl,useCallback:Zl,useContext:Uo,useEffect:$l,useImperativeHandle:Ql,useInsertionEffect:Yl,useLayoutEffect:Wl,useMemo:ea,useReducer:bl,useRef:Gl,useState:function(){return bl(vl)},useDebugValue:Xl,useDeferredValue:function(e,t){var n=fl();return null===Yi?ta(n,e,t):na(n,Yi.memoizedState,e,t)},useTransition:function(){var e=bl(vl)[0],t=fl().memoizedState;return["boolean"==typeof e?e:ml(e),t]},useSyncExternalStore:El,useId:ua,useHostTransitionStatus:sa,useFormState:Hl,useActionState:Hl,useOptimistic:function(e,t){var n=fl();return null!==Yi?xl(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:gl,useCacheRefresh:ca};function wa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Sa.useEffectEvent=Jl;var Ta={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ku(),o=wi(r);o.payload=t,null!=n&&(o.callback=n),null!==(t=Ti(e,o,r))&&(Xu(t,e,r),Ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ku(),o=wi(r);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=Ti(e,o,r))&&(Xu(t,e,r),Ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ku(),r=wi(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=Ti(e,r,n))&&(Xu(t,e,n),Ai(t,e,n))}};function Aa(e,t,n,r,o,i,l){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,l):!t.prototype||!t.prototype.isPureReactComponent||(!rr(n,r)||!rr(o,i))}function Ca(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ta.enqueueReplaceState(t,t.state,null)}function Ia(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=c({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}function xa(e){Or(e)}function ka(e){console.error(e)}function Oa(e){Or(e)}function Na(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Pa(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ra(e,t,n){return(n=wi(n)).tag=3,n.payload={element:null},n.callback=function(){Na(e,t)},n}function Ma(e){return(e=wi(e)).tag=3,e}function Da(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"==typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){Pa(t,n,r)}}var l=n.stateNode;null!==l&&"function"==typeof l.componentDidCatch&&(e.callback=function(){Pa(t,n,r),"function"!=typeof o&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var La=Error(r(461)),Ua=!1;function ja(e,t,n,r){t.child=null===e?_i(t,null,n,r):yi(t,e.child,n,r)}function Fa(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var l={};for(var a in r)"ref"!==a&&(l[a]=r[a])}else l=r;return Lo(t),r=il(e,t,n,l,i,o),a=ul(),null===e||Ua?(go&&a&&co(t),t.flags|=1,ja(e,t,r,o),t.child):(cl(e,t,o),ss(e,t,o))}function Ha(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||zr(i)||void 0!==i.defaultProps||null!==n.compare?((e=$r(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,qa(e,t,i,r,o))}if(i=e.child,!us(e,o)){var l=i.memoizedProps;if((n=null!==(n=n.compare)?n:rr)(l,r)&&e.ref===t.ref)return ss(e,t,o)}return t.flags|=1,(e=Vr(i,r)).ref=t.ref,e.return=t,t.child=e}function qa(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(rr(i,r)&&e.ref===t.ref){if(Ua=!1,t.pendingProps=r=i,!us(e,o))return t.lanes=e.lanes,ss(e,t,o);131072&e.flags&&(Ua=!0)}}return Ya(e,t,n,r,o)}function Ga(e,t,n,r){var o=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(128&t.flags){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~i}else r=0,t.child=null;return Va(e,t,i,n,r)}if(!(536870912&n))return r=t.lanes=536870912,Va(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ei(0,null!==i?i.cachePool:null),null!==i?Mi(t,i):Di(),qi(t)}else null!==i?(ei(0,i.cachePool),Mi(t,i),Gi(),t.memoizedState=null):(null!==e&&ei(0,null),Di(),Gi());return ja(e,t,o,n),t.child}function za(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Va(e,t,n,r,o){var i=Zo();return i=null===i?null:{parent:zo._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&ei(0,null),Di(),qi(t),null!==e&&Mo(e,t,r,!0),t.childLanes=o,null}function Ba(e,t){return(t=rs({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function $a(e,t,n){return yi(t,e.child,null,n),(e=Ba(t,t.pendingProps)).flags|=2,zi(t),t.memoizedState=null,e}function Ja(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ya(e,t,n,r,o){return Lo(t),n=il(e,t,n,r,void 0,o),r=ul(),null===e||Ua?(go&&r&&co(t),t.flags|=1,ja(e,t,n,o),t.child):(cl(e,t,o),ss(e,t,o))}function Wa(e,t,n,r,o,i){return Lo(t),t.updateQueue=null,n=al(t,r,n,o),ll(e),r=ul(),null===e||Ua?(go&&r&&co(t),t.flags|=1,ja(e,t,n,i),t.child):(cl(e,t,i),ss(e,t,i))}function Ka(e,t,n,r,o){if(Lo(t),null===t.stateNode){var i=Hr,l=n.contextType;"object"==typeof l&&null!==l&&(i=Uo(l)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Ta,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},Ei(t),l=n.contextType,i.context="object"==typeof l&&null!==l?Uo(l):Hr,i.state=t.memoizedState,"function"==typeof(l=n.getDerivedStateFromProps)&&(wa(t,n,l,r),i.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(l=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),l!==i.state&&Ta.enqueueReplaceState(i,i.state,null),ki(t,r,i,o),xi(),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var a=t.memoizedProps,s=Ia(n,a);i.props=s;var u=i.context,c=n.contextType;l=Hr,"object"==typeof c&&null!==c&&(l=Uo(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(a||u!==l)&&Ca(t,i,r,l),bi=!1;var p=t.memoizedState;i.state=p,ki(t,r,i,o),xi(),u=t.memoizedState,a||p!==u||bi?("function"==typeof d&&(wa(t,n,d,r),u=t.memoizedState),(s=bi||Aa(t,n,s,r,p,u,l))?(c||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=l,r=s):("function"==typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Si(e,t),c=Ia(n,l=t.memoizedProps),i.props=c,d=t.pendingProps,p=i.context,u=n.contextType,s=Hr,"object"==typeof u&&null!==u&&(s=Uo(u)),(u="function"==typeof(a=n.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(l!==d||p!==s)&&Ca(t,i,r,s),bi=!1,p=t.memoizedState,i.state=p,ki(t,r,i,o),xi();var f=t.memoizedState;l!==d||p!==f||bi||null!==e&&null!==e.dependencies&&Do(e.dependencies)?("function"==typeof a&&(wa(t,n,a,r),f=t.memoizedState),(c=bi||Aa(t,n,c,r,p,f,s)||null!==e&&null!==e.dependencies&&Do(e.dependencies))?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,s),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,s)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=s,r=c):("function"!=typeof i.componentDidUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ja(e,t),r=!!(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=yi(t,e.child,null,o),t.child=yi(t,null,n,o)):ja(e,t,n,o),t.memoizedState=i.state,e=t.child):e=ss(e,t,o),e}function Qa(e,t,n,r){return To(),t.flags|=256,ja(e,t,n,r),t.child}var Xa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Za(e){return{baseLanes:e,cachePool:ti()}}function es(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Nu),e}function ts(e,t,n){var o,i=t.pendingProps,l=!1,a=!!(128&t.flags);if((o=a)||(o=(null===e||null!==e.memoizedState)&&!!(2&Vi.current)),o&&(l=!0,t.flags&=-129),o=!!(32&t.flags),t.flags&=-33,null===e){if(go){if(l?Fi(t):Gi(),(e=ho)?null!==(e=null!==(e=Md(e,yo))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==io?{id:lo,overflow:ao}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,mo=t,ho=null):e=null,null===e)throw bo(t);return Ld(e)?t.lanes=32:t.lanes=536870912,null}var s=i.children;return i=i.fallback,l?(Gi(),s=rs({mode:"hidden",children:s},l=t.mode),i=Jr(i,l,n,null),s.return=t,i.return=t,s.sibling=i,t.child=s,(i=t.child).memoizedState=Za(n),i.childLanes=es(e,o,n),t.memoizedState=Xa,za(null,i)):(Fi(t),ns(t,s))}var u=e.memoizedState;if(null!==u&&null!==(s=u.dehydrated)){if(a)256&t.flags?(Fi(t),t.flags&=-257,t=os(e,t,n)):null!==t.memoizedState?(Gi(),t.child=e.child,t.flags|=128,t=null):(Gi(),s=i.fallback,l=t.mode,i=rs({mode:"visible",children:i.children},l),(s=Jr(s,l,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,yi(t,e.child,null,n),(i=t.child).memoizedState=Za(n),i.childLanes=es(e,o,n),t.memoizedState=Xa,t=za(null,i));else if(Fi(t),Ld(s)){if(o=s.nextSibling&&s.nextSibling.dataset)var c=o.dgst;o=c,(i=Error(r(419))).stack="",i.digest=o,Co({value:i,source:null,stack:null}),t=os(e,t,n)}else if(Ua||Mo(e,t,n,!1),o=0!==(n&e.childLanes),Ua||o){if(null!==(o=yu)&&(0!==(i=Fe(o,n))&&i!==u.retryLane))throw u.retryLane=i,Ur(e,i),Xu(o,e,i),La;Dd(s)||cc(),t=os(e,t,n)}else Dd(s)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,ho=Ud(s.nextSibling),mo=t,go=!0,vo=null,yo=!1,null!==e&&fo(t,e),(t=ns(t,i.children)).flags|=4096);return t}return l?(Gi(),s=i.fallback,l=t.mode,c=(u=e.child).sibling,(i=Vr(u,{mode:"hidden",children:i.children})).subtreeFlags=65011712&u.subtreeFlags,null!==c?s=Vr(c,s):(s=Jr(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,za(null,i),i=t.child,null===(s=e.child.memoizedState)?s=Za(n):(null!==(l=s.cachePool)?(u=zo._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=ti(),s={baseLanes:s.baseLanes|n,cachePool:l}),i.memoizedState=s,i.childLanes=es(e,o,n),t.memoizedState=Xa,za(e.child,i)):(Fi(t),e=(n=e.child).sibling,(n=Vr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(o=t.deletions)?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function ns(e,t){return(t=rs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function rs(e,t){return(e=Gr(22,e,null,t)).lanes=0,e}function os(e,t,n){return yi(t,e.child,null,n),(e=ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function is(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Po(e.return,t,n)}function ls(e,t,n,r,o,i){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o,l.treeForkCount=i)}function as(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;r=r.children;var l=Vi.current,a=!!(2&l);if(a?(l=1&l|2,t.flags|=128):l&=1,B(Vi,l),ja(e,t,r,n),r=go?no:0,!a&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&is(e,n,t);else if(19===e.tag)is(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Bi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ls(t,!1,o,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Bi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ls(t,!0,n,null,i,r);break;case"together":ls(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ss(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Mo(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Vr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function us(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Do(e))}function cs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ua=!0;else{if(!(us(e,n)||128&t.flags))return Ua=!1,function(e,t,n){switch(t.tag){case 3:X(t,t.stateNode.containerInfo),Oo(0,zo,e.memoizedState.cache),To();break;case 27:case 5:ee(t);break;case 4:X(t,t.stateNode.containerInfo);break;case 10:Oo(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Hi(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Fi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?ts(e,t,n):(Fi(t),null!==(e=ss(e,t,n))?e.sibling:null);Fi(t);break;case 19:var o=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Mo(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return as(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),B(Vi,Vi.current),r)break;return null;case 22:return t.lanes=0,Ga(e,t,n,t.pendingProps);case 24:Oo(0,zo,e.memoizedState.cache)}return ss(e,t,n)}(e,t,n);Ua=!!(131072&e.flags)}else Ua=!1,go&&1048576&t.flags&&uo(t,no,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=si(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var i=e.$$typeof;if(i===S){t.tag=11,t=Fa(null,t,e,o,n);break e}if(i===k){t.tag=14,t=Ha(null,t,e,o,n);break e}}throw t=L(e)||e,Error(r(306,t,""))}zr(e)?(o=Ia(e,o),t.tag=1,t=Ka(null,t,e,o,n)):(t.tag=0,t=Ya(null,t,e,o,n))}return t;case 0:return Ya(e,t,t.type,t.pendingProps,n);case 1:return Ka(e,t,o=t.type,i=Ia(o,t.pendingProps),n);case 3:e:{if(X(t,t.stateNode.containerInfo),null===e)throw Error(r(387));o=t.pendingProps;var l=t.memoizedState;i=l.element,Si(e,t),ki(t,o,null,n);var a=t.memoizedState;if(o=a.cache,Oo(0,zo,o),o!==l.cache&&Ro(t,[zo],n,!0),xi(),o=a.element,l.isDehydrated){if(l={element:o,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Qa(e,t,o,n);break e}if(o!==i){Co(i=Xr(Error(r(424)),t)),t=Qa(e,t,o,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ho=Ud(e.firstChild),mo=t,go=!0,vo=null,yo=!0,n=_i(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(To(),o===i){t=ss(e,t,n);break e}ja(e,t,o,n)}t=t.child}return t;case 26:return Ja(e,t),null===e?(n=Wd(t.type,null,t.pendingProps,null))?t.memoizedState=n:go||(n=t.type,e=t.pendingProps,(o=bd(K.current).createElement(n))[Be]=t,o[$e]=e,gd(o,n,e),ot(o),t.stateNode=o):t.memoizedState=Wd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ee(t),null===e&&go&&(o=t.stateNode=qd(t.type,t.pendingProps,K.current),mo=t,yo=!0,i=ho,Od(t.type)?(jd=i,ho=Ud(o.firstChild)):ho=i),ja(e,t,t.pendingProps.children,n),Ja(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&go&&((i=o=ho)&&(null!==(o=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Xe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=Ud(e.nextSibling)))break}return null}(o,t.type,t.pendingProps,yo))?(t.stateNode=o,mo=t,ho=Ud(o.firstChild),yo=!1,i=!0):i=!1),i||bo(t)),ee(t),i=t.type,l=t.pendingProps,a=null!==e?e.memoizedProps:null,o=l.children,wd(i,l)?o=null:null!==a&&wd(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=il(e,t,sl,null,null,n),mp._currentValue=i),Ja(e,t),ja(e,t,o,n),t.child;case 6:return null===e&&go&&((e=n=ho)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Ud(e.nextSibling)))return null}return e}(n,t.pendingProps,yo))?(t.stateNode=n,mo=t,ho=null,e=!0):e=!1),e||bo(t)),null;case 13:return ts(e,t,n);case 4:return X(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=yi(t,null,o,n):ja(e,t,o,n),t.child;case 11:return Fa(e,t,t.type,t.pendingProps,n);case 7:return ja(e,t,t.pendingProps,n),t.child;case 8:case 12:return ja(e,t,t.pendingProps.children,n),t.child;case 10:return o=t.pendingProps,Oo(0,t.type,o.value),ja(e,t,o.children,n),t.child;case 9:return i=t.type._context,o=t.pendingProps.children,Lo(t),o=o(i=Uo(i)),t.flags|=1,ja(e,t,o,n),t.child;case 14:return Ha(e,t,t.type,t.pendingProps,n);case 15:return qa(e,t,t.type,t.pendingProps,n);case 19:return as(e,t,n);case 31:return function(e,t,n){var o=t.pendingProps,i=!!(128&t.flags);if(t.flags&=-129,null===e){if(go){if("hidden"===o.mode)return e=Ba(t,o),t.lanes=536870912,za(null,e);if(Hi(t),(e=ho)?null!==(e=null!==(e=Md(e,yo))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==io?{id:lo,overflow:ao}:null,retryLane:536870912,hydrationErrors:null},(n=Wr(e)).return=t,t.child=n,mo=t,ho=null):e=null,null===e)throw bo(t);return t.lanes=536870912,null}return Ba(t,o)}var l=e.memoizedState;if(null!==l){var a=l.dehydrated;if(Hi(t),i)if(256&t.flags)t.flags&=-257,t=$a(e,t,n);else{if(null===t.memoizedState)throw Error(r(558));t.child=e.child,t.flags|=128,t=null}else if(Ua||Mo(e,t,n,!1),i=0!==(n&e.childLanes),Ua||i){if(null!==(o=yu)&&0!==(a=Fe(o,n))&&a!==l.retryLane)throw l.retryLane=a,Ur(e,a),Xu(o,e,a),La;cc(),t=$a(e,t,n)}else e=l.treeContext,ho=Ud(a.nextSibling),mo=t,go=!0,vo=null,yo=!1,null!==e&&fo(t,e),(t=Ba(t,o)).flags|=4096;return t}return(e=Vr(e.child,{mode:o.mode,children:o.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Ga(e,t,n,t.pendingProps);case 24:return Lo(t),o=Uo(zo),null===e?(null===(i=Zo())&&(i=yu,l=Vo(),i.pooledCache=l,l.refCount++,null!==l&&(i.pooledCacheLanes|=n),i=l),t.memoizedState={parent:o,cache:i},Ei(t),Oo(0,zo,i)):(0!==(e.lanes&n)&&(Si(e,t),ki(t,null,null,n),xi()),i=e.memoizedState,l=t.memoizedState,i.parent!==o?(i={parent:o,cache:o},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Oo(0,zo,o)):(o=l.cache,Oo(0,zo,o),o!==i.cache&&Ro(t,[zo],n,!0))),ja(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function ds(e){e.flags|=4}function ps(e,t,n,r,o){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!ac())throw ui=ii,ri;e.flags|=8192}}else e.flags&=-16777217}function fs(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!sp(t)){if(!ac())throw ui=ii,ri;e.flags|=8192}}function ms(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Me():536870912,e.lanes|=t,Pu|=t)}function hs(e,t){if(!go)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vs(e,t,n){var o=t.pendingProps;switch(po(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return gs(t),null;case 3:return n=t.stateNode,o=null,null!==e&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),No(zo),Z(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(wo(t)?ds(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,Ao())),gs(t),null;case 26:var i=t.type,l=t.memoizedState;return null===e?(ds(t),null!==l?(gs(t),fs(t,l)):(gs(t),ps(t,i,0,0,n))):l?l!==e.memoizedState?(ds(t),gs(t),fs(t,l)):(gs(t),t.flags&=-16777217):((e=e.memoizedProps)!==o&&ds(t),gs(t),ps(t,i,0,0,n)),null;case 27:if(te(t),n=K.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==o&&ds(t);else{if(!o){if(null===t.stateNode)throw Error(r(166));return gs(t),null}e=Y.current,wo(t)?Eo(t):(e=qd(i,o,n),t.stateNode=e,ds(t))}return gs(t),null;case 5:if(te(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==o&&ds(t);else{if(!o){if(null===t.stateNode)throw Error(r(166));return gs(t),null}if(l=Y.current,wo(t))Eo(t);else{var a=bd(K.current);switch(l){case 1:l=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:l=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":l=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":l=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(l=a.createElement("div")).innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l="string"==typeof o.is?a.createElement("select",{is:o.is}):a.createElement("select"),o.multiple?l.multiple=!0:o.size&&(l.size=o.size);break;default:l="string"==typeof o.is?a.createElement(i,{is:o.is}):a.createElement(i)}}l[Be]=t,l[$e]=o;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)l.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=l;e:switch(gd(l,i,o),i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ds(t)}}return gs(t),ps(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==o&&ds(t);else{if("string"!=typeof o&&null===t.stateNode)throw Error(r(166));if(e=K.current,wo(t)){if(e=t.stateNode,n=t.memoizedProps,o=null,null!==(i=mo))switch(i.tag){case 27:case 5:o=i.memoizedProps}e[Be]=t,(e=!!(e.nodeValue===n||null!==o&&!0===o.suppressHydrationWarning||fd(e.nodeValue,n)))||bo(t,!0)}else(e=bd(e).createTextNode(o))[Be]=t,t.stateNode=e}return gs(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(o=wo(t),null!==n){if(null===e){if(!o)throw Error(r(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(557));e[Be]=t}else To(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;gs(t),e=!1}else n=Ao(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(zi(t),t):(zi(t),null);if(128&t.flags)throw Error(r(558))}return gs(t),null;case 13:if(o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=wo(t),null!==o&&null!==o.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[Be]=t}else To(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;gs(t),i=!1}else i=Ao(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(zi(t),t):(zi(t),null)}return zi(t),128&t.flags?(t.lanes=n,t):(n=null!==o,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(o=t.child).alternate&&null!==o.alternate.memoizedState&&null!==o.alternate.memoizedState.cachePool&&(i=o.alternate.memoizedState.cachePool.pool),l=null,null!==o.memoizedState&&null!==o.memoizedState.cachePool&&(l=o.memoizedState.cachePool.pool),l!==i&&(o.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ms(t,t.updateQueue),gs(t),null);case 4:return Z(),null===e&&rd(t.stateNode.containerInfo),gs(t),null;case 10:return No(t.type),gs(t),null;case 19:if(V(Vi),null===(o=t.memoizedState))return gs(t),null;if(i=!!(128&t.flags),null===(l=o.rendering))if(i)hs(o,!1);else{if(0!==Iu||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=Bi(e))){for(t.flags|=128,hs(o,!1),e=l.updateQueue,t.updateQueue=e,ms(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return B(Vi,1&Vi.current|2),go&&so(t,o.treeForkCount),t.child}e=e.sibling}null!==o.tail&&pe()>ju&&(t.flags|=128,i=!0,hs(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Bi(l))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ms(t,e),hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!go)return gs(t),null}else 2*pe()-o.renderingStartTime>ju&&536870912!==n&&(t.flags|=128,i=!0,hs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(e=o.last)?e.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=pe(),e.sibling=null,n=Vi.current,B(Vi,i?1&n|2:1&n),go&&so(t,o.treeForkCount),e):(gs(t),null);case 22:case 23:return zi(t),Li(),o=null!==t.memoizedState,null!==e?null!==e.memoizedState!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?!!(536870912&n)&&!(128&t.flags)&&(gs(t),6&t.subtreeFlags&&(t.flags|=8192)):gs(t),null!==(n=t.updateQueue)&&ms(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),o=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(o=t.memoizedState.cachePool.pool),o!==n&&(t.flags|=2048),null!==e&&V(Xo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),No(zo),gs(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function ys(e,t){switch(po(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return No(zo),Z(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return te(t),null;case 31:if(null!==t.memoizedState){if(zi(t),null===t.alternate)throw Error(r(340));To()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(zi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));To()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(Vi),null;case 4:return Z(),null;case 10:return No(t.type),null;case 22:case 23:return zi(t),Li(),null!==e&&V(Xo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return No(zo),null;default:return null}}function _s(e,t){switch(po(t),t.tag){case 3:No(zo),Z();break;case 26:case 27:case 5:te(t);break;case 4:Z();break;case 31:null!==t.memoizedState&&zi(t);break;case 13:zi(t);break;case 19:V(Vi);break;case 10:No(t.type);break;case 22:case 23:zi(t),Li(),null!==e&&V(Xo);break;case 24:No(zo)}}function bs(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,l=n.inst;r=i(),l.destroy=r}n=n.next}while(n!==o)}}catch(a){Ic(t,t.return,a)}}function Es(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var l=r.inst,a=l.destroy;if(void 0!==a){l.destroy=void 0,o=t;var s=n,u=a;try{u()}catch(c){Ic(o,s,c)}}}r=r.next}while(r!==i)}}catch(c){Ic(t,t.return,c)}}function Ss(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ni(t,n)}catch(r){Ic(e,e.return,r)}}}function ws(e,t,n){n.props=Ia(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Ic(e,t,r)}}function Ts(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(o){Ic(e,t,o)}}function As(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(o){Ic(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(i){Ic(e,t,i)}else n.current=null}function Cs(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){Ic(e,e.return,o)}}function Is(e,t,n){try{var o=e.stateNode;!function(e,t,n,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,l=null,a=null,s=null,u=null,c=null,d=null;for(m in n){var p=n[m];if(n.hasOwnProperty(m)&&null!=p)switch(m){case"checked":case"value":break;case"defaultValue":u=p;default:o.hasOwnProperty(m)||md(e,t,m,null,o,p)}}for(var f in o){var m=o[f];if(p=n[f],o.hasOwnProperty(f)&&(null!=m||null!=p))switch(f){case"type":l=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":a=m;break;case"defaultValue":s=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(r(137,t));break;default:m!==p&&md(e,t,f,m,o,p)}}return void St(e,a,s,u,c,d,l,i);case"select":for(l in m=a=s=f=null,n)if(u=n[l],n.hasOwnProperty(l)&&null!=u)switch(l){case"value":break;case"multiple":m=u;default:o.hasOwnProperty(l)||md(e,t,l,null,o,u)}for(i in o)if(l=o[i],u=n[i],o.hasOwnProperty(i)&&(null!=l||null!=u))switch(i){case"value":f=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:l!==u&&md(e,t,i,l,o,u)}return t=s,n=a,o=m,void(null!=f?At(e,!!n,f,!1):!!o!=!!n&&(null!=t?At(e,!!n,t,!0):At(e,!!n,n?[]:"",!1)));case"textarea":for(s in m=f=null,n)if(i=n[s],n.hasOwnProperty(s)&&null!=i&&!o.hasOwnProperty(s))switch(s){case"value":case"children":break;default:md(e,t,s,null,o,i)}for(a in o)if(i=o[a],l=n[a],o.hasOwnProperty(a)&&(null!=i||null!=l))switch(a){case"value":f=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(r(91));break;default:i!==l&&md(e,t,a,i,o,l)}return void Ct(e,f,m);case"option":for(var h in n)if(f=n[h],n.hasOwnProperty(h)&&null!=f&&!o.hasOwnProperty(h))if("selected"===h)e.selected=!1;else md(e,t,h,null,o,f);for(u in o)if(f=o[u],m=n[u],o.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))if("selected"===u)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else md(e,t,u,f,o,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!o.hasOwnProperty(g)&&md(e,t,g,null,o,f);for(c in o)if(f=o[c],m=n[c],o.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:md(e,t,c,f,o,m)}return;default:if(Pt(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!o.hasOwnProperty(v)&&hd(e,t,v,void 0,o,f);for(d in o)f=o[d],m=n[d],!o.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||hd(e,t,d,f,o,m);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!o.hasOwnProperty(y)&&md(e,t,y,null,o,f);for(p in o)f=o[p],m=n[p],!o.hasOwnProperty(p)||f===m||null==f&&null==m||md(e,t,p,f,o,m)}(o,e.type,n,t),o[$e]=t}catch(i){Ic(e,e.return,i)}}function xs(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Od(e.type)||4===e.tag}function ks(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Od(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Lt));else if(4!==r&&(27===r&&Od(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Os(e,t,n),e=e.sibling;null!==e;)Os(e,t,n),e=e.sibling}function Ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Od(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Ns(e,t,n),e=e.sibling;null!==e;)Ns(e,t,n),e=e.sibling}function Ps(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);gd(t,r,n),t[Be]=e,t[$e]=n}catch(i){Ic(e,e.return,i)}}var Rs=!1,Ms=!1,Ds=!1,Ls="function"==typeof WeakSet?WeakSet:Set,Us=null;function js(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Xs(e,n),4&r&&bs(5,n);break;case 1:if(Xs(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(l){Ic(n,n.return,l)}else{var o=Ia(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Ic(n,n.return,a)}}64&r&&Ss(n),512&r&&Ts(n,n.return);break;case 3:if(Xs(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ni(e,t)}catch(l){Ic(n,n.return,l)}}break;case 27:null===t&&4&r&&Ps(n);case 26:case 5:Xs(e,n),null===t&&4&r&&Cs(n),512&r&&Ts(n,n.return);break;case 12:Xs(e,n);break;case 31:Xs(e,n),4&r&&Vs(e,n);break;case 13:Xs(e,n),4&r&&Bs(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Nc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Rs)){t=null!==t&&null!==t.memoizedState||Ms,o=Rs;var i=Ms;Rs=r,(Ms=t)&&!i?eu(e,n,!!(8772&n.subtreeFlags)):Xs(e,n),Rs=o,Ms=i}break;case 30:break;default:Xs(e,n)}}function Fs(e){var t=e.alternate;null!==t&&(e.alternate=null,Fs(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ze(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Hs=null,qs=!1;function Gs(e,t,n){for(n=n.child;null!==n;)zs(e,t,n),n=n.sibling}function zs(e,t,n){if(Se&&"function"==typeof Se.onCommitFiberUnmount)try{Se.onCommitFiberUnmount(Ee,n)}catch(i){}switch(n.tag){case 26:Ms||As(n,t),Gs(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Ms||As(n,t);var r=Hs,o=qs;Od(n.type)&&(Hs=n.stateNode,qs=!1),Gs(e,t,n),Gd(n.stateNode),Hs=r,qs=o;break;case 5:Ms||As(n,t);case 6:if(r=Hs,o=qs,Hs=null,Gs(e,t,n),qs=o,null!==(Hs=r))if(qs)try{(9===Hs.nodeType?Hs.body:"HTML"===Hs.nodeName?Hs.ownerDocument.body:Hs).removeChild(n.stateNode)}catch(l){Ic(n,t,l)}else try{Hs.removeChild(n.stateNode)}catch(l){Ic(n,t,l)}break;case 18:null!==Hs&&(qs?(Nd(9===(e=Hs).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Yp(e)):Nd(Hs,n.stateNode));break;case 4:r=Hs,o=qs,Hs=n.stateNode.containerInfo,qs=!0,Gs(e,t,n),Hs=r,qs=o;break;case 0:case 11:case 14:case 15:Es(2,n,t),Ms||Es(4,n,t),Gs(e,t,n);break;case 1:Ms||(As(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&ws(n,t,r)),Gs(e,t,n);break;case 21:Gs(e,t,n);break;case 22:Ms=(r=Ms)||null!==n.memoizedState,Gs(e,t,n),Ms=r;break;default:Gs(e,t,n)}}function Vs(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Yp(e)}catch(n){Ic(t,t.return,n)}}}function Bs(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Yp(e)}catch(n){Ic(t,t.return,n)}}function $s(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ls),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ls),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Pc.bind(null,e,t);t.then(r,r)}})}function Js(e,t){var n=t.deletions;if(null!==n)for(var o=0;o<n.length;o++){var i=n[o],l=e,a=t,s=a;e:for(;null!==s;){switch(s.tag){case 27:if(Od(s.type)){Hs=s.stateNode,qs=!1;break e}break;case 5:Hs=s.stateNode,qs=!1;break e;case 3:case 4:Hs=s.stateNode.containerInfo,qs=!0;break e}s=s.return}if(null===Hs)throw Error(r(160));zs(l,a,i),Hs=null,qs=!1,null!==(l=i.alternate)&&(l.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ws(t,e),t=t.sibling}var Ys=null;function Ws(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Js(t,e),Ks(e),4&o&&(Es(3,e,e.return),bs(3,e),Es(5,e,e.return));break;case 1:Js(t,e),Ks(e),512&o&&(Ms||null===n||As(n,n.return)),64&o&&Rs&&(null!==(e=e.updateQueue)&&(null!==(o=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?o:n.concat(o))));break;case 26:var i=Ys;if(Js(t,e),Ks(e),512&o&&(Ms||null===n||As(n,n.return)),4&o){var l=null!==n?n.memoizedState:null;if(o=e.memoizedState,null===n)if(null===o)if(null===e.stateNode){e:{o=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(o){case"title":(!(l=i.getElementsByTagName("title")[0])||l[Xe]||l[Be]||"http://www.w3.org/2000/svg"===l.namespaceURI||l.hasAttribute("itemprop"))&&(l=i.createElement(o),i.head.insertBefore(l,i.querySelector("head > title"))),gd(l,o,n),l[Be]=e,ot(l),o=l;break e;case"link":var a=lp("link","href",i).get(o+(n.href||""));if(a)for(var s=0;s<a.length;s++)if((l=a[s]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&l.getAttribute("rel")===(null==n.rel?null:n.rel)&&l.getAttribute("title")===(null==n.title?null:n.title)&&l.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(s,1);break t}gd(l=i.createElement(o),o,n),i.head.appendChild(l);break;case"meta":if(a=lp("meta","content",i).get(o+(n.content||"")))for(s=0;s<a.length;s++)if((l=a[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&l.getAttribute("name")===(null==n.name?null:n.name)&&l.getAttribute("property")===(null==n.property?null:n.property)&&l.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&l.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(s,1);break t}gd(l=i.createElement(o),o,n),i.head.appendChild(l);break;default:throw Error(r(468,o))}l[Be]=e,ot(l),o=l}e.stateNode=o}else ap(i,e.type,e.stateNode);else e.stateNode=tp(i,o,e.memoizedProps);else l!==o?(null===l?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):l.count--,null===o?ap(i,e.type,e.stateNode):tp(i,o,e.memoizedProps)):null===o&&null!==e.stateNode&&Is(e,e.memoizedProps,n.memoizedProps)}break;case 27:Js(t,e),Ks(e),512&o&&(Ms||null===n||As(n,n.return)),null!==n&&4&o&&Is(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Js(t,e),Ks(e),512&o&&(Ms||null===n||As(n,n.return)),32&e.flags){i=e.stateNode;try{xt(i,"")}catch(h){Ic(e,e.return,h)}}4&o&&null!=e.stateNode&&Is(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&o&&(Ds=!0);break;case 6:if(Js(t,e),Ks(e),4&o){if(null===e.stateNode)throw Error(r(162));o=e.memoizedProps,n=e.stateNode;try{n.nodeValue=o}catch(h){Ic(e,e.return,h)}}break;case 3:if(ip=null,i=Ys,Ys=Bd(t.containerInfo),Js(t,e),Ys=i,Ks(e),4&o&&null!==n&&n.memoizedState.isDehydrated)try{Yp(t.containerInfo)}catch(h){Ic(e,e.return,h)}Ds&&(Ds=!1,Qs(e));break;case 4:o=Ys,Ys=Bd(e.stateNode.containerInfo),Js(t,e),Ks(e),Ys=o;break;case 12:default:Js(t,e),Ks(e);break;case 31:case 19:Js(t,e),Ks(e),4&o&&(null!==(o=e.updateQueue)&&(e.updateQueue=null,$s(e,o)));break;case 13:Js(t,e),Ks(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(Lu=pe()),4&o&&(null!==(o=e.updateQueue)&&(e.updateQueue=null,$s(e,o)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=Rs,d=Ms;if(Rs=c||i,Ms=d||u,Js(t,e),Ms=d,Rs=c,Ks(e),8192&o)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||Rs||Ms||Zs(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(l=u.stateNode,i)"function"==typeof(a=l.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{s=u.stateNode;var p=u.memoizedProps.style,f=null!=p&&p.hasOwnProperty("display")?p.display:null;s.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(h){Ic(u,u.return,h)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(h){Ic(u,u.return,h)}}}else if(18===t.tag){if(null===n){u=t;try{var m=u.stateNode;i?Pd(m,!0):Pd(u.stateNode,!1)}catch(h){Ic(u,u.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&o&&(null!==(o=e.updateQueue)&&(null!==(n=o.retryQueue)&&(o.retryQueue=null,$s(e,n))));case 30:case 21:}}function Ks(e){var t=e.flags;if(2&t){try{for(var n,o=e.return;null!==o;){if(xs(o)){n=o;break}o=o.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var i=n.stateNode;Ns(e,ks(e),i);break;case 5:var l=n.stateNode;32&n.flags&&(xt(l,""),n.flags&=-33),Ns(e,ks(e),l);break;case 3:case 4:var a=n.stateNode.containerInfo;Os(e,ks(e),a);break;default:throw Error(r(161))}}catch(s){Ic(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Qs(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Qs(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Xs(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)js(e,t.alternate,t),t=t.sibling}function Zs(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Es(4,t,t.return),Zs(t);break;case 1:As(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&ws(t,t.return,n),Zs(t);break;case 27:Gd(t.stateNode);case 26:case 5:As(t,t.return),Zs(t);break;case 22:null===t.memoizedState&&Zs(t);break;default:Zs(t)}e=e.sibling}}function eu(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,l=i.flags;switch(i.tag){case 0:case 11:case 15:eu(o,i,n),bs(4,i);break;case 1:if(eu(o,i,n),"function"==typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(u){Ic(r,r.return,u)}if(null!==(o=(r=i).updateQueue)){var a=r.stateNode;try{var s=o.shared.hiddenCallbacks;if(null!==s)for(o.shared.hiddenCallbacks=null,o=0;o<s.length;o++)Oi(s[o],a)}catch(u){Ic(r,r.return,u)}}n&&64&l&&Ss(i),Ts(i,i.return);break;case 27:Ps(i);case 26:case 5:eu(o,i,n),n&&null===r&&4&l&&Cs(i),Ts(i,i.return);break;case 12:eu(o,i,n);break;case 31:eu(o,i,n),n&&4&l&&Vs(o,i);break;case 13:eu(o,i,n),n&&4&l&&Bs(o,i);break;case 22:null===i.memoizedState&&eu(o,i,n),Ts(i,i.return);break;case 30:break;default:eu(o,i,n)}t=t.sibling}}function tu(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Bo(n))}function nu(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bo(e))}function ru(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ou(e,t,n,r),t=t.sibling}function ou(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:ru(e,t,n,r),2048&o&&bs(9,t);break;case 1:case 31:case 13:default:ru(e,t,n,r);break;case 3:ru(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bo(e)));break;case 12:if(2048&o){ru(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,l=i.id,a=i.onPostCommit;"function"==typeof a&&a(l,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(s){Ic(t,t.return,s)}}else ru(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,l=t.alternate,null!==t.memoizedState?2&i._visibility?ru(e,t,n,r):lu(e,t):2&i._visibility?ru(e,t,n,r):(i._visibility|=2,iu(e,t,n,r,!!(10256&t.subtreeFlags)||!1)),2048&o&&tu(l,t);break;case 24:ru(e,t,n,r),2048&o&&nu(t.alternate,t)}}function iu(e,t,n,r,o){for(o=o&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,l=t,a=n,s=r,u=l.flags;switch(l.tag){case 0:case 11:case 15:iu(i,l,a,s,o),bs(8,l);break;case 23:break;case 22:var c=l.stateNode;null!==l.memoizedState?2&c._visibility?iu(i,l,a,s,o):lu(i,l):(c._visibility|=2,iu(i,l,a,s,o)),o&&2048&u&&tu(l.alternate,l);break;case 24:iu(i,l,a,s,o),o&&2048&u&&nu(l.alternate,l);break;default:iu(i,l,a,s,o)}t=t.sibling}}function lu(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:lu(n,r),2048&o&&tu(r.alternate,r);break;case 24:lu(n,r),2048&o&&nu(r.alternate,r);break;default:lu(n,r)}t=t.sibling}}var au=8192;function su(e,t,n){if(e.subtreeFlags&au)for(e=e.child;null!==e;)uu(e,t,n),e=e.sibling}function uu(e,t,n){switch(e.tag){case 26:su(e,t,n),e.flags&au&&null!==e.memoizedState&&function(e,t,n,r){if(!("stylesheet"!==n.type||"string"==typeof r.media&&!1===matchMedia(r.media).matches||4&n.state.loading)){if(null===n.instance){var o=Kd(r.href),i=t.querySelector(Qd(o));if(i)return null!==(t=i._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=cp.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void ot(i);i=t.ownerDocument||t,r=Xd(r),(o=zd.get(o))&&rp(r,o),ot(i=i.createElement("link"));var l=i;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),gd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(3&n.state.loading)&&(e.count++,n=cp.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Ys,e.memoizedState,e.memoizedProps);break;case 5:default:su(e,t,n);break;case 3:case 4:var r=Ys;Ys=Bd(e.stateNode.containerInfo),su(e,t,n),Ys=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=au,au=16777216,su(e,t,n),au=r):su(e,t,n))}}function cu(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function du(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Us=r,mu(r,e)}cu(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)pu(e),e=e.sibling}function pu(e){switch(e.tag){case 0:case 11:case 15:du(e),2048&e.flags&&Es(9,e,e.return);break;case 3:case 12:default:du(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,fu(e)):du(e)}}function fu(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Us=r,mu(r,e)}cu(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Es(8,t,t.return),fu(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,fu(t));break;default:fu(t)}e=e.sibling}}function mu(e,t){for(;null!==Us;){var n=Us;switch(n.tag){case 0:case 11:case 15:Es(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Bo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Us=r;else e:for(n=e;null!==Us;){var o=(r=Us).sibling,i=r.return;if(Fs(r),r===n){Us=null;break e}if(null!==o){o.return=i,Us=o;break e}Us=i}}}var hu={getCacheForType:function(e){var t=Uo(zo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Uo(zo).controller.signal}},gu="function"==typeof WeakMap?WeakMap:Map,vu=0,yu=null,_u=null,bu=0,Eu=0,Su=null,wu=!1,Tu=!1,Au=!1,Cu=0,Iu=0,xu=0,ku=0,Ou=0,Nu=0,Pu=0,Ru=null,Mu=null,Du=!1,Lu=0,Uu=0,ju=1/0,Fu=null,Hu=null,qu=0,Gu=null,zu=null,Vu=0,Bu=0,$u=null,Ju=null,Yu=0,Wu=null;function Ku(){return 2&vu&&0!==bu?bu&-bu:null!==j.T?$c():Ge()}function Qu(){if(0===Nu)if(536870912&bu&&!go)Nu=536870912;else{var e=xe;!(3932160&(xe<<=1))&&(xe=262144),Nu=e}return null!==(e=Ui.current)&&(e.flags|=32),Nu}function Xu(e,t,n){(e!==yu||2!==Eu&&9!==Eu)&&null===e.cancelPendingCommit||(ic(e,0),nc(e,bu,Nu,!1)),Le(e,n),2&vu&&e===yu||(e===yu&&(!(2&vu)&&(ku|=n),4===Iu&&nc(e,bu,Nu,!1)),Fc(e))}function Zu(e,t,n){if(6&vu)throw Error(r(327));for(var o=!n&&!(127&t)&&0===(t&e.expiredLanes)||Pe(e,t),i=o?function(e,t){var n=vu;vu|=2;var o=sc(),i=uc();yu!==e||bu!==t?(Fu=null,ju=pe()+500,ic(e,t)):Tu=Pe(e,t);e:for(;;)try{if(0!==Eu&&null!==_u){t=_u;var l=Su;t:switch(Eu){case 1:Eu=0,Su=null,gc(e,t,l,1);break;case 2:case 9:if(li(l)){Eu=0,Su=null,hc(t);break}t=function(){2!==Eu&&9!==Eu||yu!==e||(Eu=7),Fc(e)},l.then(t,t);break e;case 3:Eu=7;break e;case 4:Eu=5;break e;case 7:li(l)?(Eu=0,Su=null,hc(t)):(Eu=0,Su=null,gc(e,t,l,7));break;case 5:var a=null;switch(_u.tag){case 26:a=_u.memoizedState;case 5:case 27:var s=_u;if(a?sp(a):s.stateNode.complete){Eu=0,Su=null;var u=s.sibling;if(null!==u)_u=u;else{var c=s.return;null!==c?(_u=c,vc(c)):_u=null}break t}}Eu=0,Su=null,gc(e,t,l,5);break;case 6:Eu=0,Su=null,gc(e,t,l,6);break;case 8:oc(),Iu=6;break e;default:throw Error(r(462))}}fc();break}catch(d){lc(e,d)}return ko=xo=null,j.H=o,j.A=i,vu=n,null!==_u?0:(yu=null,bu=0,Mr(),Iu)}(e,t):dc(e,t,!0),l=o;;){if(0===i){Tu&&!o&&nc(e,t,0,!1);break}if(n=e.current.alternate,!l||tc(n)){if(2===i){if(l=t,e.errorRecoveryDisabledLanes&l)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var s=e;i=Ru;var u=s.current.memoizedState.isDehydrated;if(u&&(ic(s,a).flags|=256),2!==(a=dc(s,a,!1))){if(Au&&!u){s.errorRecoveryDisabledLanes|=l,ku|=l,i=4;break e}l=Mu,Mu=i,null!==l&&(null===Mu?Mu=l:Mu.push.apply(Mu,l))}i=a}if(l=!1,2!==i)continue}}if(1===i){ic(e,0),nc(e,t,0,!0);break}e:{switch(o=e,l=i){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:nc(o,t,Nu,!wu);break e;case 2:Mu=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(i=Lu+300-pe())){if(nc(o,t,Nu,!wu),0!==Ne(o,0,!0))break e;Vu=t,o.timeoutHandle=Ad(ec.bind(null,o,n,Mu,Fu,Du,t,Nu,ku,Pu,wu,l,"Throttled",-0,0),i)}else ec(o,n,Mu,Fu,Du,t,Nu,ku,Pu,wu,l,null,-0,0)}break}i=dc(e,t,!1),l=!1}Fc(e)}function ec(e,t,n,r,o,i,l,a,s,u,c,d,p,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){uu(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lt});var m=(62914560&i)===i?Lu-pe():(4194048&i)===i?Uu-pe():0;if(null!==(m=function(e,t){return e.stylesheets&&0===e.count&&pp(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&pp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===up&&(up=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],i=o.transferSize,l=o.initiatorType,a=o.duration;if(i&&a&&vd(l)){for(l=0,a=o.responseEnd,r+=1;r<n.length;r++){var s=n[r],u=s.startTime;if(u>a)break;var c=s.transferSize,d=s.initiatorType;c&&vd(d)&&(l+=c*((s=s.responseEnd)<a?1:(a-u)/(s-u)))}if(--r,t+=8*(i+l)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var o=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&pp(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>up?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}(d,m)))return Vu=i,e.cancelPendingCommit=m(_c.bind(null,e,t,i,n,r,o,l,a,s,c,d,null,p,f)),void nc(e,i,l,!u)}_c(e,t,i,n,r,o,l,a,s)}function tc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!nr(i(),o))return!1}catch(l){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nc(e,t,n,r){t&=~Ou,t&=~ku,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-Te(o),l=1<<i;r[i]=-1,o&=~l}0!==n&&Ue(e,n,t)}function rc(){return!!(6&vu)||(Hc(0),!1)}function oc(){if(null!==_u){if(0===Eu)var e=_u.return;else ko=xo=null,dl(e=_u),pi=null,fi=0,e=_u;for(;null!==e;)_s(e.alternate,e),e=e.return;_u=null}}function ic(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vu=0,oc(),yu=e,_u=n=Vr(e.current,null),bu=t,Eu=0,Su=null,wu=!1,Tu=Pe(e,t),Au=!1,Pu=Nu=Ou=ku=xu=Iu=0,Mu=Ru=null,Du=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-Te(r),i=1<<o;t|=e[o],r&=~i}return Cu=t,Mr(),n}function lc(e,t){Ji=null,j.H=_a,t===ni||t===oi?(t=ci(),Eu=3):t===ri?(t=ci(),Eu=4):Eu=t===La?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,Su=t,null===_u&&(Iu=1,Na(e,Xr(t,e.current)))}function ac(){var e=Ui.current;return null===e||((4194048&bu)===bu?null===ji:!!((62914560&bu)===bu||536870912&bu)&&e===ji)}function sc(){var e=j.H;return j.H=_a,null===e?_a:e}function uc(){var e=j.A;return j.A=hu,e}function cc(){Iu=4,wu||(4194048&bu)!==bu&&null!==Ui.current||(Tu=!0),!(134217727&xu)&&!(134217727&ku)||null===yu||nc(yu,bu,Nu,!1)}function dc(e,t,n){var r=vu;vu|=2;var o=sc(),i=uc();yu===e&&bu===t||(Fu=null,ic(e,t)),t=!1;var l=Iu;e:for(;;)try{if(0!==Eu&&null!==_u){var a=_u,s=Su;switch(Eu){case 8:oc(),l=6;break e;case 3:case 2:case 9:case 6:null===Ui.current&&(t=!0);var u=Eu;if(Eu=0,Su=null,gc(e,a,s,u),n&&Tu){l=0;break e}break;default:u=Eu,Eu=0,Su=null,gc(e,a,s,u)}}pc(),l=Iu;break}catch(c){lc(e,c)}return t&&e.shellSuspendCounter++,ko=xo=null,vu=r,j.H=o,j.A=i,null===_u&&(yu=null,bu=0,Mr()),l}function pc(){for(;null!==_u;)mc(_u)}function fc(){for(;null!==_u&&!ce();)mc(_u)}function mc(e){var t=cs(e.alternate,e,Cu);e.memoizedProps=e.pendingProps,null===t?vc(e):_u=t}function hc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wa(n,t,t.pendingProps,t.type,void 0,bu);break;case 11:t=Wa(n,t,t.pendingProps,t.type.render,t.ref,bu);break;case 5:dl(t);default:_s(n,t),t=cs(n,t=_u=Br(t,Cu),Cu)}e.memoizedProps=e.pendingProps,null===t?vc(e):_u=t}function gc(e,t,n,o){ko=xo=null,dl(t),pi=null,fi=0;var i=t.return;try{if(function(e,t,n,o,i){if(n.flags|=32768,null!==o&&"object"==typeof o&&"function"==typeof o.then){if(null!==(t=n.alternate)&&Mo(t,n,i,!0),null!==(n=Ui.current)){switch(n.tag){case 31:case 13:return null===ji?cc():null===n.alternate&&0===Iu&&(Iu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,o===ii?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([o]):t.add(o),xc(e,o,i)),!1;case 22:return n.flags|=65536,o===ii?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([o]):n.add(o),xc(e,o,i)),!1}throw Error(r(435,n.tag))}return xc(e,o,i),cc(),!1}if(go)return null!==(t=Ui.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,o!==_o&&Co(Xr(e=Error(r(422),{cause:o}),n))):(o!==_o&&Co(Xr(t=Error(r(423),{cause:o}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,o=Xr(o,n),Ci(e,i=Ra(e.stateNode,o,i)),4!==Iu&&(Iu=2)),!1;var l=Error(r(520),{cause:o});if(l=Xr(l,n),null===Ru?Ru=[l]:Ru.push(l),4!==Iu&&(Iu=2),null===t)return!0;o=Xr(o,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Ci(n,e=Ra(n.stateNode,o,e)),!1;case 1:if(t=n.type,l=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===l||"function"!=typeof l.componentDidCatch||null!==Hu&&Hu.has(l))))return n.flags|=65536,i&=-i,n.lanes|=i,Da(i=Ma(i),e,n,o),Ci(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,bu))return Iu=1,Na(e,Xr(n,e.current)),void(_u=null)}catch(l){if(null!==i)throw _u=i,l;return Iu=1,Na(e,Xr(n,e.current)),void(_u=null)}32768&t.flags?(go||1===o?e=!0:Tu||536870912&bu?e=!1:(wu=e=!0,(2===o||9===o||3===o||6===o)&&(null!==(o=Ui.current)&&13===o.tag&&(o.flags|=16384))),yc(t,e)):vc(t)}function vc(e){var t=e;do{if(32768&t.flags)return void yc(t,wu);e=t.return;var n=vs(t.alternate,t,Cu);if(null!==n)return void(_u=n);if(null!==(t=t.sibling))return void(_u=t);_u=t=e}while(null!==t);0===Iu&&(Iu=5)}function yc(e,t){do{var n=ys(e.alternate,e);if(null!==n)return n.flags&=32767,void(_u=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(_u=e);_u=e=n}while(null!==e);Iu=6,_u=null}function _c(e,t,n,o,i,l,a,s,u){e.cancelPendingCommit=null;do{Tc()}while(0!==qu);if(6&vu)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(l=t.lanes|t.childLanes,function(e,t,n,r,o,i){var l=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,s=e.expirationTimes,u=e.hiddenUpdates;for(n=l&~n;0<n;){var c=31-Te(n),d=1<<c;a[c]=0,s[c]=-1;var p=u[c];if(null!==p)for(u[c]=null,c=0;c<p.length;c++){var f=p[c];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ue(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(l&~t))}(e,n,l|=Rr,a,s,u),e===yu&&(_u=yu=null,bu=0),zu=t,Gu=e,Vu=n,Bu=l,$u=i,Ju=o,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,se(ge,function(){return Ac(),null})):(e.callbackNode=null,e.callbackPriority=0),o=!!(13878&t.flags),13878&t.subtreeFlags||o){o=j.T,j.T=null,i=F.p,F.p=2,a=vu,vu|=4;try{!function(e,t){if(e=e.containerInfo,yd=wp,sr(e=ar(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var i=o.anchorOffset,l=o.focusNode;o=o.focusOffset;try{n.nodeType,l.nodeType}catch(g){n=null;break e}var a=0,s=-1,u=-1,c=0,d=0,p=e,f=null;t:for(;;){for(var m;p!==n||0!==i&&3!==p.nodeType||(s=a+i),p!==l||0!==o&&3!==p.nodeType||(u=a+o),3===p.nodeType&&(a+=p.nodeValue.length),null!==(m=p.firstChild);)f=p,p=m;for(;;){if(p===e)break t;if(f===n&&++c===i&&(s=a),f===l&&++d===o&&(u=a),null!==(m=p.nextSibling))break;f=(p=f).parentNode}p=m}n=-1===s||-1===u?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(_d={focusedElem:e,selectionRange:n},wp=!1,Us=t;null!==Us;)if(e=(t=Us).child,1028&t.subtreeFlags&&null!==e)e.return=t,Us=e;else for(;null!==Us;){switch(l=(t=Us).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==l){e=void 0,n=t,i=l.memoizedProps,l=l.memoizedState,o=n.stateNode;try{var h=Ia(n.type,i);e=o.getSnapshotBeforeUpdate(h,l),o.__reactInternalSnapshotBeforeUpdate=e}catch(v){Ic(n,n.return,v)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))Rd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Us=e;break}Us=t.return}}(e,t)}finally{vu=a,F.p=i,j.T=o}}qu=1,bc(),Ec(),Sc()}}function bc(){if(1===qu){qu=0;var e=Gu,t=zu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=j.T,j.T=null;var r=F.p;F.p=2;var o=vu;vu|=4;try{Ws(t,e);var i=_d,l=ar(e.containerInfo),a=i.focusedElem,s=i.selectionRange;if(l!==a&&a&&a.ownerDocument&&lr(a.ownerDocument.documentElement,a)){if(null!==s&&sr(a)){var u=s.start,c=s.end;if(void 0===c&&(c=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(c,a.value.length);else{var d=a.ownerDocument||document,p=d&&d.defaultView||window;if(p.getSelection){var f=p.getSelection(),m=a.textContent.length,h=Math.min(s.start,m),g=void 0===s.end?h:Math.min(s.end,m);!f.extend&&h>g&&(l=g,g=h,h=l);var v=ir(a,h),y=ir(a,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var _=d.createRange();_.setStart(v.node,v.offset),f.removeAllRanges(),h>g?(f.addRange(_),f.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),f.addRange(_))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof a.focus&&a.focus(),a=0;a<d.length;a++){var b=d[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}wp=!!yd,_d=yd=null}finally{vu=o,F.p=r,j.T=n}}e.current=t,qu=2}}function Ec(){if(2===qu){qu=0;var e=Gu,t=zu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=j.T,j.T=null;var r=F.p;F.p=2;var o=vu;vu|=4;try{js(e,t.alternate,t)}finally{vu=o,F.p=r,j.T=n}}qu=3}}function Sc(){if(4===qu||3===qu){qu=0,de();var e=Gu,t=zu,n=Vu,r=Ju;10256&t.subtreeFlags||10256&t.flags?qu=5:(qu=0,zu=Gu=null,wc(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Hu=null),qe(n),t=t.stateNode,Se&&"function"==typeof Se.onCommitFiberRoot)try{Se.onCommitFiberRoot(Ee,t,void 0,!(128&~t.current.flags))}catch(s){}if(null!==r){t=j.T,o=F.p,F.p=2,j.T=null;try{for(var i=e.onRecoverableError,l=0;l<r.length;l++){var a=r[l];i(a.value,{componentStack:a.stack})}}finally{j.T=t,F.p=o}}3&Vu&&Tc(),Fc(e),o=e.pendingLanes,261930&n&&42&o?e===Wu?Yu++:(Yu=0,Wu=e):Yu=0,Hc(0)}}function wc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bo(t)))}function Tc(){return bc(),Ec(),Sc(),Ac()}function Ac(){if(5!==qu)return!1;var e=Gu,t=Bu;Bu=0;var n=qe(Vu),o=j.T,i=F.p;try{F.p=32>n?32:n,j.T=null,n=$u,$u=null;var l=Gu,a=Vu;if(qu=0,zu=Gu=null,Vu=0,6&vu)throw Error(r(331));var s=vu;if(vu|=4,pu(l.current),ou(l,l.current,a,n),vu=s,Hc(0,!1),Se&&"function"==typeof Se.onPostCommitFiberRoot)try{Se.onPostCommitFiberRoot(Ee,l)}catch(u){}return!0}finally{F.p=i,j.T=o,wc(e,t)}}function Cc(e,t,n){t=Xr(n,t),null!==(e=Ti(e,t=Ra(e.stateNode,t,2),2))&&(Le(e,2),Fc(e))}function Ic(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){e=Xr(n,e),null!==(r=Ti(t,n=Ma(2),2))&&(Da(n,r,t,e),Le(r,2),Fc(r));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new gu;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(Au=!0,o.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,yu===e&&(bu&n)===n&&(4===Iu||3===Iu&&(62914560&bu)===bu&&300>pe()-Lu?!(2&vu)&&ic(e,0):Ou|=n,Pu===bu&&(Pu=0)),Fc(e)}function Oc(e,t){0===t&&(t=Me()),null!==(e=Ur(e,t))&&(Le(e,t),Fc(e))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Oc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 31:case 13:var o=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==o&&o.delete(t),Oc(e,n)}var Rc=null,Mc=null,Dc=!1,Lc=!1,Uc=!1,jc=0;function Fc(e){e!==Mc&&null===e.next&&(null===Mc?Rc=Mc=e:Mc=Mc.next=e),Lc=!0,Dc||(Dc=!0,xd(function(){6&vu?se(me,qc):Gc()}))}function Hc(e,t){if(!Uc&&Lc){Uc=!0;do{for(var n=!1,r=Rc;null!==r;){if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var l=r.suspendedLanes,a=r.pingedLanes;i=(1<<31-Te(42|e)+1)-1,i=201326741&(i&=o&~(l&~a))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Bc(r,i))}else i=bu,!(3&(i=Ne(r,r===yu?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Pe(r,i)||(n=!0,Bc(r,i));r=r.next}}while(n);Uc=!1}}function qc(){Gc()}function Gc(){Lc=Dc=!1;var e=0;0!==jc&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Td&&(Td=e,!0);return Td=null,!1}()&&(e=jc);for(var t=pe(),n=null,r=Rc;null!==r;){var o=r.next,i=zc(r,t);0===i?(r.next=null,null===n?Rc=o:n.next=o,null===o&&(Mc=n)):(n=r,(0!==e||3&i)&&(Lc=!0)),r=o}0!==qu&&5!==qu||Hc(e),0!==jc&&(jc=0)}function zc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var l=31-Te(i),a=1<<l,s=o[l];-1===s?0!==(a&n)&&0===(a&r)||(o[l]=Re(a,t)):s<=t&&(e.expiredLanes|=a),i&=~a}if(n=bu,n=Ne(e,e===(t=yu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===Eu||9===Eu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ue(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||Pe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ue(r),qe(n)){case 2:case 8:n=he;break;case 32:default:n=ge;break;case 268435456:n=ye}return r=Vc.bind(null,e),n=se(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ue(r),e.callbackPriority=2,e.callbackNode=null,2}function Vc(e,t){if(0!==qu&&5!==qu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=bu;return 0===(r=Ne(e,e===yu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Zu(e,r,t),zc(e,pe()),null!=e.callbackNode&&e.callbackNode===n?Vc.bind(null,e):null)}function Bc(e,t){if(Tc())return null;Zu(e,t,!0)}function $c(){if(0===jc){var e=Yo;0===e&&(e=Ie,!(261888&(Ie<<=1))&&(Ie=256)),jc=e}return jc}function Jc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Dt(""+e)}function Yc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wc=0;Wc<xr.length;Wc++){var Kc=xr[Wc];kr(Kc.toLowerCase(),"on"+(Kc[0].toUpperCase()+Kc.slice(1)))}kr(br,"onAnimationEnd"),kr(Er,"onAnimationIteration"),kr(Sr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(wr,"onTransitionRun"),kr(Tr,"onTransitionStart"),kr(Ar,"onTransitionCancel"),kr(Cr,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qc));function Zc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],s=a.instance,u=a.currentTarget;if(a=a.listener,s!==i&&o.isPropagationStopped())break e;i=a,o.currentTarget=u;try{i(o)}catch(c){Or(c)}o.currentTarget=null,i=s}else for(l=0;l<r.length;l++){if(s=(a=r[l]).instance,u=a.currentTarget,a=a.listener,s!==i&&o.isPropagationStopped())break e;i=a,o.currentTarget=u;try{i(o)}catch(c){Or(c)}o.currentTarget=null,i=s}}}}function ed(e,t){var n=t[Ye];void 0===n&&(n=t[Ye]=new Set);var r=e+"__bubble";n.has(r)||(od(t,e,2,!1),n.add(r))}function td(e,t,n){var r=0;t&&(r|=4),od(n,e,r,t)}var nd="_reactListening"+Math.random().toString(36).slice(2);function rd(e){if(!e[nd]){e[nd]=!0,it.forEach(function(t){"selectionchange"!==t&&(Xc.has(t)||td(t,!1,e),td(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[nd]||(t[nd]=!0,td("selectionchange",!1,t))}}function od(e,t,n,r){switch(Op(t)){case 2:var o=Tp;break;case 8:o=Ap;break;default:o=Cp}n=o.bind(null,t,n,e),o=void 0,!$t||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function id(e,t,n,r,o){var l=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&a.stateNode.containerInfo===o)return;a=a.return}for(;null!==s;){if(null===(a=et(s)))return;if(5===(u=a.tag)||6===u||26===u||27===u){r=l=a;continue e}s=s.parentNode}}r=r.return}zt(function(){var r=l,o=jt(n),a=[];e:{var s=Ir.get(e);if(void 0!==s){var u=an,c=e;switch(e){case"keypress":if(0===Xt(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":c="focus",u=fn;break;case"focusout":c="blur",u=fn;break;case"beforeblur":case"afterblur":u=fn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case br:case Er:case Sr:u=mn;break;case Cr:u=An;break;case"scroll":case"scrollend":u=un;break;case"wheel":u=Cn;break;case"copy":case"cut":case"paste":u=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=wn;break;case"toggle":case"beforetoggle":u=In}var d=!!(4&t),p=!d&&("scroll"===e||"scrollend"===e),f=d?null!==s?s+"Capture":null:s;d=[];for(var m,h=r;null!==h;){var g=h;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Vt(h,f))&&d.push(ld(h,g,m)),p)break;h=h.return}0<d.length&&(s=new u(s,c,null,n,o),a.push({event:s,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ut||!(c=n.relatedTarget||n.fromElement)||!et(c)&&!c[Je])&&(u||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?et(c):null)&&(p=i(c),d=c.tag,c!==p||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=dn,g="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=wn,g="onPointerLeave",f="onPointerEnter",h="pointer"),p=null==u?s:nt(u),m=null==c?s:nt(c),(s=new d(g,h+"leave",u,n,o)).target=p,s.relatedTarget=m,g=null,et(o)===r&&((d=new d(f,h+"enter",c,n,o)).target=m,d.relatedTarget=p,g=d),p=g,u&&c)e:{for(d=sd,h=c,m=0,g=f=u;g;g=d(g))m++;g=0;for(var v=h;v;v=d(v))g++;for(;0<m-g;)f=d(f),m--;for(;0<g-m;)h=d(h),g--;for(;m--;){if(f===h||null!==h&&f===h.alternate){d=f;break e}f=d(f),h=d(h)}d=null}else d=null;null!==u&&ud(a,s,u,d,!1),null!==c&&null!==p&&ud(a,p,c,d,!0)}if("select"===(u=(s=r?nt(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Bn;else if(Fn(s))if($n)y=tr;else{y=Zn;var _=Xn}else!(u=s.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Pt(r.elementType)&&(y=Bn):y=er;switch(y&&(y=y(e,r))?Hn(a,y,n,o):(_&&_(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&Tt(s,"number",s.value)),_=r?nt(r):window,e){case"focusin":(Fn(_)||"true"===_.contentEditable)&&(cr=_,dr=r,pr=null);break;case"focusout":pr=dr=cr=null;break;case"mousedown":fr=!0;break;case"contextmenu":case"mouseup":case"dragend":fr=!1,mr(a,n,o);break;case"selectionchange":if(ur)break;case"keydown":case"keyup":mr(a,n,o)}var b;if(kn)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Un?Dn(e,n)&&(E="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(E="onCompositionStart");E&&(Pn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==E?"onCompositionEnd"===E&&Un&&(b=Qt()):(Wt="value"in(Yt=o)?Yt.value:Yt.textContent,Un=!0)),0<(_=ad(r,E)).length&&(E=new gn(E,e,null,n,o),a.push({event:E,listeners:_}),b?E.data=b:null!==(b=Ln(n))&&(E.data=b))),(b=Nn?function(e,t){switch(e){case"compositionend":return Ln(t);case"keypress":return 32!==t.which?null:(Mn=!0,Rn);case"textInput":return(e=t.data)===Rn&&Mn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!kn&&Dn(e,t)?(e=Qt(),Kt=Wt=Yt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(E=ad(r,"onBeforeInput")).length&&(_=new gn("onBeforeInput","beforeinput",null,n,o),a.push({event:_,listeners:E}),_.data=b)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=Jc((o[$e]||null).action),l=r.submitter;l&&null!==(t=(t=l[$e]||null)?Jc(t.formAction):l.getAttribute("formAction"))&&(i=t,l=null);var a=new an("action","action",null,r,o);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==jc){var e=l?Yc(o,l):new FormData(o);ia(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"==typeof i&&(a.preventDefault(),e=l?Yc(o,l):new FormData(o),ia(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(a,e,r,n,o)}Zc(a,t)})}function ld(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ad(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=Vt(e,n))&&r.unshift(ld(e,o,i)),null!=(o=Vt(e,t))&&r.push(ld(e,o,i))),3===e.tag)return r;e=e.return}return[]}function sd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ud(e,t,n,r,o){for(var i=t._reactName,l=[];null!==n&&n!==r;){var a=n,s=a.alternate,u=a.stateNode;if(a=a.tag,null!==s&&s===r)break;5!==a&&26!==a&&27!==a||null===u||(s=u,o?null!=(u=Vt(n,i))&&l.unshift(ld(n,u,s)):o||null!=(u=Vt(n,i))&&l.push(ld(n,u,s))),n=n.return}0!==l.length&&e.push({event:t,listeners:l})}var cd=/\r\n?/g,dd=/\u0000|\uFFFD/g;function pd(e){return("string"==typeof e?e:""+e).replace(cd,"\n").replace(dd,"")}function fd(e,t){return t=pd(t),pd(e)===t}function md(e,t,n,o,i,l){switch(n){case"children":"string"==typeof o?"body"===t||"textarea"===t&&""===o||xt(e,o):("number"==typeof o||"bigint"==typeof o)&&"body"!==t&&xt(e,""+o);break;case"className":ft(e,"class",o);break;case"tabIndex":ft(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ft(e,n,o);break;case"style":Nt(e,o,l);break;case"data":if("object"!==t){ft(e,"data",o);break}case"src":case"href":if(""===o&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==o||"function"==typeof o||"symbol"==typeof o||"boolean"==typeof o){e.removeAttribute(n);break}o=Dt(""+o),e.setAttribute(n,o);break;case"action":case"formAction":if("function"==typeof o){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof l&&("formAction"===n?("input"!==t&&md(e,t,"name",i.name,i,null),md(e,t,"formEncType",i.formEncType,i,null),md(e,t,"formMethod",i.formMethod,i,null),md(e,t,"formTarget",i.formTarget,i,null)):(md(e,t,"encType",i.encType,i,null),md(e,t,"method",i.method,i,null),md(e,t,"target",i.target,i,null))),null==o||"symbol"==typeof o||"boolean"==typeof o){e.removeAttribute(n);break}o=Dt(""+o),e.setAttribute(n,o);break;case"onClick":null!=o&&(e.onclick=Lt);break;case"onScroll":null!=o&&ed("scroll",e);break;case"onScrollEnd":null!=o&&ed("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!=typeof o||!("__html"in o))throw Error(r(61));if(null!=(n=o.__html)){if(null!=i.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=o&&"function"!=typeof o&&"symbol"!=typeof o;break;case"muted":e.muted=o&&"function"!=typeof o&&"symbol"!=typeof o;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==o||"function"==typeof o||"boolean"==typeof o||"symbol"==typeof o){e.removeAttribute("xlink:href");break}n=Dt(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=o&&"function"!=typeof o&&"symbol"!=typeof o?e.setAttribute(n,""+o):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&"function"!=typeof o&&"symbol"!=typeof o?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===o?e.setAttribute(n,""):!1!==o&&null!=o&&"function"!=typeof o&&"symbol"!=typeof o?e.setAttribute(n,o):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&!isNaN(o)&&1<=o?e.setAttribute(n,o):e.removeAttribute(n);break;case"rowSpan":case"start":null==o||"function"==typeof o||"symbol"==typeof o||isNaN(o)?e.removeAttribute(n):e.setAttribute(n,o);break;case"popover":ed("beforetoggle",e),ed("toggle",e),pt(e,"popover",o);break;case"xlinkActuate":mt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":mt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":mt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":mt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":mt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":mt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":mt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":mt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":mt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":pt(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&pt(e,n=Rt.get(n)||n,o)}}function hd(e,t,n,o,i,l){switch(n){case"style":Nt(e,o,l);break;case"dangerouslySetInnerHTML":if(null!=o){if("object"!=typeof o||!("__html"in o))throw Error(r(61));if(null!=(n=o.__html)){if(null!=i.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof o?xt(e,o):("number"==typeof o||"bigint"==typeof o)&&xt(e,""+o);break;case"onScroll":null!=o&&ed("scroll",e);break;case"onScrollEnd":null!=o&&ed("scrollend",e);break;case"onClick":null!=o&&(e.onclick=Lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:lt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(l=null!=(l=e[$e]||null)?l[n]:null)&&e.removeEventListener(t,l,i),"function"!=typeof o)?n in e?e[n]=o:!0===o?e.setAttribute(n,""):pt(e,n,o):("function"!=typeof l&&null!==l&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,o,i)))}}function gd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ed("error",e),ed("load",e);var o,i=!1,l=!1;for(o in n)if(n.hasOwnProperty(o)){var a=n[o];if(null!=a)switch(o){case"src":i=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:md(e,t,o,a,n,null)}}return l&&md(e,t,"srcSet",n.srcSet,n,null),void(i&&md(e,t,"src",n.src,n,null));case"input":ed("invalid",e);var s=o=a=l=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":l=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":o=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:md(e,t,i,d,n,null)}}return void wt(e,o,s,u,c,a,l,!1);case"select":for(l in ed("invalid",e),i=a=o=null,n)if(n.hasOwnProperty(l)&&null!=(s=n[l]))switch(l){case"value":o=s;break;case"defaultValue":a=s;break;case"multiple":i=s;default:md(e,t,l,s,n,null)}return t=o,n=a,e.multiple=!!i,void(null!=t?At(e,!!i,t,!1):null!=n&&At(e,!!i,n,!0));case"textarea":for(a in ed("invalid",e),o=l=i=null,n)if(n.hasOwnProperty(a)&&null!=(s=n[a]))switch(a){case"value":i=s;break;case"defaultValue":l=s;break;case"children":o=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(r(91));break;default:md(e,t,a,s,n,null)}return void It(e,i,l,o);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i;else md(e,t,u,i,n,null);return;case"dialog":ed("beforetoggle",e),ed("toggle",e),ed("cancel",e),ed("close",e);break;case"iframe":case"object":ed("load",e);break;case"video":case"audio":for(i=0;i<Qc.length;i++)ed(Qc[i],e);break;case"image":ed("error",e),ed("load",e);break;case"details":ed("toggle",e);break;case"embed":case"source":case"link":ed("error",e),ed("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:md(e,t,c,i,n,null)}return;default:if(Pt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&hd(e,t,d,i,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(null!=(i=n[s])&&md(e,t,s,i,n,null))}function vd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var yd=null,_d=null;function bd(e){return 9===e.nodeType?e:e.ownerDocument}function Ed(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Td=null;var Ad="function"==typeof setTimeout?setTimeout:void 0,Cd="function"==typeof clearTimeout?clearTimeout:void 0,Id="function"==typeof Promise?Promise:void 0,xd="function"==typeof queueMicrotask?queueMicrotask:void 0!==Id?function(e){return Id.resolve(null).then(e).catch(kd)}:Ad;function kd(e){setTimeout(function(){throw e})}function Od(e){return"head"===e}function Nd(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)||"/&"===n){if(0===r)return e.removeChild(o),void Yp(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Gd(e.ownerDocument.documentElement);else if("head"===n){Gd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var l=i.nextSibling,a=i.nodeName;i[Xe]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=l}}else"body"===n&&Gd(e.ownerDocument.body);n=o}while(n);Yp(t)}function Pd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Rd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Rd(n),Ze(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Md(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ud(e.nextSibling)))return null}return e}function Dd(e){return"$?"===e.data||"$~"===e.data}function Ld(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ud(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var jd=null;function Fd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Ud(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Hd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function qd(e,t,n){switch(t=bd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function Gd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ze(e)}var zd=new Map,Vd=new Set;function Bd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var $d=F.d;F.d={f:function(){var e=$d.f(),t=rc();return e||t},r:function(e){var t=tt(e);null!==t&&5===t.tag&&"form"===t.type?aa(t):$d.r(e)},D:function(e){$d.D(e),Yd("dns-prefetch",e,null)},C:function(e,t){$d.C(e,t),Yd("preconnect",e,t)},L:function(e,t,n){$d.L(e,t,n);var r=Jd;if(r&&e&&t){var o='link[rel="preload"][as="'+Et(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Et(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(o+='[imagesizes="'+Et(n.imageSizes)+'"]')):o+='[href="'+Et(e)+'"]';var i=o;switch(t){case"style":i=Kd(e);break;case"script":i=Zd(e)}zd.has(i)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zd.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Qd(i))||"script"===t&&r.querySelector(ep(i))||(gd(t=r.createElement("link"),"link",e),ot(t),r.head.appendChild(t)))}},m:function(e,t){$d.m(e,t);var n=Jd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+Et(r)+'"][href="'+Et(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Zd(e)}if(!zd.has(i)&&(e=c({rel:"modulepreload",href:e},t),zd.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ep(i)))return}gd(r=n.createElement("link"),"link",e),ot(r),n.head.appendChild(r)}}},X:function(e,t){$d.X(e,t);var n=Jd;if(n&&e){var r=rt(n).hoistableScripts,o=Zd(e),i=r.get(o);i||((i=n.querySelector(ep(o)))||(e=c({src:e,async:!0},t),(t=zd.get(o))&&op(e,t),ot(i=n.createElement("script")),gd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){$d.S(e,t,n);var r=Jd;if(r&&e){var o=rt(r).hoistableStyles,i=Kd(e);t=t||"default";var l=o.get(i);if(!l){var a={loading:0,preload:null};if(l=r.querySelector(Qd(i)))a.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zd.get(i))&&rp(e,n);var s=l=r.createElement("link");ot(s),gd(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){a.loading|=1}),s.addEventListener("error",function(){a.loading|=2}),a.loading|=4,np(l,t,r)}l={type:"stylesheet",instance:l,count:1,state:a},o.set(i,l)}}},M:function(e,t){$d.M(e,t);var n=Jd;if(n&&e){var r=rt(n).hoistableScripts,o=Zd(e),i=r.get(o);i||((i=n.querySelector(ep(o)))||(e=c({src:e,async:!0,type:"module"},t),(t=zd.get(o))&&op(e,t),ot(i=n.createElement("script")),gd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var Jd="undefined"==typeof document?null:document;function Yd(e,t,n){var r=Jd;if(r&&"string"==typeof t&&t){var o=Et(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"==typeof n&&(o+='[crossorigin="'+n+'"]'),Vd.has(o)||(Vd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(gd(t=r.createElement("link"),"link",e),ot(t),r.head.appendChild(t)))}}function Wd(e,t,n,o){var i,l,a,s,u=(u=K.current)?Bd(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Kd(n.href),(o=(n=rt(u).hoistableStyles).get(t))||(o={type:"style",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Kd(n.href);var c=rt(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Qd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),zd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zd.set(e,n),c||(i=u,l=e,a=n,s=d.state,i.querySelector('link[rel="preload"][as="style"]['+l+"]")?s.loading=1:(l=i.createElement("link"),s.preload=l,l.addEventListener("load",function(){return s.loading|=1}),l.addEventListener("error",function(){return s.loading|=2}),gd(l,"link",a),ot(l),i.head.appendChild(l))))),t&&null===o)throw Error(r(528,""));return d}if(t&&null!==o)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Zd(n),(o=(n=rt(u).hoistableScripts).get(t))||(o={type:"script",instance:null,count:0,state:null},n.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Kd(e){return'href="'+Et(e)+'"'}function Qd(e){return'link[rel="stylesheet"]['+e+"]"}function Xd(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Zd(e){return'[src="'+Et(e)+'"]'}function ep(e){return"script[async]"+e}function tp(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Et(n.href)+'"]');if(o)return t.instance=o,ot(o),o;var i=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return ot(o=(e.ownerDocument||e).createElement("style")),gd(o,"style",i),np(o,n.precedence,e),t.instance=o;case"stylesheet":i=Kd(n.href);var l=e.querySelector(Qd(i));if(l)return t.state.loading|=4,t.instance=l,ot(l),l;o=Xd(n),(i=zd.get(i))&&rp(o,i),ot(l=(e.ownerDocument||e).createElement("link"));var a=l;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),gd(l,"link",o),t.state.loading|=4,np(l,n.precedence,e),t.instance=l;case"script":return l=Zd(n.src),(i=e.querySelector(ep(l)))?(t.instance=i,ot(i),i):(o=n,(i=zd.get(l))&&op(o=c({},n),i),ot(i=(e=e.ownerDocument||e).createElement("script")),gd(i,"link",o),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(o=t.instance,t.state.loading|=4,np(o,n.precedence,e));return t.instance}function np(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,l=0;l<r.length;l++){var a=r[l];if(a.dataset.precedence===t)i=a;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function rp(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function op(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var ip=null;function lp(e,t,n){if(null===ip){var r=new Map,o=ip=new Map;o.set(n,r)}else(r=(o=ip).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[Xe]||i[Be]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var l=i.getAttribute(t)||"";l=e+l;var a=r.get(l);a?a.push(i):r.set(l,[i])}}return r}function ap(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sp(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var up=0;function cp(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)pp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var dp=null;function pp(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,dp=new Map,t.forEach(fp,e),dp=null,cp.call(e))}function fp(e,t){if(!(4&t.state.loading)){var n=dp.get(e);if(n)var r=n.get(null);else{n=new Map,dp.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var l=o[i];"LINK"!==l.nodeName&&"not all"===l.getAttribute("media")||(n.set(l.dataset.precedence,l),r=l)}r&&n.set(null,r)}l=(o=t.instance).getAttribute("data-precedence"),(i=n.get(l)||r)===r&&n.set(null,o),n.set(l,o),this.count++,r=cp.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var mp={$$typeof:b,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function hp(e,t,n,r,o,i,l,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=De(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.hiddenUpdates=De(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=l,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function gp(e,t,n,r,o,i,l,a,s,u,c,d){return e=new hp(e,t,n,l,s,u,c,d,a),t=1,!0===i&&(t|=24),i=Gr(3,null,null,t),e.current=i,i.stateNode=e,(t=Vo()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},Ei(i),e}function vp(e){return e?e=Hr:Hr}function yp(e,t,n,r,o,i){o=vp(o),null===r.context?r.context=o:r.pendingContext=o,(r=wi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=Ti(e,r,t))&&(Xu(n,0,t),Ai(n,e,t))}function _p(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function bp(e,t){_p(e,t),(e=e.alternate)&&_p(e,t)}function Ep(e){if(13===e.tag||31===e.tag){var t=Ur(e,67108864);null!==t&&Xu(t,0,67108864),bp(e,67108864)}}function Sp(e){if(13===e.tag||31===e.tag){var t=Ku(),n=Ur(e,t=He(t));null!==n&&Xu(n,0,t),bp(e,t)}}var wp=!0;function Tp(e,t,n,r){var o=j.T;j.T=null;var i=F.p;try{F.p=2,Cp(e,t,n,r)}finally{F.p=i,j.T=o}}function Ap(e,t,n,r){var o=j.T;j.T=null;var i=F.p;try{F.p=8,Cp(e,t,n,r)}finally{F.p=i,j.T=o}}function Cp(e,t,n,r){if(wp){var o=Ip(r);if(null===o)id(e,t,r,xp,n),Fp(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Pp=Hp(Pp,e,t,n,r,o),!0;case"dragenter":return Rp=Hp(Rp,e,t,n,r,o),!0;case"mouseover":return Mp=Hp(Mp,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Dp.set(i,Hp(Dp.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Lp.set(i,Hp(Lp.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Fp(e,r),4&t&&-1<jp.indexOf(e)){for(;null!==o;){var i=tt(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var l=Oe(i.pendingLanes);if(0!==l){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;l;){var s=1<<31-Te(l);a.entanglements[1]|=s,l&=~s}Fc(i),!(6&vu)&&(ju=pe()+500,Hc(0))}}break;case 31:case 13:null!==(a=Ur(i,2))&&Xu(a,0,2),rc(),bp(i,2)}if(null===(i=Ip(r))&&id(e,t,r,xp,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else id(e,t,r,null,n)}}function Ip(e){return kp(e=jt(e))}var xp=null;function kp(e){if(xp=null,null!==(e=et(e))){var t=i(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(31===n){if(null!==(e=a(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return xp=e,null}function Op(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case me:return 2;case he:return 8;case ge:case ve:return 32;case ye:return 268435456;default:return 32}default:return 32}}var Np=!1,Pp=null,Rp=null,Mp=null,Dp=new Map,Lp=new Map,Up=[],jp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fp(e,t){switch(e){case"focusin":case"focusout":Pp=null;break;case"dragenter":case"dragleave":Rp=null;break;case"mouseover":case"mouseout":Mp=null;break;case"pointerover":case"pointerout":Dp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lp.delete(t.pointerId)}}function Hp(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=tt(t))&&Ep(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function qp(e){var t=et(e.target);if(null!==t){var n=i(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void ze(e.priority,function(){Sp(n)})}else if(31===t){if(null!==(t=a(n)))return e.blockedOn=t,void ze(e.priority,function(){Sp(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Gp(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ip(e.nativeEvent);if(null!==n)return null!==(t=tt(n))&&Ep(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ut=r,n.target.dispatchEvent(r),Ut=null,t.shift()}return!0}function zp(e,t,n){Gp(e)&&n.delete(t)}function Vp(){Np=!1,null!==Pp&&Gp(Pp)&&(Pp=null),null!==Rp&&Gp(Rp)&&(Rp=null),null!==Mp&&Gp(Mp)&&(Mp=null),Dp.forEach(zp),Lp.forEach(zp)}function Bp(t,n){t.blockedOn===n&&(t.blockedOn=null,Np||(Np=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vp)))}var $p=null;function Jp(t){$p!==t&&($p=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){$p===t&&($p=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],o=t[e+2];if("function"!=typeof r){if(null===kp(r||n))continue;break}var i=tt(n);null!==i&&(t.splice(e,3),e-=3,ia(i,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function Yp(e){function t(t){return Bp(t,e)}null!==Pp&&Bp(Pp,e),null!==Rp&&Bp(Rp,e),null!==Mp&&Bp(Mp,e),Dp.forEach(t),Lp.forEach(t);for(var n=0;n<Up.length;n++){var r=Up[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Up.length&&null===(n=Up[0]).blockedOn;)qp(n),null===n.blockedOn&&Up.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],l=o[$e]||null;if("function"==typeof i)l||Jp(n);else if(l){var a=null;if(i&&i.hasAttribute("formAction")){if(o=i,l=i[$e]||null)a=l.formAction;else if(null!==kp(o))continue}else a=l.action;"function"==typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Jp(n)}}}function Wp(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function Kp(e){this._internalRoot=e}function Qp(e){this._internalRoot=e}Qp.prototype.render=Kp.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));yp(t.current,Ku(),e,t,null,null)},Qp.prototype.unmount=Kp.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yp(e.current,2,null,e,null,null),rc(),t[Je]=null}},Qp.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ge();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Up.length&&0!==t&&t<Up[n].priority;n++);Up.splice(n,0,e),0===n&&qp(e)}};var Xp=t.version;if("19.2.0"!==Xp)throw Error(r(527,Xp,"19.2.0"));F.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=i(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,o=t;;){var l=n.return;if(null===l)break;var a=l.alternate;if(null===a){if(null!==(o=l.return)){n=o;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return s(l),e;if(a===o)return s(l),t;a=a.sibling}throw Error(r(188))}if(n.return!==o.return)n=l,o=a;else{for(var u=!1,c=l.child;c;){if(c===n){u=!0,n=l,o=a;break}if(c===o){u=!0,o=l,n=a;break}c=c.sibling}if(!u){for(c=a.child;c;){if(c===n){u=!0,n=a,o=l;break}if(c===o){u=!0,o=a,n=l;break}c=c.sibling}if(!u)throw Error(r(189))}}if(n.alternate!==o)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Zp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{Ee=ef.inject(Zp),Se=ef}catch(nf){}}return y.createRoot=function(e,t){if(!o(e))throw Error(r(299));var n=!1,i="",l=xa,a=ka,s=Oa;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(l=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=gp(e,1,!1,null,0,n,i,null,l,a,s,Wp),e[Je]=t.current,rd(e),new Kp(t)},y.hydrateRoot=function(e,t,n){if(!o(e))throw Error(r(299));var i=!1,l="",a=xa,s=ka,u=Oa,c=null;return null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(l=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.formState&&(c=n.formState)),(t=gp(e,1,!0,t,0,i,l,c,a,s,u,Wp)).context=vp(null),n=t.current,(l=wi(i=He(i=Ku()))).callback=null,Ti(n,l,i),n=i,t.current.lanes=n,Le(t,n),Fc(t),e[Je]=t.current,rd(e),new Qp(t)},y.version="19.2.0",y}const O=t((A||(A=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),v.exports=k()),v.exports));var N=(e=>(e.STARK="Stark",e.LANNISTER="Lannister",e.TARGARYEN="Targaryen",e.BARATHEON="Baratheon",e.GREYJOY="Greyjoy",e.TYRELL="Tyrell",e))(N||{}),P=(e=>(e[e.MENU=0]="MENU",e[e.CREATION=1]="CREATION",e[e.PLAYING=2]="PLAYING",e[e.GAME_OVER=3]="GAME_OVER",e[e.VICTORY=4]="VICTORY",e))(P||{});const R=({children:e,variant:t="primary",fullWidth:n=!1,className:r="",...o})=>{const i=n?"w-full":"";return s.jsx("button",{className:`font-display font-bold uppercase tracking-widest py-3 px-6 transition-all duration-300 clip-path-polygon disabled:opacity-50 disabled:cursor-not-allowed ${{primary:"bg-game-gold text-game-dark hover:bg-yellow-600 border-2 border-game-gold",secondary:"bg-stone-800 text-game-paper border-2 border-stone-600 hover:border-game-gold hover:text-game-gold",danger:"bg-game-crimson text-white border-2 border-red-900 hover:bg-red-800",outline:"bg-transparent text-game-gold border-2 border-game-gold hover:bg-game-gold/10"}[t]} ${i} ${r}`,...o,children:e})},M=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},D=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),L=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:l,...a},s)=>f.createElement("svg",{ref:s,...U,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:D("lucide",o),...!i&&!L(a)&&{"aria-hidden":"true"},...a},[...l.map(([e,t])=>f.createElement(e,t)),...Array.isArray(i)?i:[i]])),F=(e,t)=>{const n=f.forwardRef(({className:n,...r},o)=>{return f.createElement(j,{ref:o,iconNode:t,className:D(`lucide-${i=M(e),i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var i});return n.displayName=M(e),n},H=F("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),q=F("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),G=F("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),z=F("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),V=F("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]),B=F("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),$=F("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),J=F("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),Y=F("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),W=F("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),K=F("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Q=F("skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]),X=F("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Z=F("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),ee=F("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),te=F("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),ne=F("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),re=20,oe={ACT_1_END:5,ACT_2_END:15,ACT_3_END:20},ie="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3",le="https://assets.mixkit.co/active_storage/sfx/212/212-preview.mp3",ae="https://assets.mixkit.co/active_storage/sfx/143/143-preview.mp3",se="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3",ue={[N.STARK]:{motto:" ",description:",   .   .",color:"text-slate-300",icon:"",startingInfluence:50},[N.LANNISTER]:{motto:"  !",description:"  .    .",color:"text-red-500",icon:"",startingInfluence:80},[N.TARGARYEN]:{motto:"  ",description:"   .   .",color:"text-rose-600",icon:"",startingInfluence:20},[N.BARATHEON]:{motto:" - ",description:"    .   .",color:"text-yellow-500",icon:"",startingInfluence:60},[N.GREYJOY]:{motto:"  ",description:"   .   .",color:"text-teal-600",icon:"",startingInfluence:30},[N.TYRELL]:{motto:"  ",description:"     .",color:"text-green-500",icon:"",startingInfluence:75}},ce={[N.STARK]:[" ","  "," ",""," "],[N.LANNISTER]:[" "," ","","  "," "],[N.TARGARYEN]:[" "," "," "," "," "],[N.BARATHEON]:[" ",""," "," "," "],[N.GREYJOY]:[" "," "," "," "],[N.TYRELL]:[" "," "," "," "]},de=({onStartNew:e,onLoadGame:t})=>{const[n,r]=f.useState([]);f.useEffect(()=>{try{const e=localStorage.getItem("got_saves_v2");if(e){const t=JSON.parse(e);r(Object.values(t))}}catch(e){console.error("Error loading saves",e)}},[]);return s.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center text-center relative bg-black overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 z-0",children:[s.jsx("img",{src:"https://images.unsplash.com/photo-1533613220915-609f661a6fe1?q=80&w=2564&auto=format&fit=crop",alt:"Throne",className:"w-full h-full object-cover opacity-40 scale-105 animate-[pulse_15s_ease-in-out_infinite]"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/40 to-black"})]}),s.jsxs("div",{className:"relative z-10 px-6 w-full max-w-5xl flex flex-col md:flex-row gap-12 items-center md:items-stretch",children:[s.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center md:items-start text-center md:text-left",children:[s.jsx("h1",{className:"text-5xl md:text-7xl font-display text-transparent bg-clip-text bg-gradient-to-b from-game-gold to-yellow-900 drop-shadow-sm mb-4 tracking-widest",children:" "}),s.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-stone-300 mb-8 tracking-widest uppercase border-b border-game-gold/30 pb-4 inline-block",children:" "}),s.jsx("p",{className:"text-lg text-stone-400 mb-12 max-w-md font-serif italic leading-relaxed",children:'"    ,    .   ."'}),s.jsx(R,{onClick:e,className:"w-full md:w-auto text-xl py-4 px-12 shadow-[0_0_20px_rgba(197,160,89,0.3)]",children:" "})]}),s.jsxs("div",{className:"flex-1 w-full max-w-md bg-black/60 backdrop-blur-md border border-white/10 rounded-lg p-6 flex flex-col h-[500px]",children:[s.jsxs("h3",{className:"text-game-gold font-display text-xl mb-4 flex items-center gap-2",children:[s.jsx(ee,{size:20}),"  "]}),s.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide space-y-3 pr-2",children:0===n.length?s.jsx("div",{className:"h-full flex flex-col items-center justify-center text-stone-500 italic",children:s.jsx("p",{children:"   ..."})}):n.map(e=>s.jsxs("div",{onClick:()=>t(e),className:"group relative bg-stone-900/80 border border-stone-700 hover:border-game-gold p-4 rounded transition-all cursor-pointer hover:bg-stone-800 pr-12",children:[s.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),(e=>{if(window.confirm(`   ${e}?`))try{const t=localStorage.getItem("got_saves_v2");if(t){const n=JSON.parse(t);n[e]&&(delete n[e],localStorage.setItem("got_saves_v2",JSON.stringify(n)),r(Object.values(n)))}}catch(t){console.error("Failed to delete save",t)}})(e.character.name)},onMouseDown:e=>e.stopPropagation(),className:"absolute top-3 right-3 z-50 text-stone-600 hover:text-red-500 bg-black/50 hover:bg-red-950/50 p-2 rounded-full transition-all border border-transparent hover:border-red-900/50",title:"",children:s.jsx(X,{size:16,className:"pointer-events-none"})}),s.jsx("div",{className:"flex justify-between items-start mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:ue[e.character.house].icon}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-game-gold font-display font-bold leading-none",children:e.character.name}),s.jsxs("span",{className:"text-xs text-stone-400 font-serif",children:[" ",e.character.house]})]})]})}),s.jsxs("div",{className:"flex justify-between items-end mt-2",children:[s.jsxs("div",{className:"text-xs text-stone-500 flex flex-col gap-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(G,{size:12}),"  ",e.turnCount]}),s.jsxs("span",{className:"italic max-w-[200px] truncate",children:[e.currentScene.narrative.substring(0,30),"..."]})]}),s.jsx("div",{className:"text-game-gold opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(q,{})})]})]},e.character.name))})]})]}),s.jsx("footer",{className:"absolute bottom-6 text-stone-700 text-sm font-display w-full text-center",children:"Valar Morghulis  Powered by Gemini & Maria Kasycheva"})]})},pe=({onComplete:e})=>{const[t,n]=f.useState(""),[r,o]=f.useState(N.STARK),[i,l]=f.useState("");return s.jsx("div",{className:"min-h-screen bg-game-dark text-game-paper p-6 flex items-center justify-center bg-[url('https://images.unsplash.com/photo-1599707367072-cd6ad66acc40?q=80&w=2554&auto=format&fit=crop')] bg-cover bg-center bg-blend-overlay bg-fixed",children:s.jsxs("div",{className:"max-w-4xl w-full bg-black/85 border border-game-iron p-8 rounded-sm shadow-2xl backdrop-blur-sm",children:[s.jsx("h2",{className:"text-4xl font-display text-game-gold text-center mb-8 border-b border-game-iron pb-4",children:" "}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-game-gold font-display mb-2 text-lg flex items-center gap-2",children:[s.jsx(ee,{size:20})," '  / "]}),s.jsx("input",{type:"text",value:t,onChange:e=>n(e.target.value),className:"w-full bg-stone-900 border border-stone-600 p-3 text-white focus:border-game-gold focus:outline-none font-serif",placeholder:"..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-game-gold font-display mb-2 text-lg",children:"  ()"}),s.jsx("textarea",{value:i,onChange:e=>l(e.target.value),className:"w-full bg-stone-900 border border-stone-600 p-3 text-white focus:border-game-gold focus:outline-none font-serif h-24 resize-none",placeholder:" ..."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-game-gold font-display mb-4 text-lg flex items-center gap-2",children:[s.jsx(K,{size:20}),"  "]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.values(N).map(e=>s.jsxs("button",{onClick:()=>o(e),className:"p-4 border transition-all duration-300 text-left "+(r===e?"border-game-gold bg-game-gold/10":"border-stone-700 hover:border-stone-500 bg-stone-900/50"),children:[s.jsx("div",{className:"text-2xl mb-1",children:ue[e].icon}),s.jsx("div",{className:"font-display font-bold "+(r===e?"text-game-gold":"text-stone-400"),children:e})]},e))}),s.jsxs("div",{className:"mt-6 p-4 bg-stone-900/80 border-l-4 border-game-gold",children:[s.jsx("h3",{className:`font-display text-xl ${ue[r].color}`,children:ue[r].motto}),s.jsx("p",{className:"text-stone-400 text-sm mt-2 font-serif italic mb-3",children:ue[r].description}),s.jsxs("div",{className:"flex items-center gap-2 text-game-gold text-sm border-t border-white/10 pt-2",children:[s.jsx(z,{size:16}),s.jsxs("span",{children:[" : ",s.jsxs("strong",{children:[ue[r].startingInfluence,"%"]})]})]})]})]})]}),s.jsx("div",{className:"mt-10 flex justify-center",children:s.jsx(R,{onClick:()=>{t.trim()&&e({name:t,house:r,bio:i||" ,   .",health:100,influence:ue[r].startingInfluence})},disabled:!t.trim(),className:"w-full md:w-1/3 text-lg",children:" "})})]})})};
/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fe,me={};
/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var he,ge=(fe||(fe=1,he=me,function(){var t=function(){this.init()};t.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||n;if(e=parseFloat(e),t.ctx||c(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),i=0;i<o.length;i++){var l=t._howls[r]._soundById(o[i]);l&&l._node&&(l._node.volume=l._volume*e)}return t}return t._volume},mute:function(e){var t=this||n;t.ctx||c(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),i=0;i<o.length;i++){var l=t._howls[r]._soundById(o[i]);l&&l._node&&(l._node.muted=!!e||l._muted)}return t},stop:function(){for(var e=this||n,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||n,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(c){return e}if(!t||"function"!=typeof t.canPlayType)return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator?e._navigator.userAgent:"",i=o.match(/OPR\/(\d+)/g),l=i&&parseInt(i[0].split("/")[1],10)<33,a=-1!==o.indexOf("Safari")&&-1===o.indexOf("Chrome"),s=o.match(/Version\/(.*?) /),u=a&&s&&parseInt(s[1],10)<15;return e._codecs={mp3:!(l||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(u){e.noAudio=!0;break}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var i=e._howls[o]._getSoundIds(),l=0;l<i.length;l++){var a=e._howls[o]._soundById(i[l]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}e._autoResume();var s=e.ctx.createBufferSource();s.buffer=e._scratchBuffer,s.connect(e.ctx.destination),void 0===s.start?s.noteOn(0):s.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),s.onended=function(){s.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||n;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new t,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var t=this;return n.ctx||c(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=n.usingWebAudio&&!t._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(n.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var i,a;if(e._format&&e._format[r])i=e._format[r];else{if("string"!=typeof(a=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(a))||(i=/\.([^.]+)$/.exec(a.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&n.codecs(i)){t=e._src[r];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&l(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var r=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(void 0===e&&(e="__default",!r._playLock)){for(var i=0,l=0;l<r._sounds.length;l++)r._sounds[l]._paused&&!r._sounds[l]._ended&&(i++,o=r._sounds[l]._id);1===i?e=null:o=null}}var a=o?r._soundById(o):r._inactiveSound();if(!a)return null;if(o&&!e&&(e=a._sprite||"__default"),"loaded"!==r._state){a._sprite=e,a._ended=!1;var s=a._id;return r._queue.push({event:"play",action:function(){r.play(s)}}),s}if(o&&!a._paused)return t||r._loadQueue("play"),a._id;r._webAudio&&n._autoResume();var u=Math.max(0,a._seek>0?a._seek:r._sprite[e][0]/1e3),c=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(a._rate),p=r._sprite[e][0]/1e3,f=(r._sprite[e][0]+r._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var m=function(){a._paused=!1,a._seek=u,a._start=p,a._stop=f,a._loop=!(!a._loop&&!r._sprite[e][2])};if(!(u>=f)){var h=a._node;if(r._webAudio){var g=function(){r._playLock=!1,m(),r._refreshBuffer(a);var e=a._muted||r._muted?0:a._volume;h.gain.setValueAtTime(e,n.ctx.currentTime),a._playStart=n.ctx.currentTime,void 0===h.bufferSource.start?a._loop?h.bufferSource.noteGrainOn(0,u,86400):h.bufferSource.noteGrainOn(0,u,c):a._loop?h.bufferSource.start(0,u,86400):h.bufferSource.start(0,u,c),d!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),d)),t||setTimeout(function(){r._emit("play",a._id),r._loadQueue()},0)};"running"===n.state&&"interrupted"!==n.ctx.state?g():(r._playLock=!0,r.once("resume",g),r._clearTimer(a._id))}else{var v=function(){h.currentTime=u,h.muted=a._muted||r._muted||n._muted||h.muted,h.volume=a._volume*n.volume(),h.playbackRate=a._rate;try{var o=h.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(r._playLock=!0,m(),o.then(function(){r._playLock=!1,h._unlocked=!0,t?r._loadQueue():r._emit("play",a._id)}).catch(function(){r._playLock=!1,r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):t||(r._playLock=!1,m(),r._emit("play",a._id)),h.playbackRate=a._rate,h.paused)return void r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),d):(r._endTimers[a._id]=function(){r._ended(a),h.removeEventListener("ended",r._endTimers[a._id],!1)},h.addEventListener("ended",r._endTimers[a._id],!1))}catch(i){r._emit("playerror",a._id,i)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===h.src&&(h.src=r._src,h.load());var y=window&&window.ejecta||!h.readyState&&n._navigator.isCocoonJS;if(h.readyState>=3||y)v();else{r._playLock=!0,r._state="loading";var _=function(){r._state="loaded",v(),h.removeEventListener(n._canPlayEvent,_,!1)};h.addEventListener(n._canPlayEvent,_,!1),r._clearTimer(a._id)}}return a._id}r._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(void 0===t){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var o=r._getSoundIds(t),i=0;i<o.length;i++){var l=r._soundById(o[i]);l&&(l._muted=e,l._interval&&r._stopFade(l._id),r._webAudio&&l._node?l._node.gain.setValueAtTime(e?0:l._volume,n.ctx.currentTime):l._node&&(l._node.muted=!!n._muted||e),r._emit("mute",l._id))}return r},volume:function(){var e,t,r,o=this,i=arguments;if(0===i.length)return o._volume;if(1===i.length||2===i.length&&void 0===i[1]?o._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),!(void 0!==e&&e>=0&&e<=1))return(r=t?o._soundById(t):o._sounds[0])?r._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,i)}}),o;void 0===t&&(o._volume=e),t=o._getSoundIds(t);for(var l=0;l<t.length;l++)(r=o._soundById(t[l]))&&(r._volume=e,i[2]||o._stopFade(t[l]),o._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,n.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*n.volume()),o._emit("volume",r._id));return o},fade:function(e,t,r,o){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,r,o)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),r=parseFloat(r),i.volume(e,o);for(var l=i._getSoundIds(o),a=0;a<l.length;a++){var s=i._soundById(l[a]);if(s){if(o||i._stopFade(l[a]),i._webAudio&&!s._muted){var u=n.ctx.currentTime,c=u+r/1e3;s._volume=e,s._node.gain.setValueAtTime(e,u),s._node.gain.linearRampToValueAtTime(t,c)}i._startFadeInterval(s,e,t,r,l[a],void 0===o)}}return i},_startFadeInterval:function(e,t,n,r,o,i){var l=this,a=t,s=n-t,u=Math.abs(s/.01),c=Math.max(4,u>0?r/u:r),d=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var o=(Date.now()-d)/r;d=Date.now(),a+=s*o,a=Math.round(100*a)/100,a=s<0?Math.max(n,a):Math.min(n,a),l._webAudio?e._volume=a:l.volume(a,e._id,!0),i&&(l._volume=a),(n<t&&a<=n||n>t&&a>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,l.volume(n,e._id),l._emit("fade",e._id))},c)},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(r._interval),r._interval=null,t.volume(r._fadeTo,e),r._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],r._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var i=r._getSoundIds(t),l=0;l<i.length;l++)(n=r._soundById(i[l]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(i[l])&&(r.pause(i[l],!0),r.play(i[l],!0)))));return r},rate:function(){var e,t,r,o=this,i=arguments;if(0===i.length?t=o._sounds[0]._id:1===i.length?o._getSoundIds().indexOf(i[0])>=0?t=parseInt(i[0],10):e=parseFloat(i[0]):2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10)),"number"!=typeof e)return(r=o._soundById(t))?r._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,i)}}),o;void 0===t&&(o._rate=e),t=o._getSoundIds(t);for(var l=0;l<t.length;l++)if(r=o._soundById(t[l])){o.playing(t[l])&&(r._rateSeek=o.seek(t[l]),r._playStart=o._webAudio?n.ctx.currentTime:r._playStart),r._rate=e,o._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):r._node&&(r._node.playbackRate=e);var a=o.seek(t[l]),s=1e3*((o._sprite[r._sprite][0]+o._sprite[r._sprite][1])/1e3-a)/Math.abs(r._rate);!o._endTimers[t[l]]&&r._paused||(o._clearTimer(t[l]),o._endTimers[t[l]]=setTimeout(o._ended.bind(o,r),s)),o._emit("rate",r._id)}return o},seek:function(){var e,t,r=this,o=arguments;if(0===o.length?r._sounds.length&&(t=r._sounds[0]._id):1===o.length?r._getSoundIds().indexOf(o[0])>=0?t=parseInt(o[0],10):r._sounds.length&&(t=r._sounds[0]._id,e=parseFloat(o[0])):2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10)),void 0===t)return 0;if("number"==typeof e&&("loaded"!==r._state||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,o)}}),r;var i=r._soundById(t);if(i){if(!("number"==typeof e&&e>=0)){if(r._webAudio){var l=r.playing(t)?n.ctx.currentTime-i._playStart:0,a=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(a+l*Math.abs(i._rate))}return i._node.currentTime}var s=r.playing(t);s&&r.pause(t,!0),i._seek=e,i._ended=!1,r._clearTimer(t),r._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var u=function(){s&&r.play(t,!0),r._emit("seek",t)};if(s&&!r._webAudio){var c=function(){r._playLock?setTimeout(c,0):u()};setTimeout(c,0)}else u()}return r},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++)t[r]._paused||e.stop(t[r]._id),e._webAudio||(e._clearSound(t[r]._node),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(n._canPlayEvent,t[r]._loadFn,!1),t[r]._node.removeEventListener("ended",t[r]._endFn,!1),n._releaseHtml5Audio(t[r]._node)),delete t[r]._node,e._clearTimer(t[r]._id);var o=n._howls.indexOf(e);o>=0&&n._howls.splice(o,1);var l=!0;for(r=0;r<n._howls.length;r++)if(n._howls[r]._src===e._src||e._src.indexOf(n._howls[r]._src)>=0){l=!1;break}return i&&l&&delete i[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var o=this["_on"+e];return"function"==typeof t&&o.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this,o=r["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<o.length;i++){var l=n===o[i].id;if(t===o[i].fn&&l||!t&&l){o.splice(i,1);break}}else if(e)r["_on"+e]=[];else{var a=Object.keys(r);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(r[a[i]])&&(r[a[i]]=[])}return r},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this,o=r["_on"+e],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(e,o[i].fn,o[i].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var o=!(!e._loop&&!t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),i)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),n._autoSuspend()),t._webAudio||o||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new o(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=i[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),this},_cleanBuffer:function(e){var t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch(r){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=n._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(r,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=r*n.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var i={},l=function(e){var t=e._src;if(i[t])return e._duration=i[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);s(r.buffer,e)}else{var l=new XMLHttpRequest;l.open(e._xhr.method,t,!0),l.withCredentials=e._xhr.withCredentials,l.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){l.setRequestHeader(t,e._xhr.headers[t])}),l.onload=function(){var t=(l.status+"")[0];"0"===t||"2"===t||"3"===t?s(l.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+l.status+".")},l.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete i[t],e.load())},a(l)}},a=function(e){try{e.send()}catch(t){e.onerror()}},s=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},o=function(e){e&&t._sounds.length>0?(i[t._src]=e,u(t,e)):r()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(o).catch(r):n.ctx.decodeAudioData(e,o,r)},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(i){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),t=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var o=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!o&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};he.Howler=n,he.Howl=r,void 0!==e?(e.HowlerGlobal=t,e.Howler=n,e.Howl=r,e.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=t,window.Howler=n,window.Howl=r,window.Sound=o)}(),
/*!
     *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
     *  
     *  howler.js v2.2.4
     *  howlerjs.com
     *
     *  (c) 2013-2020, James Simpson of GoldFire Studios
     *  goldfirestudios.com
     *
     *  MIT License
     */
function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,o,i){var l=this;if(!l.ctx||!l.ctx.listener)return l;var a=l._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,o="number"!=typeof o?a[4]:o,i="number"!=typeof i?a[5]:i,"number"!=typeof e?a:(l._orientation=[e,t,n,r,o,i],void 0!==l.ctx.listener.forwardX?(l.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(e,t,n,r,o,i),l)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var i=r._getSoundIds(n),l=0;l<i.length;l++){var a=r._soundById(i[l]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,o),"spatial"===o?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof t)return i._pos;i._pos=[t,n,r]}for(var l=i._getSoundIds(o),a=0;a<l.length;a++){var s=i._soundById(l[a]);if(s){if("number"!=typeof t)return s._pos;s._pos=[t,n,r],s._node&&(s._panner&&!s._panner.pan||e(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setPosition(t,n,r)),i._emit("pos",s._id)}}return i},Howl.prototype.orientation=function(t,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof t)return i._orientation;i._orientation=[t,n,r]}for(var l=i._getSoundIds(o),a=0;a<l.length;a++){var s=i._soundById(l[a]);if(s){if("number"!=typeof t)return s._orientation;s._orientation=[t,n,r],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),e(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):s._panner.setOrientation(t,n,r)),i._emit("orientation",s._id)}}return i},Howl.prototype.pannerAttr=function(){var t,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=o._soundById(parseInt(i[0],10)))?r._pannerAttr:o._pannerAttr;t=i[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(t=i[0],n=parseInt(i[1],10));for(var l=o._getSoundIds(n),a=0;a<l.length;a++)if(r=o._soundById(l[a])){var s=r._pannerAttr;s={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:s.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:s.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:s.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:s.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:s.panningModel};var u=r._panner;u||(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"),u=r._panner),u.coneInnerAngle=s.coneInnerAngle,u.coneOuterAngle=s.coneOuterAngle,u.coneOuterGain=s.coneOuterGain,u.distanceModel=s.distanceModel,u.maxDistance=s.maxDistance,u.refDistance=s.refDistance,u.rolloffFactor=s.rolloffFactor,u.panningModel=s.panningModel}return o},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()),me);const ve=({text:e})=>s.jsx("div",{className:"prose prose-invert prose-lg font-serif leading-relaxed text-stone-200 drop-shadow-md bg-black/40 p-6 rounded-lg border border-white/5 mb-6",children:e.split("\n").map((e,t)=>s.jsx("p",{className:"mb-4 last:mb-0",children:e},t))}),ye=({speaker:e,text:t,portrait:n})=>{const r=(e=>{let t=null;for(const[n,r]of Object.entries(ce))if(r.some(t=>e.includes(t))){t=n;break}switch(t||(e.includes("")?t=N.LANNISTER:e.includes("")?t=N.STARK:e.includes("")?t=N.TARGARYEN:e.includes("")?t=N.BARATHEON:e.includes("")?t=N.GREYJOY:e.includes("")&&(t=N.TYRELL)),t){case N.STARK:return"bg-slate-800 border-slate-400 text-slate-200 shadow-[0_0_10px_rgba(148,163,184,0.3)]";case N.LANNISTER:return"bg-red-950 border-red-500 text-red-100 shadow-[0_0_10px_rgba(239,68,68,0.3)]";case N.TARGARYEN:return"bg-stone-950 border-rose-600 text-rose-500 shadow-[0_0_10px_rgba(225,29,72,0.3)]";case N.BARATHEON:return"bg-yellow-950 border-yellow-500 text-yellow-100 shadow-[0_0_10px_rgba(234,179,8,0.3)]";case N.GREYJOY:return"bg-cyan-950 border-cyan-600 text-cyan-100 shadow-[0_0_10px_rgba(8,145,178,0.3)]";case N.TYRELL:return"bg-green-950 border-green-500 text-green-100 shadow-[0_0_10px_rgba(34,197,94,0.3)]";default:return"bg-stone-800 border-game-gold text-game-gold shadow-none"}})(e),o=e.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase();return s.jsx("div",{className:"relative mb-8 pl-0 md:pl-0 animate-[fadeIn_0.3s_ease-out]",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[s.jsxs("div",{className:"flex-shrink-0 flex md:flex-col items-center gap-3 md:w-24 md:pt-2",children:[s.jsx("div",{className:`w-14 h-14 md:w-16 md:h-16 rounded-full border-2 flex items-center justify-center font-display font-bold text-xl select-none overflow-hidden relative ${r}`,children:n?s.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover animate-[fadeIn_0.5s]"}):s.jsx("span",{children:o})}),s.jsx("span",{className:"font-display uppercase tracking-wider text-[10px] md:text-xs text-center text-stone-400 max-w-[100px] leading-tight",children:e})]}),s.jsxs("div",{className:"flex-1 bg-black/80 border-l-4 border-game-gold p-6 rounded-r-lg shadow-lg backdrop-blur-sm relative mt-2 md:mt-0",children:[s.jsx("div",{className:"absolute -top-3 -left-3 bg-game-dark text-game-gold p-1 rounded-full border border-game-gold z-10",children:s.jsx(J,{size:16})}),s.jsxs("p",{className:"font-serif italic text-xl text-white/90 leading-relaxed",children:['"',t,'"']})]})]})})},_e=({text:e})=>s.jsx("div",{className:"flex justify-end mb-6 opacity-75",children:s.jsx("div",{className:"bg-stone-800/60 text-stone-300 px-6 py-3 rounded-tl-2xl rounded-br-2xl border border-stone-600 font-display text-sm tracking-wide italic",children:e})}),be=({gameState:e,onOptionSelect:t,onRestart:n,onSave:r,onExit:o,onPlayAgain:i})=>{const l=f.useRef(null),a=f.useRef(null),[u,c]=f.useState("idle"),[d,p]=f.useState(!1),[h,g]=f.useState(!1),[v,y]=f.useState(!1),[_,b]=f.useState(!1),{character:E,currentScene:S,sceneImage:w,history:T,turnCount:A,maxTurns:C,currentAct:I,npcPortraits:x}=e,k=f.useRef(null),O=f.useRef(null),N=f.useRef(E?E.health:100),P=f.useRef(I),M=f.useRef(0),D=!!E&&(E.health<=0||(null==S?void 0:S.is_game_over));f.useEffect(()=>(k.current={click:new ge.Howl({src:[ie],volume:.4}),damage:new ge.Howl({src:[le],volume:.6}),gameOver:new ge.Howl({src:[ae],volume:.8}),victory:new ge.Howl({src:[se],volume:.6})},O.current=new ge.Howl({src:["https://assets.mixkit.co/music/preview/mixkit-medieval-battle-underscore-start-257.mp3"],html5:!0,loop:!0,volume:.3,autoplay:!1}),h||O.current.play(),()=>{var e,t,n,r,o;null==(e=k.current)||e.click.unload(),null==(t=k.current)||t.damage.unload(),null==(n=k.current)||n.gameOver.unload(),null==(r=k.current)||r.victory.unload(),null==(o=O.current)||o.unload()}),[]),f.useEffect(()=>{k.current&&Object.values(k.current).forEach(e=>e.mute(d))},[d]),f.useEffect(()=>{O.current&&(h?O.current.pause():O.current.playing()||(O.current.play(),O.current.fade(0,.3,2e3)))},[h]),f.useEffect(()=>{a.current&&a.current.scrollIntoView({behavior:"smooth"})},[T.length]),f.useEffect(()=>{E&&k.current&&(E.health<N.current&&(k.current.damage.play(),y(!0),setTimeout(()=>y(!1),500)),N.current=E.health)},[null==E?void 0:E.health]),f.useEffect(()=>{var e;S&&k.current&&S.is_game_over&&(null==(e=O.current)||e.fade(.3,0,2e3),setTimeout(()=>{var e,t;E&&E.health<=0?null==(e=k.current)||e.gameOver.play():null==(t=k.current)||t.victory.play(),b(!0)},1e3))},[null==S?void 0:S.is_game_over]),f.useEffect(()=>{const e=A>1&&A%5==0,t=I!==P.current;(e||t)&&A!==M.current&&(r(),c("saved"),setTimeout(()=>c("idle"),2e3),M.current=A),P.current=I},[A,I,r]);const L=()=>{var e;null==(e=k.current)||e.click.play()};if(!E||!S)return null;const U=A/C*100;return s.jsxs("div",{className:"min-h-screen bg-game-dark text-game-paper flex flex-col md:flex-row",children:[s.jsx("style",{children:"\n        @keyframes shake {\n          0%, 100% { transform: translateX(0); }\n          20%, 60% { transform: translateX(-4px); }\n          40%, 80% { transform: translateX(4px); }\n        }\n        @keyframes fadeInUp {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes slowZoom {\n          from { transform: scale(1); }\n          to { transform: scale(1.05); }\n        }\n      "}),s.jsxs("aside",{className:"w-full md:w-80 border-r p-6 flex flex-col shrink-0 z-30 shadow-xl h-auto md:h-screen transition-colors duration-200 "+(v?"bg-red-950/30 border-red-600":"bg-stone-900 border-game-iron"),style:{animation:v?"shake 0.4s cubic-bezier(.36,.07,.19,.97) both":"none"},children:[s.jsxs("div",{className:"mb-6 text-center",children:[s.jsx("h2",{className:"font-display text-2xl "+(v?"text-red-500":"text-game-gold"),children:E.name}),s.jsxs("p",{className:"text-stone-400 font-serif",children:[" ",E.house]})]}),s.jsxs("div",{className:"mb-8 bg-black/30 p-3 rounded border border-stone-700",children:[s.jsxs("div",{className:"flex justify-between text-xs font-display text-stone-400 mb-1",children:[s.jsx("span",{children:I}),s.jsxs("span",{children:[" ",A,"/",C]})]}),s.jsx("div",{className:"w-full bg-stone-800 h-1.5 rounded-full overflow-hidden",children:s.jsx("div",{className:"bg-game-gold h-full",style:{width:`${U}%`}})})]}),s.jsxs("div",{className:"space-y-6 mb-auto",children:[s.jsxs("div",{className:"p-4 rounded border transition-all duration-200 "+(v?"bg-red-900/40 border-red-500 scale-105":"bg-black/40 border-stone-700"),children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"flex items-center gap-2 font-display text-sm",children:[s.jsx(V,{className:""+(v?"text-red-400 animate-pulse":"text-red-600"),size:18})," '"]}),s.jsxs("span",{className:"font-bold "+(v?"text-red-400":""),children:[E.health,"%"]})]}),s.jsx("div",{className:"w-full bg-stone-800 h-2 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full transition-all duration-500 "+(v?"bg-red-500":"bg-red-700"),style:{width:`${Math.max(0,E.health)}%`}})})]}),s.jsxs("div",{className:"bg-black/40 p-4 rounded border border-stone-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"flex items-center gap-2 font-display text-sm",children:[s.jsx(z,{className:"text-yellow-500",size:18})," "]}),s.jsxs("span",{className:"font-bold",children:[E.influence,"%"]})]}),s.jsx("div",{className:"w-full bg-stone-800 h-2 rounded-full overflow-hidden",children:s.jsx("div",{className:"bg-yellow-600 h-full transition-all duration-500",style:{width:`${Math.max(0,E.influence)}%`}})})]})]}),s.jsxs("div",{className:"mt-8 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[s.jsxs("button",{onClick:()=>g(!h),className:"flex items-center justify-center gap-2 py-2 transition-colors border rounded border-stone-700 "+(h?"text-stone-600 bg-stone-900":"text-game-gold bg-stone-800"),title:"",children:[h?s.jsx(ne,{size:18}):s.jsx(Y,{size:18}),s.jsx("span",{className:"text-xs uppercase tracking-widest hidden lg:inline",children:""})]}),s.jsxs("button",{onClick:()=>p(!d),className:"flex items-center justify-center gap-2 py-2 transition-colors border rounded border-stone-700 "+(d?"text-stone-600 bg-stone-900":"text-stone-300 bg-stone-800"),title:" ",children:[d?s.jsx(ne,{size:18}):s.jsx(te,{size:18}),s.jsx("span",{className:"text-xs uppercase tracking-widest hidden lg:inline",children:"SFX"})]})]}),!D&&s.jsxs(R,{onClick:()=>{L(),r(),c("saved"),setTimeout(()=>c("idle"),2e3)},variant:"outline",fullWidth:!0,disabled:"saved"===u,className:"flex items-center justify-center gap-2",children:["saved"===u?s.jsx(H,{size:18}):s.jsx(W,{size:18}),"saved"===u?"!":""]}),s.jsxs(R,{onClick:o,variant:"secondary",fullWidth:!0,className:"flex items-center justify-center gap-2 text-stone-400 border-stone-700 hover:text-white",children:[s.jsx($,{size:18})," "]})]})]}),s.jsxs("main",{className:"flex-1 flex flex-col h-[calc(100vh-theme(spacing.80))] md:h-screen overflow-hidden relative",children:[s.jsxs("div",{className:"absolute inset-0 z-0 bg-black",children:[w?s.jsx("img",{src:w,alt:"Scene",className:"w-full h-full object-cover opacity-40 transition-opacity duration-1000"}):s.jsx("div",{className:"w-full h-full bg-stone-900 opacity-40"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-game-dark via-game-dark/90 to-transparent"})]}),s.jsxs("div",{className:"md:hidden absolute top-0 left-0 right-0 z-40 p-4 flex justify-between items-center bg-gradient-to-b from-black to-transparent",children:[s.jsx("div",{className:"text-game-gold font-display text-sm",children:I}),s.jsxs("div",{className:"text-stone-400 text-xs",children:[" ",A,"/",C]})]}),s.jsx("div",{ref:l,className:"relative z-10 flex-1 overflow-y-auto p-6 md:p-12 scrollbar-hide pb-40 pt-12 md:pt-12",children:s.jsxs("div",{className:"max-w-3xl mx-auto w-full",children:[T.map((e,t)=>s.jsxs(m.Fragment,{children:["narrative"===e.type&&s.jsx(ve,{text:e.text}),"dialogue"===e.type&&e.speaker&&s.jsx(ye,{speaker:e.speaker,text:e.text,portrait:x[e.speaker]}),"choice"===e.type&&s.jsx(_e,{text:e.text})]},t)),s.jsx("div",{ref:a})]})}),!D&&s.jsx("div",{className:"relative z-20 bg-black/90 border-t border-game-gold/30 backdrop-blur-md p-6 shadow-[0_-10px_40px_rgba(0,0,0,0.8)]",children:s.jsx("div",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-4",children:S.options.map(e=>s.jsx(R,{onClick:()=>{L(),r(),t(e.id,e.text)},variant:e.text.toLowerCase().includes("")||e.text.toLowerCase().includes("")?"danger":"secondary",className:"text-left h-auto py-4 normal-case hover:translate-y-[-2px] transition-transform",children:e.text},e.id))})})]}),_&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 animate-[fadeIn_1s_ease-in]",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')]"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b "+(E.health>0?"from-yellow-900/20 via-black to-yellow-900/10":"from-red-900/20 via-black to-red-900/10")})]}),s.jsxs("div",{className:"relative z-10 max-w-2xl w-full p-8 text-center",children:[s.jsxs("div",{className:"mb-8 animate-[fadeInUp_0.8s_ease-out_0.2s_both]",children:[E.health>0?s.jsx(Z,{className:"mx-auto text-yellow-500 mb-4 drop-shadow-[0_0_15px_rgba(234,179,8,0.5)]",size:80}):s.jsx(Q,{className:"mx-auto text-red-600 mb-4 drop-shadow-[0_0_15px_rgba(220,38,38,0.5)]",size:80}),s.jsx("h1",{className:"text-5xl md:text-7xl font-display uppercase tracking-widest mb-2 "+(E.health>0?"text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-700":"text-red-600"),children:E.health>0?"":"Valar Morghulis"}),s.jsx("h2",{className:"text-2xl font-serif text-stone-400 uppercase tracking-wide border-b border-white/10 pb-4 inline-block",children:E.health>0?"":"  "})]}),s.jsx("div",{className:"mb-10 animate-[fadeInUp_0.8s_ease-out_0.5s_both]",children:s.jsxs("p",{className:"text-xl md:text-2xl font-serif italic text-stone-200 leading-relaxed drop-shadow-md",children:['"',S.game_over_reason,'"']})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-10 animate-[fadeInUp_0.8s_ease-out_0.8s_both]",children:[s.jsxs("div",{className:"bg-white/5 p-4 rounded border border-white/10",children:[s.jsx("div",{className:"text-stone-400 text-xs uppercase tracking-widest mb-1",children:""}),s.jsx("div",{className:"font-display text-xl "+(E.health>0?"text-game-gold":"text-stone-300"),children:E.house})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded border border-white/10",children:[s.jsx("div",{className:"text-stone-400 text-xs uppercase tracking-widest mb-1",children:""}),s.jsxs("div",{className:"font-display text-xl text-yellow-500",children:[E.influence,"%"]})]}),s.jsxs("div",{className:"bg-white/5 p-4 rounded border border-white/10",children:[s.jsx("div",{className:"text-stone-400 text-xs uppercase tracking-widest mb-1",children:""}),s.jsxs("div",{className:"font-display text-xl text-stone-300",children:[A," ."]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-[fadeInUp_0.8s_ease-out_1.1s_both]",children:[s.jsx(R,{onClick:i,variant:"primary",className:"px-8 py-4 text-lg shadow-[0_0_20px_rgba(197,160,89,0.2)]",children:" "}),s.jsx(R,{onClick:o,variant:"secondary",className:"px-8 py-4 text-lg",children:" "})]})]})]})]})},Ee=({message:e="  ..."})=>s.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center text-game-gold",children:[s.jsxs("div",{className:"relative",children:[s.jsx(B,{className:"w-16 h-16 animate-spin mb-4"}),s.jsx("div",{className:"absolute inset-0 animate-pulse bg-game-gold/20 blur-xl rounded-full"})]}),s.jsx("p",{className:"font-display text-xl tracking-widest animate-pulse",children:e})]});
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
let Se,we;function Te(e,t,n,r){var o,i;if(!(null==e?void 0:e.baseUrl)){const e={geminiUrl:Se,vertexUrl:we};return t?null!==(o=e.vertexUrl)&&void 0!==o?o:n:null!==(i=e.geminiUrl)&&void 0!==i?i:r}return e.baseUrl}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ae{}function Ce(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){const e=t[n];return null!=e?String(e):""}throw new Error(`Key '${n}' not found in valueMap.`)})}function Ie(e,t,n){for(let i=0;i<t.length-1;i++){const r=t[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(!(o in e)){if(!Array.isArray(n))throw new Error(`Value must be a list given an array path ${r}`);e[o]=Array.from({length:n.length},()=>({}))}if(Array.isArray(e[o])){const r=e[o];if(Array.isArray(n))for(let e=0;e<r.length;e++){Ie(r[e],t.slice(i+1),n[e])}else for(const e of r)Ie(e,t.slice(i+1),n)}return}if(r.endsWith("[0]")){const o=r.slice(0,-3);o in e||(e[o]=[{}]);return void Ie(e[o][0],t.slice(i+1),n)}e[r]&&"object"==typeof e[r]||(e[r]={}),e=e[r]}const r=t[t.length-1],o=e[r];if(void 0!==o){if(!n||"object"==typeof n&&0===Object.keys(n).length)return;if(n===o)return;if("object"!=typeof o||"object"!=typeof n||null===o||null===n)throw new Error(`Cannot set value for an existing key. Key: ${r}`);Object.assign(o,n)}else if("_self"!==r||"object"!=typeof n||null===n||Array.isArray(n))e[r]=n;else{const t=n;Object.assign(e,t)}}function xe(e,t,n=void 0){try{if(1===t.length&&"_self"===t[0])return e;for(let r=0;r<t.length;r++){if("object"!=typeof e||null===e)return n;const o=t[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in e){const o=e[i];return Array.isArray(o)?o.map(e=>xe(e,t.slice(r+1),n)):n}return n}e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function ke(e,t,n,r,o){if(r>=t.length)return;if("object"!=typeof e||null===e)return;const i=t[r];if(i.endsWith("[]")){const l=i.slice(0,-2),a=e;if(l in a&&Array.isArray(a[l]))for(const e of a[l])ke(e,t,n,r+1,o)}else if("*"===i){if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=e,i=Object.keys(t).filter(e=>!e.startsWith("_")&&!o.has(e)),l={};for(const e of i)l[e]=t[e];for(const[e,o]of Object.entries(l)){const i=[];for(const t of n.slice(r))"*"===t?i.push(e):i.push(t);Ie(t,i,o)}for(const e of i)delete t[e]}}else{i in e&&ke(e[i],t,n,r+1,o)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oe(e){if("string"!=typeof e)throw new Error("fromImageBytes must be a string");return e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ne(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata"]);null!=r&&Ie(t,["metadata"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["response","generateVideoResponse"]);return null!=l&&Ie(t,["response"],function(e){const t={},n=xe(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["video"]);null!=n&&Ie(t,["video"],function(e){const t={},n=xe(e,["uri"]);null!=n&&Ie(t,["uri"],n);const r=xe(e,["encodedVideo"]);null!=r&&Ie(t,["videoBytes"],Oe(r));const o=xe(e,["encoding"]);null!=o&&Ie(t,["mimeType"],o);return t}(n));return t}(e))),Ie(t,["generatedVideos"],e)}const r=xe(e,["raiMediaFilteredCount"]);null!=r&&Ie(t,["raiMediaFilteredCount"],r);const o=xe(e,["raiMediaFilteredReasons"]);null!=o&&Ie(t,["raiMediaFilteredReasons"],o);return t}(l)),t}function Pe(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata"]);null!=r&&Ie(t,["metadata"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["response"]);return null!=l&&Ie(t,["response"],function(e){const t={},n=xe(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["_self"]);null!=n&&Ie(t,["video"],function(e){const t={},n=xe(e,["gcsUri"]);null!=n&&Ie(t,["uri"],n);const r=xe(e,["bytesBase64Encoded"]);null!=r&&Ie(t,["videoBytes"],Oe(r));const o=xe(e,["mimeType"]);null!=o&&Ie(t,["mimeType"],o);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(n));return t}(e))),Ie(t,["generatedVideos"],e)}const r=xe(e,["raiMediaFilteredCount"]);null!=r&&Ie(t,["raiMediaFilteredCount"],r);const o=xe(e,["raiMediaFilteredReasons"]);null!=o&&Ie(t,["raiMediaFilteredReasons"],o);return t}(l)),t}function Re(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata"]);null!=r&&Ie(t,["metadata"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["response"]);return null!=l&&Ie(t,["response"],function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["parent"]);null!=r&&Ie(t,["parent"],r);const o=xe(e,["documentName"]);null!=o&&Ie(t,["documentName"],o);return t}(l)),t}function Me(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata"]);null!=r&&Ie(t,["metadata"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["response"]);return null!=l&&Ie(t,["response"],function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["parent"]);null!=r&&Ie(t,["parent"],r);const o=xe(e,["documentName"]);null!=o&&Ie(t,["documentName"],o);return t}(l)),t}var De,Le,Ue,je,Fe,He,qe,Ge,ze,Ve,Be,$e,Je,Ye,We,Ke,Qe,Xe,Ze,et,tt,nt,rt,ot,it,lt,at,st,ut,ct,dt,pt,ft,mt,ht,gt,vt,yt,_t,bt,Et,St,wt,Tt,At,Ct,It,xt,kt,Ot,Nt,Pt,Rt,Mt,Dt,Lt,Ut,jt,Ft,Ht,qt,Gt,zt,Vt,Bt,$t,Jt,Yt,Wt,Kt,Qt,Xt,Zt,en,tn,nn,rn,on,ln,an,sn,un,cn,dn,pn,fn,mn,hn,gn,vn,yn,_n,bn,En,Sn,wn,Tn,An,Cn,In,xn,kn,On,Nn,Pn,Rn,Mn,Dn,Ln,Un,jn,Fn;(Le=De||(De={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",Le.OUTCOME_OK="OUTCOME_OK",Le.OUTCOME_FAILED="OUTCOME_FAILED",Le.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(je=Ue||(Ue={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",je.PYTHON="PYTHON",(He=Fe||(Fe={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",He.SILENT="SILENT",He.WHEN_IDLE="WHEN_IDLE",He.INTERRUPT="INTERRUPT",(Ge=qe||(qe={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",Ge.STRING="STRING",Ge.NUMBER="NUMBER",Ge.INTEGER="INTEGER",Ge.BOOLEAN="BOOLEAN",Ge.ARRAY="ARRAY",Ge.OBJECT="OBJECT",Ge.NULL="NULL",(Ve=ze||(ze={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Ve.MODE_DYNAMIC="MODE_DYNAMIC",($e=Be||(Be={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",$e.SIMPLE_SEARCH="SIMPLE_SEARCH",$e.ELASTIC_SEARCH="ELASTIC_SEARCH",(Ye=Je||(Je={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",Ye.NO_AUTH="NO_AUTH",Ye.API_KEY_AUTH="API_KEY_AUTH",Ye.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",Ye.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",Ye.OAUTH="OAUTH",Ye.OIDC_AUTH="OIDC_AUTH",(Ke=We||(We={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",Ke.HTTP_IN_QUERY="HTTP_IN_QUERY",Ke.HTTP_IN_HEADER="HTTP_IN_HEADER",Ke.HTTP_IN_PATH="HTTP_IN_PATH",Ke.HTTP_IN_BODY="HTTP_IN_BODY",Ke.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(Xe=Qe||(Qe={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",Xe.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Xe.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Xe.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",Xe.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",Xe.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",Xe.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(et=Ze||(Ze={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",et.LOW="LOW",et.HIGH="HIGH",(nt=tt||(tt={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",nt.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",nt.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",nt.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",nt.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",nt.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",nt.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",nt.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",nt.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",nt.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",nt.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(ot=rt||(rt={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",ot.SEVERITY="SEVERITY",ot.PROBABILITY="PROBABILITY",(lt=it||(it={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",lt.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",lt.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",lt.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",lt.BLOCK_NONE="BLOCK_NONE",lt.OFF="OFF",(st=at||(at={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",st.STOP="STOP",st.MAX_TOKENS="MAX_TOKENS",st.SAFETY="SAFETY",st.RECITATION="RECITATION",st.LANGUAGE="LANGUAGE",st.OTHER="OTHER",st.BLOCKLIST="BLOCKLIST",st.PROHIBITED_CONTENT="PROHIBITED_CONTENT",st.SPII="SPII",st.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",st.IMAGE_SAFETY="IMAGE_SAFETY",st.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",st.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",st.NO_IMAGE="NO_IMAGE",(ct=ut||(ut={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",ct.NEGLIGIBLE="NEGLIGIBLE",ct.LOW="LOW",ct.MEDIUM="MEDIUM",ct.HIGH="HIGH",(pt=dt||(dt={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",pt.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",pt.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",pt.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",pt.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(mt=ft||(ft={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",mt.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",mt.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",mt.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",mt.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(gt=ht||(ht={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",gt.SAFETY="SAFETY",gt.OTHER="OTHER",gt.BLOCKLIST="BLOCKLIST",gt.PROHIBITED_CONTENT="PROHIBITED_CONTENT",gt.IMAGE_SAFETY="IMAGE_SAFETY",gt.MODEL_ARMOR="MODEL_ARMOR",gt.JAILBREAK="JAILBREAK",(yt=vt||(vt={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",yt.ON_DEMAND="ON_DEMAND",yt.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(bt=_t||(_t={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",bt.TEXT="TEXT",bt.IMAGE="IMAGE",bt.AUDIO="AUDIO",(St=Et||(Et={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",St.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",St.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",St.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(Tt=wt||(wt={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",Tt.TUNING_MODE_FULL="TUNING_MODE_FULL",Tt.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(Ct=At||(At={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",Ct.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",Ct.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",Ct.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",Ct.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",Ct.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",Ct.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(xt=It||(It={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",xt.JOB_STATE_QUEUED="JOB_STATE_QUEUED",xt.JOB_STATE_PENDING="JOB_STATE_PENDING",xt.JOB_STATE_RUNNING="JOB_STATE_RUNNING",xt.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",xt.JOB_STATE_FAILED="JOB_STATE_FAILED",xt.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",xt.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",xt.JOB_STATE_PAUSED="JOB_STATE_PAUSED",xt.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",xt.JOB_STATE_UPDATING="JOB_STATE_UPDATING",xt.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(Ot=kt||(kt={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",Ot.TUNING_TASK_I2V="TUNING_TASK_I2V",Ot.TUNING_TASK_T2V="TUNING_TASK_T2V",Ot.TUNING_TASK_R2V="TUNING_TASK_R2V",(Pt=Nt||(Nt={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",Pt.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",Pt.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",Pt.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(Mt=Rt||(Rt={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",Mt.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",Mt.BALANCED="BALANCED",Mt.PRIORITIZE_COST="PRIORITIZE_COST",(Lt=Dt||(Dt={})).UNSPECIFIED="UNSPECIFIED",Lt.BLOCKING="BLOCKING",Lt.NON_BLOCKING="NON_BLOCKING",(jt=Ut||(Ut={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",jt.MODE_DYNAMIC="MODE_DYNAMIC",(Ht=Ft||(Ft={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",Ht.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(Gt=qt||(qt={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",Gt.AUTO="AUTO",Gt.ANY="ANY",Gt.NONE="NONE",Gt.VALIDATED="VALIDATED",(Vt=zt||(zt={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",Vt.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",Vt.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",Vt.BLOCK_NONE="BLOCK_NONE",($t=Bt||(Bt={})).DONT_ALLOW="DONT_ALLOW",$t.ALLOW_ADULT="ALLOW_ADULT",$t.ALLOW_ALL="ALLOW_ALL",(Yt=Jt||(Jt={})).auto="auto",Yt.en="en",Yt.ja="ja",Yt.ko="ko",Yt.hi="hi",Yt.zh="zh",Yt.pt="pt",Yt.es="es",(Kt=Wt||(Wt={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",Kt.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",Kt.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",Kt.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",Kt.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(Xt=Qt||(Qt={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",Xt.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",Xt.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",Xt.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(en=Zt||(Zt={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",en.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",en.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",en.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(nn=tn||(tn={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",nn.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",nn.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",nn.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",nn.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",nn.EDIT_MODE_STYLE="EDIT_MODE_STYLE",nn.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",nn.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(on=rn||(rn={})).FOREGROUND="FOREGROUND",on.BACKGROUND="BACKGROUND",on.PROMPT="PROMPT",on.SEMANTIC="SEMANTIC",on.INTERACTIVE="INTERACTIVE",(an=ln||(ln={})).ASSET="ASSET",an.STYLE="STYLE",(un=sn||(sn={})).INSERT="INSERT",un.REMOVE="REMOVE",un.REMOVE_STATIC="REMOVE_STATIC",un.OUTPAINT="OUTPAINT",(dn=cn||(cn={})).OPTIMIZED="OPTIMIZED",dn.LOSSLESS="LOSSLESS",(fn=pn||(pn={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",fn.PREFERENCE_TUNING="PREFERENCE_TUNING",(hn=mn||(mn={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",hn.STATE_PENDING="STATE_PENDING",hn.STATE_ACTIVE="STATE_ACTIVE",hn.STATE_FAILED="STATE_FAILED",(vn=gn||(gn={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",vn.PROCESSING="PROCESSING",vn.ACTIVE="ACTIVE",vn.FAILED="FAILED",(_n=yn||(yn={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",_n.UPLOADED="UPLOADED",_n.GENERATED="GENERATED",(En=bn||(bn={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",En.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",En.RESPONSE_REJECTED="RESPONSE_REJECTED",En.NEED_MORE_INPUT="NEED_MORE_INPUT",(wn=Sn||(Sn={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",wn.TEXT="TEXT",wn.IMAGE="IMAGE",wn.VIDEO="VIDEO",wn.AUDIO="AUDIO",wn.DOCUMENT="DOCUMENT",(An=Tn||(Tn={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",An.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",An.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(In=Cn||(Cn={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",In.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",In.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(kn=xn||(xn={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",kn.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",kn.NO_INTERRUPTION="NO_INTERRUPTION",(Nn=On||(On={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",Nn.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",Nn.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(Rn=Pn||(Pn={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",Rn.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",Rn.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",Rn.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",Rn.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",Rn.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",Rn.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",Rn.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",Rn.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",Rn.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",Rn.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",Rn.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",Rn.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(Dn=Mn||(Mn={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",Dn.QUALITY="QUALITY",Dn.DIVERSITY="DIVERSITY",Dn.VOCALIZATION="VOCALIZATION",(Un=Ln||(Ln={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",Un.PLAY="PLAY",Un.PAUSE="PAUSE",Un.STOP="STOP",Un.RESET_CONTEXT="RESET_CONTEXT";class Hn{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class qn{get text(){var e,t,n,r,o,i,l,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let s="",u=!1;const c=[];for(const d of null!==(a=null===(l=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===l?void 0:l.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(d))"text"===e||"thought"===e||"thoughtSignature"===e||null===t&&void 0===t||c.push(e);if("string"==typeof d.text){if("boolean"==typeof d.thought&&d.thought)continue;u=!0,s+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?s:void 0}get data(){var e,t,n,r,o,i,l,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let s="";const u=[];for(const c of null!==(a=null===(l=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===l?void 0:l.parts)&&void 0!==a?a:[]){for(const[e,t]of Object.entries(c))"inlineData"===e||null===t&&void 0===t||u.push(e);c.inlineData&&"string"==typeof c.inlineData.data&&(s+=atob(c.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}get functionCalls(){var e,t,n,r,o,i,l,a;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const s=null===(a=null===(l=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===l?void 0:l.parts)||void 0===a?void 0:a.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);return 0!==(null==s?void 0:s.length)?s:void 0}get executableCode(){var e,t,n,r,o,i,l,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const u=null===(a=null===(l=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===l?void 0:l.parts)||void 0===a?void 0:a.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);return 0!==(null==u?void 0:u.length)?null===(s=null==u?void 0:u[0])||void 0===s?void 0:s.code:void 0}get codeExecutionResult(){var e,t,n,r,o,i,l,a,s;if(0===(null===(r=null===(n=null===(t=null===(e=this.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r.length))return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const u=null===(a=null===(l=null===(i=null===(o=this.candidates)||void 0===o?void 0:o[0])||void 0===i?void 0:i.content)||void 0===l?void 0:l.parts)||void 0===a?void 0:a.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);return 0!==(null==u?void 0:u.length)?null===(s=null==u?void 0:u[0])||void 0===s?void 0:s.output:void 0}}class Gn{}class zn{}class Vn{}class Bn{}class $n{}class Jn{}class Yn{}class Wn{}class Kn{}class Qn{}class Xn{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new Xn;let r;const o=e;return r=t?Pe(o):Ne(o),Object.assign(n,r),n}}class Zn{}class er{}class tr{}class nr{}class rr{}class or{}class ir{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new ir,r=Re(e);return Object.assign(n,r),n}}class lr{}class ar{}class sr{}class ur{}class cr{get text(){var e,t,n;let r="",o=!1;const i=[];for(const l of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(l))"text"!==e&&"thought"!==e&&null!==t&&i.push(e);if("string"==typeof l.text){if("boolean"==typeof l.thought&&l.thought)continue;o=!0,r+=l.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,t,n;let r="";const o=[];for(const i of null!==(n=null===(t=null===(e=this.serverContent)||void 0===e?void 0:e.modelTurn)||void 0===t?void 0:t.parts)&&void 0!==n?n:[]){for(const[e,t]of Object.entries(i))"inlineData"!==e&&null!==t&&o.push(e);i.inlineData&&"string"==typeof i.inlineData.data&&(r+=atob(i.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class dr{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class pr{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new pr,r=Me(e);return Object.assign(n,r),n}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fr(e,t){if(!t||"string"!=typeof t)throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return`publishers/google/models/${t}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function mr(e,t){const n=fr(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function hr(e){return Array.isArray(e)?e.map(e=>gr(e)):[gr(e)]}function gr(e){if("object"==typeof e&&null!==e)return e;throw new Error("Could not parse input as Blob. Unsupported blob type: "+typeof e)}function vr(e){const t=gr(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function yr(e){const t=gr(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function _r(e){if(null==e)throw new Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw new Error("Unsupported part type: "+typeof e)}function br(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>_r(e)):[_r(e)]}function Er(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function Sr(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function wr(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function Tr(e){if(null==e)throw new Error("ContentUnion is required");return Er(e)?e:{role:"user",parts:br(e)}}function Ar(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const t=Tr(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){const e=Tr(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Tr(e)):[Tr(t)]}function Cr(e){if(null==e||Array.isArray(e)&&0===e.length)throw new Error("contents are required");if(!Array.isArray(e)){if(Sr(e)||wr(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tr(e)]}const t=[],n=[],r=Er(e[0]);for(const o of e){const e=Er(o);if(e!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(o);else{if(Sr(o)||wr(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:br(n)}),t}function Ir(e){const t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;null!=i&&2==i.length&&("null"===i[0].type?(t.nullable=!0,e=i[1]):"null"===i[1].type&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(qe).includes(n[0].toUpperCase())?n[0].toUpperCase():qe.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const e of n)t.anyOf.push({type:Object.values(qe).includes(e.toUpperCase())?e.toUpperCase():qe.TYPE_UNSPECIFIED})}}(e.type,t);for(const[l,a]of Object.entries(e))if(null!=a)if("type"==l){if("null"===a)throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(qe).includes(a.toUpperCase())?a.toUpperCase():qe.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=Ir(a);else if(r.includes(l)){const e=[];for(const n of a)"null"!=n.type?e.push(Ir(n)):t.nullable=!0;t[l]=e}else if(o.includes(l)){const e={};for(const[t,n]of Object.entries(a))e[t]=Ir(n);t[l]=e}else{if("additionalProperties"===l)continue;t[l]=a}return t}function xr(e){return Ir(e)}function kr(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error("Unsupported speechConfig type: "+typeof e)}function Or(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Nr(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Ir(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Ir(t.response));return e}function Pr(e){if(null==e)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Rr(e,t){if("string"!=typeof t)throw new Error("name must be a string");return function(e,t,n,r=1){const o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}(e,t,"cachedContents")}function Mr(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Dr(e){return Oe(e)}function Lr(e){var t;let n;var r;if(null!=(r=e)&&"object"==typeof r&&"name"in r&&(n=e.name),!(function(e){return null!=e&&"object"==typeof e&&"uri"in e}(e)&&(n=e.uri,void 0===n)||function(e){return null!=e&&"object"==typeof e&&"video"in e}(e)&&(n=null===(t=e.video)||void 0===t?void 0:t.uri,void 0===n))){if("string"==typeof e&&(n=e),void 0===n)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw new Error(`Could not extract file name from URI ${n}`);n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ur(e,t){let n;return n=e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels",n}function jr(e){for(const t of["models","tunedModels","publisherModels"])if(Fr(e,t))return e[t];return[]}function Fr(e,t){return null!==e&&"object"==typeof e&&t in e}function Hr(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior);return{functionDeclarations:[r]}}function qr(e,t){let n;if("string"==typeof t)if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else{if(!t.startsWith("bq://"))throw new Error(`Unsupported string source for Vertex AI: ${t}`);n={format:"bigquery",bigqueryUri:t}}else{if(!t.startsWith("files/"))throw new Error(`Unsupported string source for Gemini API: ${t}`);n={fileName:t}}else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||1!==r)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||1!==o)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Gr(e){if("object"!=typeof e||null===e)return{};const t=e,n=t.inlinedResponses;if("object"!=typeof n||null===n)return e;const r=n.inlinedResponses;if(!Array.isArray(r)||0===r.length)return e;let o=!1;for(const i of r){if("object"!=typeof i||null===i)continue;const e=i.response;if("object"!=typeof e||null===e)continue;if(void 0!==e.embedding){o=!0;break}}return o&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function zr(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Vr(e){return"BATCH_STATE_UNSPECIFIED"===e?"JOB_STATE_UNSPECIFIED":"BATCH_STATE_PENDING"===e?"JOB_STATE_PENDING":"BATCH_STATE_RUNNING"===e?"JOB_STATE_RUNNING":"BATCH_STATE_SUCCEEDED"===e?"JOB_STATE_SUCCEEDED":"BATCH_STATE_FAILED"===e?"JOB_STATE_FAILED":"BATCH_STATE_CANCELLED"===e?"JOB_STATE_CANCELLED":"BATCH_STATE_EXPIRED"===e?"JOB_STATE_EXPIRED":e}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Br(e){const t={},n=xe(e,["responsesFile"]);null!=n&&Ie(t,["fileName"],n);const r=xe(e,["inlinedResponses","inlinedResponses"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["response"]);null!=n&&Ie(t,["response"],function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["content"]);null!=n&&Ie(t,["content"],n);const r=xe(e,["citationMetadata"]);null!=r&&Ie(t,["citationMetadata"],function(e){const t={},n=xe(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["citations"],e)}return t}(r));const o=xe(e,["tokenCount"]);null!=o&&Ie(t,["tokenCount"],o);const i=xe(e,["finishReason"]);null!=i&&Ie(t,["finishReason"],i);const l=xe(e,["avgLogprobs"]);null!=l&&Ie(t,["avgLogprobs"],l);const a=xe(e,["groundingMetadata"]);null!=a&&Ie(t,["groundingMetadata"],a);const s=xe(e,["index"]);null!=s&&Ie(t,["index"],s);const u=xe(e,["logprobsResult"]);null!=u&&Ie(t,["logprobsResult"],u);const c=xe(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["safetyRatings"],e)}const d=xe(e,["urlContextMetadata"]);null!=d&&Ie(t,["urlContextMetadata"],d);return t}(e))),Ie(t,["candidates"],e)}const o=xe(e,["modelVersion"]);null!=o&&Ie(t,["modelVersion"],o);const i=xe(e,["promptFeedback"]);null!=i&&Ie(t,["promptFeedback"],i);const l=xe(e,["responseId"]);null!=l&&Ie(t,["responseId"],l);const a=xe(e,["usageMetadata"]);null!=a&&Ie(t,["usageMetadata"],a);return t}(n));const r=xe(e,["error"]);null!=r&&Ie(t,["error"],r);return t}(e))),Ie(t,["inlinedResponses"],e)}const o=xe(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["inlinedEmbedContentResponses"],e)}return t}function $r(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata","displayName"]);null!=r&&Ie(t,["displayName"],r);const o=xe(e,["metadata","state"]);null!=o&&Ie(t,["state"],Vr(o));const i=xe(e,["metadata","createTime"]);null!=i&&Ie(t,["createTime"],i);const l=xe(e,["metadata","endTime"]);null!=l&&Ie(t,["endTime"],l);const a=xe(e,["metadata","updateTime"]);null!=a&&Ie(t,["updateTime"],a);const s=xe(e,["metadata","model"]);null!=s&&Ie(t,["model"],s);const u=xe(e,["metadata","output"]);return null!=u&&Ie(t,["dest"],Br(Gr(u))),t}function Jr(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["displayName"]);null!=r&&Ie(t,["displayName"],r);const o=xe(e,["state"]);null!=o&&Ie(t,["state"],Vr(o));const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["createTime"]);null!=l&&Ie(t,["createTime"],l);const a=xe(e,["startTime"]);null!=a&&Ie(t,["startTime"],a);const s=xe(e,["endTime"]);null!=s&&Ie(t,["endTime"],s);const u=xe(e,["updateTime"]);null!=u&&Ie(t,["updateTime"],u);const c=xe(e,["model"]);null!=c&&Ie(t,["model"],c);const d=xe(e,["inputConfig"]);null!=d&&Ie(t,["src"],function(e){const t={},n=xe(e,["instancesFormat"]);null!=n&&Ie(t,["format"],n);const r=xe(e,["gcsSource","uris"]);null!=r&&Ie(t,["gcsUri"],r);const o=xe(e,["bigquerySource","inputUri"]);null!=o&&Ie(t,["bigqueryUri"],o);return t}(d));const p=xe(e,["outputConfig"]);null!=p&&Ie(t,["dest"],function(e){const t={},n=xe(e,["predictionsFormat"]);null!=n&&Ie(t,["format"],n);const r=xe(e,["gcsDestination","outputUriPrefix"]);null!=r&&Ie(t,["gcsUri"],r);const o=xe(e,["bigqueryDestination","outputUri"]);return null!=o&&Ie(t,["bigqueryUri"],o),t}(Gr(p)));const f=xe(e,["completionStats"]);return null!=f&&Ie(t,["completionStats"],f),t}function Yr(e,t){const n={};if(void 0!==xe(t,["format"]))throw new Error("format parameter is not supported in Gemini API.");if(void 0!==xe(t,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==xe(t,["bigqueryUri"]))throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=xe(t,["fileName"]);null!=r&&Ie(n,["fileName"],r);const o=xe(t,["inlinedRequests"]);if(null!=o){let t=o;Array.isArray(t)&&(t=t.map(t=>function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["request","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let e=Cr(o);Array.isArray(e)&&(e=e.map(e=>Wr(e))),Ie(n,["request","contents"],e)}const i=xe(t,["metadata"]);null!=i&&Ie(n,["metadata"],i);const l=xe(t,["config"]);null!=l&&Ie(n,["request","generationConfig"],function(e,t,n){const r={},o=xe(t,["systemInstruction"]);void 0!==n&&null!=o&&Ie(n,["systemInstruction"],Wr(Tr(o)));const i=xe(t,["temperature"]);null!=i&&Ie(r,["temperature"],i);const l=xe(t,["topP"]);null!=l&&Ie(r,["topP"],l);const a=xe(t,["topK"]);null!=a&&Ie(r,["topK"],a);const s=xe(t,["candidateCount"]);null!=s&&Ie(r,["candidateCount"],s);const u=xe(t,["maxOutputTokens"]);null!=u&&Ie(r,["maxOutputTokens"],u);const c=xe(t,["stopSequences"]);null!=c&&Ie(r,["stopSequences"],c);const d=xe(t,["responseLogprobs"]);null!=d&&Ie(r,["responseLogprobs"],d);const p=xe(t,["logprobs"]);null!=p&&Ie(r,["logprobs"],p);const f=xe(t,["presencePenalty"]);null!=f&&Ie(r,["presencePenalty"],f);const m=xe(t,["frequencyPenalty"]);null!=m&&Ie(r,["frequencyPenalty"],m);const h=xe(t,["seed"]);null!=h&&Ie(r,["seed"],h);const g=xe(t,["responseMimeType"]);null!=g&&Ie(r,["responseMimeType"],g);const v=xe(t,["responseSchema"]);null!=v&&Ie(r,["responseSchema"],xr(v));const y=xe(t,["responseJsonSchema"]);null!=y&&Ie(r,["responseJsonSchema"],y);if(void 0!==xe(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==xe(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=xe(t,["safetySettings"]);if(void 0!==n&&null!=_){let e=_;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["category"]);null!=n&&Ie(t,["category"],n);if(void 0!==xe(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=xe(e,["threshold"]);null!=r&&Ie(t,["threshold"],r);return t}(e))),Ie(n,["safetySettings"],e)}const b=xe(t,["tools"]);if(void 0!==n&&null!=b){let e=Pr(b);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["functionDeclarations"],e)}if(void 0!==xe(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=xe(e,["googleSearchRetrieval"]);null!=r&&Ie(t,["googleSearchRetrieval"],r);const o=xe(e,["computerUse"]);null!=o&&Ie(t,["computerUse"],o);const i=xe(e,["fileSearch"]);null!=i&&Ie(t,["fileSearch"],i);const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);if(void 0!==xe(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=xe(e,["googleMaps"]);null!=a&&Ie(t,["googleMaps"],function(e){const t={};if(void 0!==xe(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xe(e,["enableWidget"]);null!=n&&Ie(t,["enableWidget"],n);return t}(a));const s=xe(e,["googleSearch"]);null!=s&&Ie(t,["googleSearch"],function(e){const t={};if(void 0!==xe(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xe(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xe(e,["timeRangeFilter"]);null!=n&&Ie(t,["timeRangeFilter"],n);return t}(s));const u=xe(e,["urlContext"]);null!=u&&Ie(t,["urlContext"],u);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(Nr(e)))),Ie(n,["tools"],e)}const E=xe(t,["toolConfig"]);void 0!==n&&null!=E&&Ie(n,["toolConfig"],function(e){const t={},n=xe(e,["functionCallingConfig"]);null!=n&&Ie(t,["functionCallingConfig"],function(e){const t={},n=xe(e,["mode"]);null!=n&&Ie(t,["mode"],n);const r=xe(e,["allowedFunctionNames"]);null!=r&&Ie(t,["allowedFunctionNames"],r);if(void 0!==xe(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=xe(e,["retrievalConfig"]);null!=r&&Ie(t,["retrievalConfig"],r);return t}(E));if(void 0!==xe(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const S=xe(t,["cachedContent"]);void 0!==n&&null!=S&&Ie(n,["cachedContent"],Rr(e,S));const w=xe(t,["responseModalities"]);null!=w&&Ie(r,["responseModalities"],w);const T=xe(t,["mediaResolution"]);null!=T&&Ie(r,["mediaResolution"],T);const A=xe(t,["speechConfig"]);null!=A&&Ie(r,["speechConfig"],kr(A));if(void 0!==xe(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=xe(t,["thinkingConfig"]);null!=C&&Ie(r,["thinkingConfig"],C);const I=xe(t,["imageConfig"]);null!=I&&Ie(r,["imageConfig"],function(e){const t={},n=xe(e,["aspectRatio"]);null!=n&&Ie(t,["aspectRatio"],n);const r=xe(e,["imageSize"]);null!=r&&Ie(t,["imageSize"],r);if(void 0!==xe(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==xe(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(I));return r}(e,l,xe(n,["request"],{})));return n}(e,t))),Ie(n,["requests","requests"],t)}return n}function Wr(e){const t={},n=xe(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["mediaResolution"]);null!=n&&Ie(t,["mediaResolution"],n);const r=xe(e,["codeExecutionResult"]);null!=r&&Ie(t,["codeExecutionResult"],r);const o=xe(e,["executableCode"]);null!=o&&Ie(t,["executableCode"],o);const i=xe(e,["fileData"]);null!=i&&Ie(t,["fileData"],function(e){const t={};if(void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xe(e,["fileUri"]);null!=n&&Ie(t,["fileUri"],n);const r=xe(e,["mimeType"]);null!=r&&Ie(t,["mimeType"],r);return t}(i));const l=xe(e,["functionCall"]);null!=l&&Ie(t,["functionCall"],function(e){const t={},n=xe(e,["id"]);null!=n&&Ie(t,["id"],n);const r=xe(e,["args"]);null!=r&&Ie(t,["args"],r);const o=xe(e,["name"]);null!=o&&Ie(t,["name"],o);if(void 0!==xe(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xe(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(l));const a=xe(e,["functionResponse"]);null!=a&&Ie(t,["functionResponse"],a);const s=xe(e,["inlineData"]);null!=s&&Ie(t,["inlineData"],function(e){const t={},n=xe(e,["data"]);if(null!=n&&Ie(t,["data"],n),void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=xe(e,["mimeType"]);return null!=r&&Ie(t,["mimeType"],r),t}(s));const u=xe(e,["text"]);null!=u&&Ie(t,["text"],u);const c=xe(e,["thought"]);null!=c&&Ie(t,["thought"],c);const d=xe(e,["thoughtSignature"]);null!=d&&Ie(t,["thoughtSignature"],d);const p=xe(e,["videoMetadata"]);null!=p&&Ie(t,["videoMetadata"],p);return t}(e))),Ie(t,["parts"],e)}const r=xe(e,["role"]);return null!=r&&Ie(t,["role"],r),t}function Kr(e,t){const n=xe(e,["displayName"]);void 0!==t&&null!=n&&Ie(t,["displayName"],n);const r=xe(e,["dest"]);return void 0!==t&&null!=r&&Ie(t,["outputConfig"],function(e){const t={},n=xe(e,["format"]);null!=n&&Ie(t,["predictionsFormat"],n);const r=xe(e,["gcsUri"]);null!=r&&Ie(t,["gcsDestination","outputUriPrefix"],r);const o=xe(e,["bigqueryUri"]);if(null!=o&&Ie(t,["bigqueryDestination","outputUri"],o),void 0!==xe(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==xe(e,["inlinedResponses"]))throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==xe(e,["inlinedEmbedContentResponses"]))throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!=typeof e)return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}(r))),{}}function Qr(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["src"]);null!=o&&Ie(n,["batch","inputConfig"],Yr(e,qr(e,o)));const i=xe(t,["config"]);return null!=i&&function(e,t){const n=xe(e,["displayName"]);if(void 0!==t&&null!=n&&Ie(t,["batch","displayName"],n),void 0!==xe(e,["dest"]))throw new Error("dest parameter is not supported in Gemini API.")}(i,n),n}function Xr(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["model"],fr(e,r));const o=xe(t,["src"]);null!=o&&Ie(n,["inputConfig"],function(e){const t={},n=xe(e,["format"]);null!=n&&Ie(t,["instancesFormat"],n);const r=xe(e,["gcsUri"]);null!=r&&Ie(t,["gcsSource","uris"],r);const o=xe(e,["bigqueryUri"]);if(null!=o&&Ie(t,["bigquerySource","inputUri"],o),void 0!==xe(e,["fileName"]))throw new Error("fileName parameter is not supported in Vertex AI.");if(void 0!==xe(e,["inlinedRequests"]))throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(qr(e,o)));const i=xe(t,["config"]);return null!=i&&Kr(i,n),n}function Zr(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["src"]);null!=o&&Ie(n,["batch","inputConfig"],function(e,t){const n={},r=xe(t,["fileName"]);null!=r&&Ie(n,["file_name"],r);const o=xe(t,["inlinedRequests"]);null!=o&&Ie(n,["requests"],function(e,t){const n={},r=xe(t,["contents"]);if(null!=r){let t=Ar(e,r);Array.isArray(t)&&(t=t.map(e=>e)),Ie(n,["requests[]","request","content"],t)}const o=xe(t,["config"]);null!=o&&(Ie(n,["_self"],function(e,t){const n={},r=xe(e,["taskType"]);void 0!==t&&null!=r&&Ie(t,["requests[]","taskType"],r);const o=xe(e,["title"]);void 0!==t&&null!=o&&Ie(t,["requests[]","title"],o);const i=xe(e,["outputDimensionality"]);void 0!==t&&null!=i&&Ie(t,["requests[]","outputDimensionality"],i);if(void 0!==xe(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==xe(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}(o,n)),function(e,t){for(const[n,r]of Object.entries(t)){const t=n.split("."),o=r.split("."),i=new Set;let l=-1;for(let e=0;e<t.length;e++)if("*"===t[e]){l=e;break}if(-1!==l&&o.length>l)for(let e=l;e<o.length;e++){const t=o[e];"*"===t||t.endsWith("[]")||t.endsWith("[0]")||i.add(t)}ke(e,t,o,0,i)}}(n,{"requests[].*":"requests[].request.*"}));return n}(e,o));return n}(e,o));const i=xe(t,["config"]);return null!=i&&function(e,t){const n=xe(e,["displayName"]);void 0!==t&&null!=n&&Ie(t,["batch","displayName"],n)}(i,n),n}function eo(e){const t={},n=xe(e,["config"]);return null!=n&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);if(void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r),void 0!==xe(e,["filter"]))throw new Error("filter parameter is not supported in Gemini API.")}(n,t),t}function to(e){const t={},n=xe(e,["config"]);return null!=n&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r);const o=xe(e,["filter"]);void 0!==t&&null!=o&&Ie(t,["_query","filter"],o)}(n,t),t}(Fn=jn||(jn={})).PAGED_ITEM_BATCH_JOBS="batchJobs",Fn.PAGED_ITEM_MODELS="models",Fn.PAGED_ITEM_TUNING_JOBS="tuningJobs",Fn.PAGED_ITEM_FILES="files",Fn.PAGED_ITEM_CACHED_CONTENTS="cachedContents",Fn.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",Fn.PAGED_ITEM_DOCUMENTS="documents";class no{constructor(e,t,n,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,r)}init(e,t,n){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=null==t?void 0:t.sdkHttpResponse,this.idxInternal=0;let i={config:{}};i=n&&0!==Object.keys(n).length?"object"==typeof n?Object.assign({},n):n:{config:{}},i.config&&(i.config.pageToken=t.nextPageToken),this.paramsInternal=i,this.pageInternalSize=null!==(o=null===(r=i.config)||void 0===r?void 0:r.pageSize)&&void 0!==o?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength){if(!this.hasNextPage())return{value:void 0,done:!0};await this.nextPage()}const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return void 0!==(null===(e=this.params.config)||void 0===e?void 0:e.pageToken)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ro extends Ae{constructor(e){super(),this.apiClient=e,this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)},this.list=async(e={})=>new no(jn.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e)}createInlinedGenerateContentRequest(e){const t=Qr(this.apiClient,e),n=Ce("{model}:batchGenerateContent",t._url),r=t.batch.inputConfig.requests,o=r.requests,i=[];for(const l of o){const e=Object.assign({},l);if(e.systemInstruction){const t=e.systemInstruction;delete e.systemInstruction;const n=e.request;n.systemInstruction=t,e.request=n}i.push(e)}return r.requests=i,delete t.config,delete t._url,delete t._query,{path:n,body:t}}getGcsUri(e){return"string"==typeof e?e.startsWith("gs://")?e:void 0:!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0?e.gcsUri[0]:void 0}getBigqueryUri(e){return"string"==typeof e?e.startsWith("bq://")?e:void 0:Array.isArray(e)?void 0:e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},r=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${r}`),void 0===n.dest){const t=this.getGcsUri(e),o=this.getBigqueryUri(e);if(t)t.endsWith(".jsonl")?n.dest=`${t.slice(0,-6)}/dest`:n.dest=`${t}_dest_${r}`;else{if(!o)throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.");n.dest=`${o}_dest_${r}`}}return n}async createInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=Xr(this.apiClient,e);return l=Ce("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Jr(e))}{const t=Qr(this.apiClient,e);return l=Ce("{model}:batchGenerateContent",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>$r(e))}}async createEmbeddingsInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Zr(this.apiClient,e);return o=Ce("{model}:asyncBatchEmbedContent",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>$r(e))}}async get(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],zr(e,r)),n}(this.apiClient,e);return l=Ce("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>Jr(e))}{const t=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],zr(e,r)),n}(this.apiClient,e);return l=Ce("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>$r(e))}}async cancel(e){var t,n,r,o;let i="",l={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],zr(e,r)),n}(this.apiClient,e);i=Ce("batchPredictionJobs/{name}:cancel",r._url),l=r._query,delete r._url,delete r._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],zr(e,r)),n}(this.apiClient,e);i=Ce("batches/{name}:cancel",t._url),l=t._query,delete t._url,delete t._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal})}}async listInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=to(e);return l=Ce("batchPredictionJobs",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["batchPredictionJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>Jr(e))),Ie(t,["batchJobs"],e)}return t}(e),n=new ur;return Object.assign(n,t),n})}{const t=eo(e);return l=Ce("batches",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["operations"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>$r(e))),Ie(t,["batchJobs"],e)}return t}(e),n=new ur;return Object.assign(n,t),n})}}async delete(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],zr(e,r)),n}(this.apiClient,e);return l=Ce("batchPredictionJobs/{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["name"]);null!=r&&Ie(t,["name"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);return null!=i&&Ie(t,["error"],i),t}(e))}{const t=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],zr(e,r)),n}(this.apiClient,e);return l=Ce("batches/{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["name"]);null!=r&&Ie(t,["name"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);return null!=i&&Ie(t,["error"],i),t}(e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oo(e){const t={},n=xe(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["mediaResolution"]);null!=n&&Ie(t,["mediaResolution"],n);const r=xe(e,["codeExecutionResult"]);null!=r&&Ie(t,["codeExecutionResult"],r);const o=xe(e,["executableCode"]);null!=o&&Ie(t,["executableCode"],o);const i=xe(e,["fileData"]);null!=i&&Ie(t,["fileData"],function(e){const t={};if(void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xe(e,["fileUri"]);null!=n&&Ie(t,["fileUri"],n);const r=xe(e,["mimeType"]);null!=r&&Ie(t,["mimeType"],r);return t}(i));const l=xe(e,["functionCall"]);null!=l&&Ie(t,["functionCall"],function(e){const t={},n=xe(e,["id"]);null!=n&&Ie(t,["id"],n);const r=xe(e,["args"]);null!=r&&Ie(t,["args"],r);const o=xe(e,["name"]);null!=o&&Ie(t,["name"],o);if(void 0!==xe(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xe(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(l));const a=xe(e,["functionResponse"]);null!=a&&Ie(t,["functionResponse"],a);const s=xe(e,["inlineData"]);null!=s&&Ie(t,["inlineData"],function(e){const t={},n=xe(e,["data"]);if(null!=n&&Ie(t,["data"],n),void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=xe(e,["mimeType"]);return null!=r&&Ie(t,["mimeType"],r),t}(s));const u=xe(e,["text"]);null!=u&&Ie(t,["text"],u);const c=xe(e,["thought"]);null!=c&&Ie(t,["thought"],c);const d=xe(e,["thoughtSignature"]);null!=d&&Ie(t,["thoughtSignature"],d);const p=xe(e,["videoMetadata"]);null!=p&&Ie(t,["videoMetadata"],p);return t}(e))),Ie(t,["parts"],e)}const r=xe(e,["role"]);return null!=r&&Ie(t,["role"],r),t}function io(e,t){const n=xe(e,["ttl"]);void 0!==t&&null!=n&&Ie(t,["ttl"],n);const r=xe(e,["expireTime"]);void 0!==t&&null!=r&&Ie(t,["expireTime"],r);const o=xe(e,["displayName"]);void 0!==t&&null!=o&&Ie(t,["displayName"],o);const i=xe(e,["contents"]);if(void 0!==t&&null!=i){let e=Cr(i);Array.isArray(e)&&(e=e.map(e=>oo(e))),Ie(t,["contents"],e)}const l=xe(e,["systemInstruction"]);void 0!==t&&null!=l&&Ie(t,["systemInstruction"],oo(Tr(l)));const a=xe(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["functionDeclarations"],e)}if(void 0!==xe(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=xe(e,["googleSearchRetrieval"]);null!=r&&Ie(t,["googleSearchRetrieval"],r);const o=xe(e,["computerUse"]);null!=o&&Ie(t,["computerUse"],o);const i=xe(e,["fileSearch"]);null!=i&&Ie(t,["fileSearch"],i);const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);if(void 0!==xe(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=xe(e,["googleMaps"]);null!=a&&Ie(t,["googleMaps"],function(e){const t={};if(void 0!==xe(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xe(e,["enableWidget"]);null!=n&&Ie(t,["enableWidget"],n);return t}(a));const s=xe(e,["googleSearch"]);null!=s&&Ie(t,["googleSearch"],function(e){const t={};if(void 0!==xe(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xe(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xe(e,["timeRangeFilter"]);null!=n&&Ie(t,["timeRangeFilter"],n);return t}(s));const u=xe(e,["urlContext"]);null!=u&&Ie(t,["urlContext"],u);return t}(e))),Ie(t,["tools"],e)}const s=xe(e,["toolConfig"]);if(void 0!==t&&null!=s&&Ie(t,["toolConfig"],function(e){const t={},n=xe(e,["functionCallingConfig"]);null!=n&&Ie(t,["functionCallingConfig"],function(e){const t={},n=xe(e,["mode"]);null!=n&&Ie(t,["mode"],n);const r=xe(e,["allowedFunctionNames"]);null!=r&&Ie(t,["allowedFunctionNames"],r);if(void 0!==xe(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=xe(e,["retrievalConfig"]);null!=r&&Ie(t,["retrievalConfig"],r);return t}(s)),void 0!==xe(e,["kmsKeyName"]))throw new Error("kmsKeyName parameter is not supported in Gemini API.");return{}}function lo(e,t){const n=xe(e,["ttl"]);void 0!==t&&null!=n&&Ie(t,["ttl"],n);const r=xe(e,["expireTime"]);void 0!==t&&null!=r&&Ie(t,["expireTime"],r);const o=xe(e,["displayName"]);void 0!==t&&null!=o&&Ie(t,["displayName"],o);const i=xe(e,["contents"]);if(void 0!==t&&null!=i){let e=Cr(i);Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["contents"],e)}const l=xe(e,["systemInstruction"]);void 0!==t&&null!=l&&Ie(t,["systemInstruction"],Tr(l));const a=xe(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==xe(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=xe(e,["description"]);null!=n&&Ie(t,["description"],n);const r=xe(e,["name"]);null!=r&&Ie(t,["name"],r);const o=xe(e,["parameters"]);null!=o&&Ie(t,["parameters"],o);const i=xe(e,["parametersJsonSchema"]);null!=i&&Ie(t,["parametersJsonSchema"],i);const l=xe(e,["response"]);null!=l&&Ie(t,["response"],l);const a=xe(e,["responseJsonSchema"]);null!=a&&Ie(t,["responseJsonSchema"],a);return t}(e))),Ie(t,["functionDeclarations"],e)}const r=xe(e,["retrieval"]);null!=r&&Ie(t,["retrieval"],r);const o=xe(e,["googleSearchRetrieval"]);null!=o&&Ie(t,["googleSearchRetrieval"],o);const i=xe(e,["computerUse"]);null!=i&&Ie(t,["computerUse"],i);if(void 0!==xe(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);const a=xe(e,["enterpriseWebSearch"]);null!=a&&Ie(t,["enterpriseWebSearch"],a);const s=xe(e,["googleMaps"]);null!=s&&Ie(t,["googleMaps"],s);const u=xe(e,["googleSearch"]);null!=u&&Ie(t,["googleSearch"],u);const c=xe(e,["urlContext"]);null!=c&&Ie(t,["urlContext"],c);return t}(e))),Ie(t,["tools"],e)}const s=xe(e,["toolConfig"]);void 0!==t&&null!=s&&Ie(t,["toolConfig"],s);const u=xe(e,["kmsKeyName"]);return void 0!==t&&null!=u&&Ie(t,["encryption_spec","kmsKeyName"],u),{}}function ao(e){const t={},n=xe(e,["config"]);return null!=n&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r)}(n,t),t}function so(e){const t={},n=xe(e,["config"]);return null!=n&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r)}(n,t),t}function uo(e,t){const n={},r=xe(t,["name"]);null!=r&&Ie(n,["_url","name"],Rr(e,r));const o=xe(t,["config"]);return null!=o&&function(e,t){const n=xe(e,["ttl"]);void 0!==t&&null!=n&&Ie(t,["ttl"],n);const r=xe(e,["expireTime"]);void 0!==t&&null!=r&&Ie(t,["expireTime"],r)}(o,n),n}function co(e,t){const n={},r=xe(t,["name"]);null!=r&&Ie(n,["_url","name"],Rr(e,r));const o=xe(t,["config"]);return null!=o&&function(e,t){const n=xe(e,["ttl"]);void 0!==t&&null!=n&&Ie(t,["ttl"],n);const r=xe(e,["expireTime"]);void 0!==t&&null!=r&&Ie(t,["expireTime"],r)}(o,n),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class po extends Ae{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new no(jn.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["model"],mr(e,r));const o=xe(t,["config"]);return null!=o&&lo(o,n),n}(this.apiClient,e);return l=Ce("cachedContents",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["model"],mr(e,r));const o=xe(t,["config"]);return null!=o&&io(o,n),n}(this.apiClient,e);return l=Ce("cachedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async get(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],Rr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],Rr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async delete(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],Rr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);return null!=n&&Ie(t,["sdkHttpResponse"],n),t}(e),n=new er;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=xe(t,["name"]);return null!=r&&Ie(n,["_url","name"],Rr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);return null!=n&&Ie(t,["sdkHttpResponse"],n),t}(e),n=new er;return Object.assign(n,t),n})}}async update(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=co(this.apiClient,e);return l=Ce("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>e)}{const t=uo(this.apiClient,e);return l=Ce("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>e)}}async listInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=so(e);return l=Ce("cachedContents",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["cachedContents"],e)}return t}(e),n=new tr;return Object.assign(n,t),n})}{const t=ao(e);return l=Ce("cachedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["cachedContents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["cachedContents"],e)}return t}(e),n=new tr;return Object.assign(n,t),n})}}}function fo(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(e){return this instanceof mo?(this.v=e,this):new mo(e)}function ho(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function l(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{(n=o[e](t)).value instanceof mo?Promise.resolve(n.value.v).then(s,u):c(i[0][2],n)}catch(r){c(i[0][3],r)}var n}function s(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function go(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=fo(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function vo(e){var t;if(null==e.candidates||0===e.candidates.length)return!1;const n=null===(t=e.candidates[0])||void 0===t?void 0:t.content;return void 0!==n&&yo(n)}function yo(e){if(void 0===e.parts||0===e.parts.length)return!1;for(const t of e.parts)if(void 0===t||0===Object.keys(t).length)return!1;return!0}function _o(e){if(void 0===e||0===e.length)return[];const t=[],n=e.length;let r=0;for(;r<n;)if("user"===e[r].role)t.push(e[r]),r++;else{const o=[];let i=!0;for(;r<n&&"model"===e[r].role;)o.push(e[r]),i&&!yo(e[r])&&(i=!1),r++;i?t.push(...o):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class bo{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Eo(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Eo{constructor(e,t,n,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),function(e){if(0!==e.length)for(const t of e)if("user"!==t.role&&"model"!==t.role)throw new Error(`Role must be user or model, but got ${t.role}.`)}(o)}async sendMessage(e){var t;await this.sendPromise;const n=Tr(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});return this.sendPromise=(async()=>{var e,t,o;const i=await r,l=null===(t=null===(e=i.candidates)||void 0===e?void 0:e[0])||void 0===t?void 0:t.content,a=i.automaticFunctionCallingHistory,s=this.getHistory(!0).length;let u=[];null!=a&&(u=null!==(o=a.slice(s))&&void 0!==o?o:[]);const c=l?[l]:[];this.recordHistory(n,c,u)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const n=Tr(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!==(t=e.config)&&void 0!==t?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,n)}getHistory(e=!1){const t=e?_o(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,r;return ho(this,arguments,function*(){var o,i,l,a;const s=[];try{for(var u,c=!0,d=go(e);!(o=(u=yield mo(d.next())).done);c=!0){a=u.value,c=!1;const e=a;if(vo(e)){const t=null===(r=null===(n=e.candidates)||void 0===n?void 0:n[0])||void 0===r?void 0:r.content;void 0!==t&&s.push(t)}yield yield mo(e)}}catch(p){i={error:p}}finally{try{c||o||!(l=d.return)||(yield mo(l.call(d)))}finally{if(i)throw i.error}}this.recordHistory(t,s)})}recordHistory(e,t,n){let r=[];t.length>0&&t.every(e=>void 0!==e.role)?r=t:r.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(..._o(n)):this.history.push(e),this.history.push(...r)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class So extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,So.prototype)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wo(e){const t={},n=xe(e,["config"]);return null!=n&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r)}(n,t),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class To extends Ae{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new no(jn.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>e)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=wo(e);return o=Ce("files",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["files"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["files"],e)}return t}(e),n=new lr;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(e){const t={},n=xe(e,["file"]);return null!=n&&Ie(t,["file"],n),t}(e);return o=Ce("upload/v1beta/files",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);return null!=n&&Ie(t,["sdkHttpResponse"],n),t}(e),n=new ar;return Object.assign(n,t),n})}}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","file"],Lr(n)),t}(e);return o=Ce("files/{file}",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","file"],Lr(n)),t}(e);return o=Ce("files/{file}",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);return null!=n&&Ie(t,["sdkHttpResponse"],n),t}(e),n=new sr;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ao(e){const t={},n=xe(e,["data"]);if(null!=n&&Ie(t,["data"],n),void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=xe(e,["mimeType"]);return null!=r&&Ie(t,["mimeType"],r),t}function Co(e){const t={},n=xe(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["mediaResolution"]);null!=n&&Ie(t,["mediaResolution"],n);const r=xe(e,["codeExecutionResult"]);null!=r&&Ie(t,["codeExecutionResult"],r);const o=xe(e,["executableCode"]);null!=o&&Ie(t,["executableCode"],o);const i=xe(e,["fileData"]);null!=i&&Ie(t,["fileData"],function(e){const t={};if(void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xe(e,["fileUri"]);null!=n&&Ie(t,["fileUri"],n);const r=xe(e,["mimeType"]);null!=r&&Ie(t,["mimeType"],r);return t}(i));const l=xe(e,["functionCall"]);null!=l&&Ie(t,["functionCall"],function(e){const t={},n=xe(e,["id"]);null!=n&&Ie(t,["id"],n);const r=xe(e,["args"]);null!=r&&Ie(t,["args"],r);const o=xe(e,["name"]);null!=o&&Ie(t,["name"],o);if(void 0!==xe(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xe(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(l));const a=xe(e,["functionResponse"]);null!=a&&Ie(t,["functionResponse"],a);const s=xe(e,["inlineData"]);null!=s&&Ie(t,["inlineData"],Ao(s));const u=xe(e,["text"]);null!=u&&Ie(t,["text"],u);const c=xe(e,["thought"]);null!=c&&Ie(t,["thought"],c);const d=xe(e,["thoughtSignature"]);null!=d&&Ie(t,["thoughtSignature"],d);const p=xe(e,["videoMetadata"]);null!=p&&Ie(t,["videoMetadata"],p);return t}(e))),Ie(t,["parts"],e)}const r=xe(e,["role"]);return null!=r&&Ie(t,["role"],r),t}function Io(e,t){const n=xe(e,["generationConfig"]);void 0!==t&&null!=n&&Ie(t,["setup","generationConfig"],n);const r=xe(e,["responseModalities"]);void 0!==t&&null!=r&&Ie(t,["setup","generationConfig","responseModalities"],r);const o=xe(e,["temperature"]);void 0!==t&&null!=o&&Ie(t,["setup","generationConfig","temperature"],o);const i=xe(e,["topP"]);void 0!==t&&null!=i&&Ie(t,["setup","generationConfig","topP"],i);const l=xe(e,["topK"]);void 0!==t&&null!=l&&Ie(t,["setup","generationConfig","topK"],l);const a=xe(e,["maxOutputTokens"]);void 0!==t&&null!=a&&Ie(t,["setup","generationConfig","maxOutputTokens"],a);const s=xe(e,["mediaResolution"]);void 0!==t&&null!=s&&Ie(t,["setup","generationConfig","mediaResolution"],s);const u=xe(e,["seed"]);void 0!==t&&null!=u&&Ie(t,["setup","generationConfig","seed"],u);const c=xe(e,["speechConfig"]);void 0!==t&&null!=c&&Ie(t,["setup","generationConfig","speechConfig"],Or(c));const d=xe(e,["thinkingConfig"]);void 0!==t&&null!=d&&Ie(t,["setup","generationConfig","thinkingConfig"],d);const p=xe(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&Ie(t,["setup","generationConfig","enableAffectiveDialog"],p);const f=xe(e,["systemInstruction"]);void 0!==t&&null!=f&&Ie(t,["setup","systemInstruction"],Co(Tr(f)));const m=xe(e,["tools"]);if(void 0!==t&&null!=m){let e=Pr(m);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["functionDeclarations"],e)}if(void 0!==xe(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=xe(e,["googleSearchRetrieval"]);null!=r&&Ie(t,["googleSearchRetrieval"],r);const o=xe(e,["computerUse"]);null!=o&&Ie(t,["computerUse"],o);const i=xe(e,["fileSearch"]);null!=i&&Ie(t,["fileSearch"],i);const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);if(void 0!==xe(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=xe(e,["googleMaps"]);null!=a&&Ie(t,["googleMaps"],function(e){const t={};if(void 0!==xe(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xe(e,["enableWidget"]);return null!=n&&Ie(t,["enableWidget"],n),t}(a));const s=xe(e,["googleSearch"]);null!=s&&Ie(t,["googleSearch"],function(e){const t={};if(void 0!==xe(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xe(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xe(e,["timeRangeFilter"]);return null!=n&&Ie(t,["timeRangeFilter"],n),t}(s));const u=xe(e,["urlContext"]);null!=u&&Ie(t,["urlContext"],u);return t}(Nr(e)))),Ie(t,["setup","tools"],e)}const h=xe(e,["sessionResumption"]);void 0!==t&&null!=h&&Ie(t,["setup","sessionResumption"],function(e){const t={},n=xe(e,["handle"]);null!=n&&Ie(t,["handle"],n);if(void 0!==xe(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(h));const g=xe(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&Ie(t,["setup","inputAudioTranscription"],g);const v=xe(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&Ie(t,["setup","outputAudioTranscription"],v);const y=xe(e,["realtimeInputConfig"]);void 0!==t&&null!=y&&Ie(t,["setup","realtimeInputConfig"],y);const _=xe(e,["contextWindowCompression"]);void 0!==t&&null!=_&&Ie(t,["setup","contextWindowCompression"],_);const b=xe(e,["proactivity"]);return void 0!==t&&null!=b&&Ie(t,["setup","proactivity"],b),{}}function xo(e,t){const n=xe(e,["generationConfig"]);void 0!==t&&null!=n&&Ie(t,["setup","generationConfig"],function(e){const t={},n=xe(e,["modelSelectionConfig"]);null!=n&&Ie(t,["modelConfig"],n);const r=xe(e,["responseJsonSchema"]);null!=r&&Ie(t,["responseJsonSchema"],r);const o=xe(e,["audioTimestamp"]);null!=o&&Ie(t,["audioTimestamp"],o);const i=xe(e,["candidateCount"]);null!=i&&Ie(t,["candidateCount"],i);const l=xe(e,["enableAffectiveDialog"]);null!=l&&Ie(t,["enableAffectiveDialog"],l);const a=xe(e,["frequencyPenalty"]);null!=a&&Ie(t,["frequencyPenalty"],a);const s=xe(e,["logprobs"]);null!=s&&Ie(t,["logprobs"],s);const u=xe(e,["maxOutputTokens"]);null!=u&&Ie(t,["maxOutputTokens"],u);const c=xe(e,["mediaResolution"]);null!=c&&Ie(t,["mediaResolution"],c);const d=xe(e,["presencePenalty"]);null!=d&&Ie(t,["presencePenalty"],d);const p=xe(e,["responseLogprobs"]);null!=p&&Ie(t,["responseLogprobs"],p);const f=xe(e,["responseMimeType"]);null!=f&&Ie(t,["responseMimeType"],f);const m=xe(e,["responseModalities"]);null!=m&&Ie(t,["responseModalities"],m);const h=xe(e,["responseSchema"]);null!=h&&Ie(t,["responseSchema"],h);const g=xe(e,["routingConfig"]);null!=g&&Ie(t,["routingConfig"],g);const v=xe(e,["seed"]);null!=v&&Ie(t,["seed"],v);const y=xe(e,["speechConfig"]);null!=y&&Ie(t,["speechConfig"],Po(y));const _=xe(e,["stopSequences"]);null!=_&&Ie(t,["stopSequences"],_);const b=xe(e,["temperature"]);null!=b&&Ie(t,["temperature"],b);const E=xe(e,["thinkingConfig"]);null!=E&&Ie(t,["thinkingConfig"],E);const S=xe(e,["topK"]);null!=S&&Ie(t,["topK"],S);const w=xe(e,["topP"]);if(null!=w&&Ie(t,["topP"],w),void 0!==xe(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(n));const r=xe(e,["responseModalities"]);void 0!==t&&null!=r&&Ie(t,["setup","generationConfig","responseModalities"],r);const o=xe(e,["temperature"]);void 0!==t&&null!=o&&Ie(t,["setup","generationConfig","temperature"],o);const i=xe(e,["topP"]);void 0!==t&&null!=i&&Ie(t,["setup","generationConfig","topP"],i);const l=xe(e,["topK"]);void 0!==t&&null!=l&&Ie(t,["setup","generationConfig","topK"],l);const a=xe(e,["maxOutputTokens"]);void 0!==t&&null!=a&&Ie(t,["setup","generationConfig","maxOutputTokens"],a);const s=xe(e,["mediaResolution"]);void 0!==t&&null!=s&&Ie(t,["setup","generationConfig","mediaResolution"],s);const u=xe(e,["seed"]);void 0!==t&&null!=u&&Ie(t,["setup","generationConfig","seed"],u);const c=xe(e,["speechConfig"]);void 0!==t&&null!=c&&Ie(t,["setup","generationConfig","speechConfig"],Po(Or(c)));const d=xe(e,["thinkingConfig"]);void 0!==t&&null!=d&&Ie(t,["setup","generationConfig","thinkingConfig"],d);const p=xe(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&Ie(t,["setup","generationConfig","enableAffectiveDialog"],p);const f=xe(e,["systemInstruction"]);void 0!==t&&null!=f&&Ie(t,["setup","systemInstruction"],Tr(f));const m=xe(e,["tools"]);if(void 0!==t&&null!=m){let e=Pr(m);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==xe(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=xe(e,["description"]);null!=n&&Ie(t,["description"],n);const r=xe(e,["name"]);null!=r&&Ie(t,["name"],r);const o=xe(e,["parameters"]);null!=o&&Ie(t,["parameters"],o);const i=xe(e,["parametersJsonSchema"]);null!=i&&Ie(t,["parametersJsonSchema"],i);const l=xe(e,["response"]);null!=l&&Ie(t,["response"],l);const a=xe(e,["responseJsonSchema"]);return null!=a&&Ie(t,["responseJsonSchema"],a),t}(e))),Ie(t,["functionDeclarations"],e)}const r=xe(e,["retrieval"]);null!=r&&Ie(t,["retrieval"],r);const o=xe(e,["googleSearchRetrieval"]);null!=o&&Ie(t,["googleSearchRetrieval"],o);const i=xe(e,["computerUse"]);null!=i&&Ie(t,["computerUse"],i);if(void 0!==xe(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);const a=xe(e,["enterpriseWebSearch"]);null!=a&&Ie(t,["enterpriseWebSearch"],a);const s=xe(e,["googleMaps"]);null!=s&&Ie(t,["googleMaps"],s);const u=xe(e,["googleSearch"]);null!=u&&Ie(t,["googleSearch"],u);const c=xe(e,["urlContext"]);null!=c&&Ie(t,["urlContext"],c);return t}(Nr(e)))),Ie(t,["setup","tools"],e)}const h=xe(e,["sessionResumption"]);void 0!==t&&null!=h&&Ie(t,["setup","sessionResumption"],h);const g=xe(e,["inputAudioTranscription"]);void 0!==t&&null!=g&&Ie(t,["setup","inputAudioTranscription"],g);const v=xe(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&Ie(t,["setup","outputAudioTranscription"],v);const y=xe(e,["realtimeInputConfig"]);void 0!==t&&null!=y&&Ie(t,["setup","realtimeInputConfig"],y);const _=xe(e,["contextWindowCompression"]);void 0!==t&&null!=_&&Ie(t,["setup","contextWindowCompression"],_);const b=xe(e,["proactivity"]);return void 0!==t&&null!=b&&Ie(t,["setup","proactivity"],b),{}}function ko(e){const t={},n=xe(e,["media"]);if(null!=n){let e=hr(n);Array.isArray(e)&&(e=e.map(e=>Ao(e))),Ie(t,["mediaChunks"],e)}const r=xe(e,["audio"]);null!=r&&Ie(t,["audio"],Ao(yr(r)));const o=xe(e,["audioStreamEnd"]);null!=o&&Ie(t,["audioStreamEnd"],o);const i=xe(e,["video"]);null!=i&&Ie(t,["video"],Ao(vr(i)));const l=xe(e,["text"]);null!=l&&Ie(t,["text"],l);const a=xe(e,["activityStart"]);null!=a&&Ie(t,["activityStart"],a);const s=xe(e,["activityEnd"]);return null!=s&&Ie(t,["activityEnd"],s),t}function Oo(e){const t={},n=xe(e,["media"]);if(null!=n){let e=hr(n);Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["mediaChunks"],e)}const r=xe(e,["audio"]);null!=r&&Ie(t,["audio"],yr(r));const o=xe(e,["audioStreamEnd"]);null!=o&&Ie(t,["audioStreamEnd"],o);const i=xe(e,["video"]);null!=i&&Ie(t,["video"],vr(i));const l=xe(e,["text"]);null!=l&&Ie(t,["text"],l);const a=xe(e,["activityStart"]);null!=a&&Ie(t,["activityStart"],a);const s=xe(e,["activityEnd"]);return null!=s&&Ie(t,["activityEnd"],s),t}function No(e){const t={},n=xe(e,["setupComplete"]);null!=n&&Ie(t,["setupComplete"],n);const r=xe(e,["serverContent"]);null!=r&&Ie(t,["serverContent"],r);const o=xe(e,["toolCall"]);null!=o&&Ie(t,["toolCall"],o);const i=xe(e,["toolCallCancellation"]);null!=i&&Ie(t,["toolCallCancellation"],i);const l=xe(e,["usageMetadata"]);null!=l&&Ie(t,["usageMetadata"],function(e){const t={},n=xe(e,["promptTokenCount"]);null!=n&&Ie(t,["promptTokenCount"],n);const r=xe(e,["cachedContentTokenCount"]);null!=r&&Ie(t,["cachedContentTokenCount"],r);const o=xe(e,["candidatesTokenCount"]);null!=o&&Ie(t,["responseTokenCount"],o);const i=xe(e,["toolUsePromptTokenCount"]);null!=i&&Ie(t,["toolUsePromptTokenCount"],i);const l=xe(e,["thoughtsTokenCount"]);null!=l&&Ie(t,["thoughtsTokenCount"],l);const a=xe(e,["totalTokenCount"]);null!=a&&Ie(t,["totalTokenCount"],a);const s=xe(e,["promptTokensDetails"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["promptTokensDetails"],e)}const u=xe(e,["cacheTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["cacheTokensDetails"],e)}const c=xe(e,["candidatesTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["responseTokensDetails"],e)}const d=xe(e,["toolUsePromptTokensDetails"]);if(null!=d){let e=d;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["toolUsePromptTokensDetails"],e)}const p=xe(e,["trafficType"]);null!=p&&Ie(t,["trafficType"],p);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(l));const a=xe(e,["goAway"]);null!=a&&Ie(t,["goAway"],a);const s=xe(e,["sessionResumptionUpdate"]);return null!=s&&Ie(t,["sessionResumptionUpdate"],s),t}function Po(e){const t={},n=xe(e,["languageCode"]);null!=n&&Ie(t,["languageCode"],n);const r=xe(e,["voiceConfig"]);if(null!=r&&Ie(t,["voiceConfig"],r),void 0!==xe(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function Ro(e){const t={},n=xe(e,["content"]);null!=n&&Ie(t,["content"],n);const r=xe(e,["citationMetadata"]);null!=r&&Ie(t,["citationMetadata"],function(e){const t={},n=xe(e,["citationSources"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["citations"],e)}return t}(r));const o=xe(e,["tokenCount"]);null!=o&&Ie(t,["tokenCount"],o);const i=xe(e,["finishReason"]);null!=i&&Ie(t,["finishReason"],i);const l=xe(e,["avgLogprobs"]);null!=l&&Ie(t,["avgLogprobs"],l);const a=xe(e,["groundingMetadata"]);null!=a&&Ie(t,["groundingMetadata"],a);const s=xe(e,["index"]);null!=s&&Ie(t,["index"],s);const u=xe(e,["logprobsResult"]);null!=u&&Ie(t,["logprobsResult"],u);const c=xe(e,["safetyRatings"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["safetyRatings"],e)}const d=xe(e,["urlContextMetadata"]);return null!=d&&Ie(t,["urlContextMetadata"],d),t}function Mo(e){const t={},n=xe(e,["values"]);null!=n&&Ie(t,["values"],n);const r=xe(e,["statistics"]);return null!=r&&Ie(t,["statistics"],function(e){const t={},n=xe(e,["truncated"]);null!=n&&Ie(t,["truncated"],n);const r=xe(e,["token_count"]);null!=r&&Ie(t,["tokenCount"],r);return t}(r)),t}function Do(e){const t={},n=xe(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["mediaResolution"]);null!=n&&Ie(t,["mediaResolution"],n);const r=xe(e,["codeExecutionResult"]);null!=r&&Ie(t,["codeExecutionResult"],r);const o=xe(e,["executableCode"]);null!=o&&Ie(t,["executableCode"],o);const i=xe(e,["fileData"]);null!=i&&Ie(t,["fileData"],function(e){const t={};if(void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xe(e,["fileUri"]);null!=n&&Ie(t,["fileUri"],n);const r=xe(e,["mimeType"]);null!=r&&Ie(t,["mimeType"],r);return t}(i));const l=xe(e,["functionCall"]);null!=l&&Ie(t,["functionCall"],function(e){const t={},n=xe(e,["id"]);null!=n&&Ie(t,["id"],n);const r=xe(e,["args"]);null!=r&&Ie(t,["args"],r);const o=xe(e,["name"]);null!=o&&Ie(t,["name"],o);if(void 0!==xe(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xe(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(l));const a=xe(e,["functionResponse"]);null!=a&&Ie(t,["functionResponse"],a);const s=xe(e,["inlineData"]);null!=s&&Ie(t,["inlineData"],function(e){const t={},n=xe(e,["data"]);if(null!=n&&Ie(t,["data"],n),void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=xe(e,["mimeType"]);return null!=r&&Ie(t,["mimeType"],r),t}(s));const u=xe(e,["text"]);null!=u&&Ie(t,["text"],u);const c=xe(e,["thought"]);null!=c&&Ie(t,["thought"],c);const d=xe(e,["thoughtSignature"]);null!=d&&Ie(t,["thoughtSignature"],d);const p=xe(e,["videoMetadata"]);null!=p&&Ie(t,["videoMetadata"],p);return t}(e))),Ie(t,["parts"],e)}const r=xe(e,["role"]);return null!=r&&Ie(t,["role"],r),t}function Lo(e,t){const n=xe(e,["systemInstruction"]);void 0!==t&&null!=n&&Ie(t,["systemInstruction"],Tr(n));const r=xe(e,["tools"]);if(void 0!==t&&null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>gi(e))),Ie(t,["tools"],e)}const o=xe(e,["generationConfig"]);return void 0!==t&&null!=o&&Ie(t,["generationConfig"],function(e){const t={},n=xe(e,["modelSelectionConfig"]);null!=n&&Ie(t,["modelConfig"],n);const r=xe(e,["responseJsonSchema"]);null!=r&&Ie(t,["responseJsonSchema"],r);const o=xe(e,["audioTimestamp"]);null!=o&&Ie(t,["audioTimestamp"],o);const i=xe(e,["candidateCount"]);null!=i&&Ie(t,["candidateCount"],i);const l=xe(e,["enableAffectiveDialog"]);null!=l&&Ie(t,["enableAffectiveDialog"],l);const a=xe(e,["frequencyPenalty"]);null!=a&&Ie(t,["frequencyPenalty"],a);const s=xe(e,["logprobs"]);null!=s&&Ie(t,["logprobs"],s);const u=xe(e,["maxOutputTokens"]);null!=u&&Ie(t,["maxOutputTokens"],u);const c=xe(e,["mediaResolution"]);null!=c&&Ie(t,["mediaResolution"],c);const d=xe(e,["presencePenalty"]);null!=d&&Ie(t,["presencePenalty"],d);const p=xe(e,["responseLogprobs"]);null!=p&&Ie(t,["responseLogprobs"],p);const f=xe(e,["responseMimeType"]);null!=f&&Ie(t,["responseMimeType"],f);const m=xe(e,["responseModalities"]);null!=m&&Ie(t,["responseModalities"],m);const h=xe(e,["responseSchema"]);null!=h&&Ie(t,["responseSchema"],h);const g=xe(e,["routingConfig"]);null!=g&&Ie(t,["routingConfig"],g);const v=xe(e,["seed"]);null!=v&&Ie(t,["seed"],v);const y=xe(e,["speechConfig"]);null!=y&&Ie(t,["speechConfig"],hi(y));const _=xe(e,["stopSequences"]);null!=_&&Ie(t,["stopSequences"],_);const b=xe(e,["temperature"]);null!=b&&Ie(t,["temperature"],b);const E=xe(e,["thinkingConfig"]);null!=E&&Ie(t,["thinkingConfig"],E);const S=xe(e,["topK"]);null!=S&&Ie(t,["topK"],S);const w=xe(e,["topP"]);null!=w&&Ie(t,["topP"],w);if(void 0!==xe(e,["enableEnhancedCivicAnswers"]))throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}(o)),{}}function Uo(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let e=Cr(o);Array.isArray(e)&&(e=e.map(e=>Do(e))),Ie(n,["contents"],e)}const i=xe(t,["config"]);return null!=i&&function(e){if(void 0!==xe(e,["systemInstruction"]))throw new Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==xe(e,["tools"]))throw new Error("tools parameter is not supported in Gemini API.");if(void 0!==xe(e,["generationConfig"]))throw new Error("generationConfig parameter is not supported in Gemini API.")}(i),n}function jo(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["prompt"]);null!=o&&Ie(n,["instances[0]","prompt"],o);const i=xe(t,["referenceImages"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["referenceImage"]);null!=n&&Ie(t,["referenceImage"],ii(n));const r=xe(e,["referenceId"]);null!=r&&Ie(t,["referenceId"],r);const o=xe(e,["referenceType"]);null!=o&&Ie(t,["referenceType"],o);const i=xe(e,["maskImageConfig"]);null!=i&&Ie(t,["maskImageConfig"],function(e){const t={},n=xe(e,["maskMode"]);null!=n&&Ie(t,["maskMode"],n);const r=xe(e,["segmentationClasses"]);null!=r&&Ie(t,["maskClasses"],r);const o=xe(e,["maskDilation"]);null!=o&&Ie(t,["dilation"],o);return t}(i));const l=xe(e,["controlImageConfig"]);null!=l&&Ie(t,["controlImageConfig"],function(e){const t={},n=xe(e,["controlType"]);null!=n&&Ie(t,["controlType"],n);const r=xe(e,["enableControlImageComputation"]);return null!=r&&Ie(t,["computeControl"],r),t}(l));const a=xe(e,["styleImageConfig"]);null!=a&&Ie(t,["styleImageConfig"],a);const s=xe(e,["subjectImageConfig"]);null!=s&&Ie(t,["subjectImageConfig"],s);return t}(e))),Ie(n,["instances[0]","referenceImages"],e)}const l=xe(t,["config"]);return null!=l&&function(e,t){const n=xe(e,["outputGcsUri"]);void 0!==t&&null!=n&&Ie(t,["parameters","storageUri"],n);const r=xe(e,["negativePrompt"]);void 0!==t&&null!=r&&Ie(t,["parameters","negativePrompt"],r);const o=xe(e,["numberOfImages"]);void 0!==t&&null!=o&&Ie(t,["parameters","sampleCount"],o);const i=xe(e,["aspectRatio"]);void 0!==t&&null!=i&&Ie(t,["parameters","aspectRatio"],i);const l=xe(e,["guidanceScale"]);void 0!==t&&null!=l&&Ie(t,["parameters","guidanceScale"],l);const a=xe(e,["seed"]);void 0!==t&&null!=a&&Ie(t,["parameters","seed"],a);const s=xe(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&Ie(t,["parameters","safetySetting"],s);const u=xe(e,["personGeneration"]);void 0!==t&&null!=u&&Ie(t,["parameters","personGeneration"],u);const c=xe(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&Ie(t,["parameters","includeSafetyAttributes"],c);const d=xe(e,["includeRaiReason"]);void 0!==t&&null!=d&&Ie(t,["parameters","includeRaiReason"],d);const p=xe(e,["language"]);void 0!==t&&null!=p&&Ie(t,["parameters","language"],p);const f=xe(e,["outputMimeType"]);void 0!==t&&null!=f&&Ie(t,["parameters","outputOptions","mimeType"],f);const m=xe(e,["outputCompressionQuality"]);void 0!==t&&null!=m&&Ie(t,["parameters","outputOptions","compressionQuality"],m);const h=xe(e,["addWatermark"]);void 0!==t&&null!=h&&Ie(t,["parameters","addWatermark"],h);const g=xe(e,["labels"]);void 0!==t&&null!=g&&Ie(t,["labels"],g);const v=xe(e,["editMode"]);void 0!==t&&null!=v&&Ie(t,["parameters","editMode"],v);const y=xe(e,["baseSteps"]);void 0!==t&&null!=y&&Ie(t,["parameters","editConfig","baseSteps"],y)}(l,n),n}function Fo(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let t=Ar(e,o);Array.isArray(t)&&(t=t.map(e=>e)),Ie(n,["requests[]","content"],t)}const i=xe(t,["config"]);null!=i&&function(e,t){const n=xe(e,["taskType"]);void 0!==t&&null!=n&&Ie(t,["requests[]","taskType"],n);const r=xe(e,["title"]);void 0!==t&&null!=r&&Ie(t,["requests[]","title"],r);const o=xe(e,["outputDimensionality"]);if(void 0!==t&&null!=o&&Ie(t,["requests[]","outputDimensionality"],o),void 0!==xe(e,["mimeType"]))throw new Error("mimeType parameter is not supported in Gemini API.");if(void 0!==xe(e,["autoTruncate"]))throw new Error("autoTruncate parameter is not supported in Gemini API.")}(i,n);const l=xe(t,["model"]);return void 0!==l&&Ie(n,["requests[]","model"],fr(e,l)),n}function Ho(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let t=Ar(e,o);Array.isArray(t)&&(t=t.map(e=>e)),Ie(n,["instances[]","content"],t)}const i=xe(t,["config"]);return null!=i&&function(e,t){const n=xe(e,["taskType"]);void 0!==t&&null!=n&&Ie(t,["instances[]","task_type"],n);const r=xe(e,["title"]);void 0!==t&&null!=r&&Ie(t,["instances[]","title"],r);const o=xe(e,["outputDimensionality"]);void 0!==t&&null!=o&&Ie(t,["parameters","outputDimensionality"],o);const i=xe(e,["mimeType"]);void 0!==t&&null!=i&&Ie(t,["instances[]","mimeType"],i);const l=xe(e,["autoTruncate"]);void 0!==t&&null!=l&&Ie(t,["parameters","autoTruncate"],l)}(i,n),n}function qo(e,t,n){const r={},o=xe(t,["systemInstruction"]);void 0!==n&&null!=o&&Ie(n,["systemInstruction"],Do(Tr(o)));const i=xe(t,["temperature"]);null!=i&&Ie(r,["temperature"],i);const l=xe(t,["topP"]);null!=l&&Ie(r,["topP"],l);const a=xe(t,["topK"]);null!=a&&Ie(r,["topK"],a);const s=xe(t,["candidateCount"]);null!=s&&Ie(r,["candidateCount"],s);const u=xe(t,["maxOutputTokens"]);null!=u&&Ie(r,["maxOutputTokens"],u);const c=xe(t,["stopSequences"]);null!=c&&Ie(r,["stopSequences"],c);const d=xe(t,["responseLogprobs"]);null!=d&&Ie(r,["responseLogprobs"],d);const p=xe(t,["logprobs"]);null!=p&&Ie(r,["logprobs"],p);const f=xe(t,["presencePenalty"]);null!=f&&Ie(r,["presencePenalty"],f);const m=xe(t,["frequencyPenalty"]);null!=m&&Ie(r,["frequencyPenalty"],m);const h=xe(t,["seed"]);null!=h&&Ie(r,["seed"],h);const g=xe(t,["responseMimeType"]);null!=g&&Ie(r,["responseMimeType"],g);const v=xe(t,["responseSchema"]);null!=v&&Ie(r,["responseSchema"],xr(v));const y=xe(t,["responseJsonSchema"]);if(null!=y&&Ie(r,["responseJsonSchema"],y),void 0!==xe(t,["routingConfig"]))throw new Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==xe(t,["modelSelectionConfig"]))throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=xe(t,["safetySettings"]);if(void 0!==n&&null!=_){let e=_;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["category"]);null!=n&&Ie(t,["category"],n);if(void 0!==xe(e,["method"]))throw new Error("method parameter is not supported in Gemini API.");const r=xe(e,["threshold"]);null!=r&&Ie(t,["threshold"],r);return t}(e))),Ie(n,["safetySettings"],e)}const b=xe(t,["tools"]);if(void 0!==n&&null!=b){let e=Pr(b);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["functionDeclarations"],e)}if(void 0!==xe(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=xe(e,["googleSearchRetrieval"]);null!=r&&Ie(t,["googleSearchRetrieval"],r);const o=xe(e,["computerUse"]);null!=o&&Ie(t,["computerUse"],o);const i=xe(e,["fileSearch"]);null!=i&&Ie(t,["fileSearch"],i);const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);if(void 0!==xe(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=xe(e,["googleMaps"]);null!=a&&Ie(t,["googleMaps"],function(e){const t={};if(void 0!==xe(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xe(e,["enableWidget"]);null!=n&&Ie(t,["enableWidget"],n);return t}(a));const s=xe(e,["googleSearch"]);null!=s&&Ie(t,["googleSearch"],function(e){const t={};if(void 0!==xe(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xe(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xe(e,["timeRangeFilter"]);null!=n&&Ie(t,["timeRangeFilter"],n);return t}(s));const u=xe(e,["urlContext"]);null!=u&&Ie(t,["urlContext"],u);return t}(Nr(e)))),Ie(n,["tools"],e)}const E=xe(t,["toolConfig"]);if(void 0!==n&&null!=E&&Ie(n,["toolConfig"],function(e){const t={},n=xe(e,["functionCallingConfig"]);null!=n&&Ie(t,["functionCallingConfig"],function(e){const t={},n=xe(e,["mode"]);null!=n&&Ie(t,["mode"],n);const r=xe(e,["allowedFunctionNames"]);if(null!=r&&Ie(t,["allowedFunctionNames"],r),void 0!==xe(e,["streamFunctionCallArguments"]))throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}(n));const r=xe(e,["retrievalConfig"]);null!=r&&Ie(t,["retrievalConfig"],r);return t}(E)),void 0!==xe(t,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const S=xe(t,["cachedContent"]);void 0!==n&&null!=S&&Ie(n,["cachedContent"],Rr(e,S));const w=xe(t,["responseModalities"]);null!=w&&Ie(r,["responseModalities"],w);const T=xe(t,["mediaResolution"]);null!=T&&Ie(r,["mediaResolution"],T);const A=xe(t,["speechConfig"]);if(null!=A&&Ie(r,["speechConfig"],kr(A)),void 0!==xe(t,["audioTimestamp"]))throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=xe(t,["thinkingConfig"]);null!=C&&Ie(r,["thinkingConfig"],C);const I=xe(t,["imageConfig"]);return null!=I&&Ie(r,["imageConfig"],function(e){const t={},n=xe(e,["aspectRatio"]);null!=n&&Ie(t,["aspectRatio"],n);const r=xe(e,["imageSize"]);null!=r&&Ie(t,["imageSize"],r);if(void 0!==xe(e,["outputMimeType"]))throw new Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==xe(e,["outputCompressionQuality"]))throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}(I)),r}function Go(e,t,n){const r={},o=xe(t,["systemInstruction"]);void 0!==n&&null!=o&&Ie(n,["systemInstruction"],Tr(o));const i=xe(t,["temperature"]);null!=i&&Ie(r,["temperature"],i);const l=xe(t,["topP"]);null!=l&&Ie(r,["topP"],l);const a=xe(t,["topK"]);null!=a&&Ie(r,["topK"],a);const s=xe(t,["candidateCount"]);null!=s&&Ie(r,["candidateCount"],s);const u=xe(t,["maxOutputTokens"]);null!=u&&Ie(r,["maxOutputTokens"],u);const c=xe(t,["stopSequences"]);null!=c&&Ie(r,["stopSequences"],c);const d=xe(t,["responseLogprobs"]);null!=d&&Ie(r,["responseLogprobs"],d);const p=xe(t,["logprobs"]);null!=p&&Ie(r,["logprobs"],p);const f=xe(t,["presencePenalty"]);null!=f&&Ie(r,["presencePenalty"],f);const m=xe(t,["frequencyPenalty"]);null!=m&&Ie(r,["frequencyPenalty"],m);const h=xe(t,["seed"]);null!=h&&Ie(r,["seed"],h);const g=xe(t,["responseMimeType"]);null!=g&&Ie(r,["responseMimeType"],g);const v=xe(t,["responseSchema"]);null!=v&&Ie(r,["responseSchema"],xr(v));const y=xe(t,["responseJsonSchema"]);null!=y&&Ie(r,["responseJsonSchema"],y);const _=xe(t,["routingConfig"]);null!=_&&Ie(r,["routingConfig"],_);const b=xe(t,["modelSelectionConfig"]);null!=b&&Ie(r,["modelConfig"],b);const E=xe(t,["safetySettings"]);if(void 0!==n&&null!=E){let e=E;Array.isArray(e)&&(e=e.map(e=>e)),Ie(n,["safetySettings"],e)}const S=xe(t,["tools"]);if(void 0!==n&&null!=S){let e=Pr(S);Array.isArray(e)&&(e=e.map(e=>gi(Nr(e)))),Ie(n,["tools"],e)}const w=xe(t,["toolConfig"]);void 0!==n&&null!=w&&Ie(n,["toolConfig"],w);const T=xe(t,["labels"]);void 0!==n&&null!=T&&Ie(n,["labels"],T);const A=xe(t,["cachedContent"]);void 0!==n&&null!=A&&Ie(n,["cachedContent"],Rr(e,A));const C=xe(t,["responseModalities"]);null!=C&&Ie(r,["responseModalities"],C);const I=xe(t,["mediaResolution"]);null!=I&&Ie(r,["mediaResolution"],I);const x=xe(t,["speechConfig"]);null!=x&&Ie(r,["speechConfig"],hi(kr(x)));const k=xe(t,["audioTimestamp"]);null!=k&&Ie(r,["audioTimestamp"],k);const O=xe(t,["thinkingConfig"]);null!=O&&Ie(r,["thinkingConfig"],O);const N=xe(t,["imageConfig"]);return null!=N&&Ie(r,["imageConfig"],function(e){const t={},n=xe(e,["aspectRatio"]);null!=n&&Ie(t,["aspectRatio"],n);const r=xe(e,["imageSize"]);null!=r&&Ie(t,["imageSize"],r);const o=xe(e,["outputMimeType"]);null!=o&&Ie(t,["imageOutputOptions","mimeType"],o);const i=xe(e,["outputCompressionQuality"]);null!=i&&Ie(t,["imageOutputOptions","compressionQuality"],i);return t}(N)),r}function zo(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let e=Cr(o);Array.isArray(e)&&(e=e.map(e=>Do(e))),Ie(n,["contents"],e)}const i=xe(t,["config"]);return null!=i&&Ie(n,["generationConfig"],qo(e,i,n)),n}function Vo(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let e=Cr(o);Array.isArray(e)&&(e=e.map(e=>e)),Ie(n,["contents"],e)}const i=xe(t,["config"]);return null!=i&&Ie(n,["generationConfig"],Go(e,i,n)),n}function Bo(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Ro(e))),Ie(t,["candidates"],e)}const o=xe(e,["modelVersion"]);null!=o&&Ie(t,["modelVersion"],o);const i=xe(e,["promptFeedback"]);null!=i&&Ie(t,["promptFeedback"],i);const l=xe(e,["responseId"]);null!=l&&Ie(t,["responseId"],l);const a=xe(e,["usageMetadata"]);return null!=a&&Ie(t,["usageMetadata"],a),t}function $o(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["candidates"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["candidates"],e)}const o=xe(e,["createTime"]);null!=o&&Ie(t,["createTime"],o);const i=xe(e,["modelVersion"]);null!=i&&Ie(t,["modelVersion"],i);const l=xe(e,["promptFeedback"]);null!=l&&Ie(t,["promptFeedback"],l);const a=xe(e,["responseId"]);null!=a&&Ie(t,["responseId"],a);const s=xe(e,["usageMetadata"]);return null!=s&&Ie(t,["usageMetadata"],s),t}function Jo(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["prompt"]);null!=o&&Ie(n,["instances[0]","prompt"],o);const i=xe(t,["config"]);return null!=i&&function(e,t){if(void 0!==xe(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==xe(e,["negativePrompt"]))throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=xe(e,["numberOfImages"]);void 0!==t&&null!=n&&Ie(t,["parameters","sampleCount"],n);const r=xe(e,["aspectRatio"]);void 0!==t&&null!=r&&Ie(t,["parameters","aspectRatio"],r);const o=xe(e,["guidanceScale"]);if(void 0!==t&&null!=o&&Ie(t,["parameters","guidanceScale"],o),void 0!==xe(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const i=xe(e,["safetyFilterLevel"]);void 0!==t&&null!=i&&Ie(t,["parameters","safetySetting"],i);const l=xe(e,["personGeneration"]);void 0!==t&&null!=l&&Ie(t,["parameters","personGeneration"],l);const a=xe(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&Ie(t,["parameters","includeSafetyAttributes"],a);const s=xe(e,["includeRaiReason"]);void 0!==t&&null!=s&&Ie(t,["parameters","includeRaiReason"],s);const u=xe(e,["language"]);void 0!==t&&null!=u&&Ie(t,["parameters","language"],u);const c=xe(e,["outputMimeType"]);void 0!==t&&null!=c&&Ie(t,["parameters","outputOptions","mimeType"],c);const d=xe(e,["outputCompressionQuality"]);if(void 0!==t&&null!=d&&Ie(t,["parameters","outputOptions","compressionQuality"],d),void 0!==xe(e,["addWatermark"]))throw new Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==xe(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");const p=xe(e,["imageSize"]);if(void 0!==t&&null!=p&&Ie(t,["parameters","sampleImageSize"],p),void 0!==xe(e,["enhancePrompt"]))throw new Error("enhancePrompt parameter is not supported in Gemini API.")}(i,n),n}function Yo(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["prompt"]);null!=o&&Ie(n,["instances[0]","prompt"],o);const i=xe(t,["config"]);return null!=i&&function(e,t){const n=xe(e,["outputGcsUri"]);void 0!==t&&null!=n&&Ie(t,["parameters","storageUri"],n);const r=xe(e,["negativePrompt"]);void 0!==t&&null!=r&&Ie(t,["parameters","negativePrompt"],r);const o=xe(e,["numberOfImages"]);void 0!==t&&null!=o&&Ie(t,["parameters","sampleCount"],o);const i=xe(e,["aspectRatio"]);void 0!==t&&null!=i&&Ie(t,["parameters","aspectRatio"],i);const l=xe(e,["guidanceScale"]);void 0!==t&&null!=l&&Ie(t,["parameters","guidanceScale"],l);const a=xe(e,["seed"]);void 0!==t&&null!=a&&Ie(t,["parameters","seed"],a);const s=xe(e,["safetyFilterLevel"]);void 0!==t&&null!=s&&Ie(t,["parameters","safetySetting"],s);const u=xe(e,["personGeneration"]);void 0!==t&&null!=u&&Ie(t,["parameters","personGeneration"],u);const c=xe(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&Ie(t,["parameters","includeSafetyAttributes"],c);const d=xe(e,["includeRaiReason"]);void 0!==t&&null!=d&&Ie(t,["parameters","includeRaiReason"],d);const p=xe(e,["language"]);void 0!==t&&null!=p&&Ie(t,["parameters","language"],p);const f=xe(e,["outputMimeType"]);void 0!==t&&null!=f&&Ie(t,["parameters","outputOptions","mimeType"],f);const m=xe(e,["outputCompressionQuality"]);void 0!==t&&null!=m&&Ie(t,["parameters","outputOptions","compressionQuality"],m);const h=xe(e,["addWatermark"]);void 0!==t&&null!=h&&Ie(t,["parameters","addWatermark"],h);const g=xe(e,["labels"]);void 0!==t&&null!=g&&Ie(t,["labels"],g);const v=xe(e,["imageSize"]);void 0!==t&&null!=v&&Ie(t,["parameters","sampleImageSize"],v);const y=xe(e,["enhancePrompt"]);void 0!==t&&null!=y&&Ie(t,["parameters","enhancePrompt"],y)}(i,n),n}function Wo(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["_self"]);null!=n&&Ie(t,["image"],function(e){const t={},n=xe(e,["bytesBase64Encoded"]);null!=n&&Ie(t,["imageBytes"],Dr(n));const r=xe(e,["mimeType"]);null!=r&&Ie(t,["mimeType"],r);return t}(n));const r=xe(e,["raiFilteredReason"]);null!=r&&Ie(t,["raiFilteredReason"],r);const o=xe(e,["_self"]);null!=o&&Ie(t,["safetyAttributes"],di(o));return t}(e))),Ie(t,["generatedImages"],e)}const o=xe(e,["positivePromptSafetyAttributes"]);return null!=o&&Ie(t,["positivePromptSafetyAttributes"],di(o)),t}function Ko(e,t){const n=xe(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&Ie(t,["parameters","sampleCount"],n),void 0!==xe(e,["outputGcsUri"]))throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==xe(e,["fps"]))throw new Error("fps parameter is not supported in Gemini API.");const r=xe(e,["durationSeconds"]);if(void 0!==t&&null!=r&&Ie(t,["parameters","durationSeconds"],r),void 0!==xe(e,["seed"]))throw new Error("seed parameter is not supported in Gemini API.");const o=xe(e,["aspectRatio"]);void 0!==t&&null!=o&&Ie(t,["parameters","aspectRatio"],o);const i=xe(e,["resolution"]);void 0!==t&&null!=i&&Ie(t,["parameters","resolution"],i);const l=xe(e,["personGeneration"]);if(void 0!==t&&null!=l&&Ie(t,["parameters","personGeneration"],l),void 0!==xe(e,["pubsubTopic"]))throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=xe(e,["negativePrompt"]);void 0!==t&&null!=a&&Ie(t,["parameters","negativePrompt"],a);const s=xe(e,["enhancePrompt"]);if(void 0!==t&&null!=s&&Ie(t,["parameters","enhancePrompt"],s),void 0!==xe(e,["generateAudio"]))throw new Error("generateAudio parameter is not supported in Gemini API.");const u=xe(e,["lastFrame"]);void 0!==t&&null!=u&&Ie(t,["instances[0]","lastFrame"],oi(u));const c=xe(e,["referenceImages"]);if(void 0!==t&&null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["image"]);null!=n&&Ie(t,["image"],oi(n));const r=xe(e,["referenceType"]);null!=r&&Ie(t,["referenceType"],r);return t}(e))),Ie(t,["instances[0]","referenceImages"],e)}if(void 0!==xe(e,["mask"]))throw new Error("mask parameter is not supported in Gemini API.");if(void 0!==xe(e,["compressionQuality"]))throw new Error("compressionQuality parameter is not supported in Gemini API.");return{}}function Qo(e,t){const n=xe(e,["numberOfVideos"]);void 0!==t&&null!=n&&Ie(t,["parameters","sampleCount"],n);const r=xe(e,["outputGcsUri"]);void 0!==t&&null!=r&&Ie(t,["parameters","storageUri"],r);const o=xe(e,["fps"]);void 0!==t&&null!=o&&Ie(t,["parameters","fps"],o);const i=xe(e,["durationSeconds"]);void 0!==t&&null!=i&&Ie(t,["parameters","durationSeconds"],i);const l=xe(e,["seed"]);void 0!==t&&null!=l&&Ie(t,["parameters","seed"],l);const a=xe(e,["aspectRatio"]);void 0!==t&&null!=a&&Ie(t,["parameters","aspectRatio"],a);const s=xe(e,["resolution"]);void 0!==t&&null!=s&&Ie(t,["parameters","resolution"],s);const u=xe(e,["personGeneration"]);void 0!==t&&null!=u&&Ie(t,["parameters","personGeneration"],u);const c=xe(e,["pubsubTopic"]);void 0!==t&&null!=c&&Ie(t,["parameters","pubsubTopic"],c);const d=xe(e,["negativePrompt"]);void 0!==t&&null!=d&&Ie(t,["parameters","negativePrompt"],d);const p=xe(e,["enhancePrompt"]);void 0!==t&&null!=p&&Ie(t,["parameters","enhancePrompt"],p);const f=xe(e,["generateAudio"]);void 0!==t&&null!=f&&Ie(t,["parameters","generateAudio"],f);const m=xe(e,["lastFrame"]);void 0!==t&&null!=m&&Ie(t,["instances[0]","lastFrame"],ii(m));const h=xe(e,["referenceImages"]);if(void 0!==t&&null!=h){let e=h;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["image"]);null!=n&&Ie(t,["image"],ii(n));const r=xe(e,["referenceType"]);null!=r&&Ie(t,["referenceType"],r);return t}(e))),Ie(t,["instances[0]","referenceImages"],e)}const g=xe(e,["mask"]);void 0!==t&&null!=g&&Ie(t,["instances[0]","mask"],function(e){const t={},n=xe(e,["image"]);null!=n&&Ie(t,["_self"],ii(n));const r=xe(e,["maskMode"]);null!=r&&Ie(t,["maskMode"],r);return t}(g));const v=xe(e,["compressionQuality"]);return void 0!==t&&null!=v&&Ie(t,["parameters","compressionQuality"],v),{}}function Xo(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata"]);null!=r&&Ie(t,["metadata"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["response","generateVideoResponse"]);return null!=l&&Ie(t,["response"],function(e){const t={},n=xe(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["video"]);null!=n&&Ie(t,["video"],function(e){const t={},n=xe(e,["uri"]);null!=n&&Ie(t,["uri"],n);const r=xe(e,["encodedVideo"]);null!=r&&Ie(t,["videoBytes"],Dr(r));const o=xe(e,["encoding"]);null!=o&&Ie(t,["mimeType"],o);return t}(n));return t}(e))),Ie(t,["generatedVideos"],e)}const r=xe(e,["raiMediaFilteredCount"]);null!=r&&Ie(t,["raiMediaFilteredCount"],r);const o=xe(e,["raiMediaFilteredReasons"]);null!=o&&Ie(t,["raiMediaFilteredReasons"],o);return t}(l)),t}function Zo(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata"]);null!=r&&Ie(t,["metadata"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["response"]);return null!=l&&Ie(t,["response"],function(e){const t={},n=xe(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["_self"]);null!=n&&Ie(t,["video"],function(e){const t={},n=xe(e,["gcsUri"]);null!=n&&Ie(t,["uri"],n);const r=xe(e,["bytesBase64Encoded"]);null!=r&&Ie(t,["videoBytes"],Dr(r));const o=xe(e,["mimeType"]);null!=o&&Ie(t,["mimeType"],o);return t}(n));return t}(e))),Ie(t,["generatedVideos"],e)}const r=xe(e,["raiMediaFilteredCount"]);null!=r&&Ie(t,["raiMediaFilteredCount"],r);const o=xe(e,["raiMediaFilteredReasons"]);null!=o&&Ie(t,["raiMediaFilteredReasons"],o);return t}(l)),t}function ei(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["prompt"]);null!=o&&Ie(n,["instances[0]","prompt"],o);const i=xe(t,["image"]);null!=i&&Ie(n,["instances[0]","image"],oi(i));const l=xe(t,["video"]);null!=l&&Ie(n,["instances[0]","video"],bi(l));const a=xe(t,["source"]);null!=a&&function(e,t){const n={},r=xe(e,["prompt"]);void 0!==t&&null!=r&&Ie(t,["instances[0]","prompt"],r);const o=xe(e,["image"]);void 0!==t&&null!=o&&Ie(t,["instances[0]","image"],oi(o));const i=xe(e,["video"]);void 0!==t&&null!=i&&Ie(t,["instances[0]","video"],bi(i))}(a,n);const s=xe(t,["config"]);return null!=s&&Ko(s,n),n}function ti(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["prompt"]);null!=o&&Ie(n,["instances[0]","prompt"],o);const i=xe(t,["image"]);null!=i&&Ie(n,["instances[0]","image"],ii(i));const l=xe(t,["video"]);null!=l&&Ie(n,["instances[0]","video"],Ei(l));const a=xe(t,["source"]);null!=a&&function(e,t){const n={},r=xe(e,["prompt"]);void 0!==t&&null!=r&&Ie(t,["instances[0]","prompt"],r);const o=xe(e,["image"]);void 0!==t&&null!=o&&Ie(t,["instances[0]","image"],ii(o));const i=xe(e,["video"]);void 0!==t&&null!=i&&Ie(t,["instances[0]","video"],Ei(i))}(a,n);const s=xe(t,["config"]);return null!=s&&Qo(s,n),n}function ni(e){const t={},n=xe(e,["_self"]);null!=n&&Ie(t,["image"],ri(n));const r=xe(e,["raiFilteredReason"]);null!=r&&Ie(t,["raiFilteredReason"],r);const o=xe(e,["_self"]);null!=o&&Ie(t,["safetyAttributes"],pi(o));const i=xe(e,["prompt"]);return null!=i&&Ie(t,["enhancedPrompt"],i),t}function ri(e){const t={},n=xe(e,["gcsUri"]);null!=n&&Ie(t,["gcsUri"],n);const r=xe(e,["bytesBase64Encoded"]);null!=r&&Ie(t,["imageBytes"],Dr(r));const o=xe(e,["mimeType"]);return null!=o&&Ie(t,["mimeType"],o),t}function oi(e){const t={};if(void 0!==xe(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");const n=xe(e,["imageBytes"]);null!=n&&Ie(t,["bytesBase64Encoded"],Dr(n));const r=xe(e,["mimeType"]);return null!=r&&Ie(t,["mimeType"],r),t}function ii(e){const t={},n=xe(e,["gcsUri"]);null!=n&&Ie(t,["gcsUri"],n);const r=xe(e,["imageBytes"]);null!=r&&Ie(t,["bytesBase64Encoded"],Dr(r));const o=xe(e,["mimeType"]);return null!=o&&Ie(t,["mimeType"],o),t}function li(e,t){const n={},r=xe(t,["config"]);return null!=r&&function(e,t,n){const r=xe(t,["pageSize"]);void 0!==n&&null!=r&&Ie(n,["_query","pageSize"],r);const o=xe(t,["pageToken"]);void 0!==n&&null!=o&&Ie(n,["_query","pageToken"],o);const i=xe(t,["filter"]);void 0!==n&&null!=i&&Ie(n,["_query","filter"],i);const l=xe(t,["queryBase"]);void 0!==n&&null!=l&&Ie(n,["_url","models_url"],Ur(e,l))}(e,r,n),n}function ai(e,t){const n={},r=xe(t,["config"]);return null!=r&&function(e,t,n){const r=xe(t,["pageSize"]);void 0!==n&&null!=r&&Ie(n,["_query","pageSize"],r);const o=xe(t,["pageToken"]);void 0!==n&&null!=o&&Ie(n,["_query","pageToken"],o);const i=xe(t,["filter"]);void 0!==n&&null!=i&&Ie(n,["_query","filter"],i);const l=xe(t,["queryBase"]);void 0!==n&&null!=l&&Ie(n,["_url","models_url"],Ur(e,l))}(e,r,n),n}function si(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["displayName"]);null!=r&&Ie(t,["displayName"],r);const o=xe(e,["description"]);null!=o&&Ie(t,["description"],o);const i=xe(e,["version"]);null!=i&&Ie(t,["version"],i);const l=xe(e,["_self"]);null!=l&&Ie(t,["tunedModelInfo"],function(e){const t={},n=xe(e,["baseModel"]);null!=n&&Ie(t,["baseModel"],n);const r=xe(e,["createTime"]);null!=r&&Ie(t,["createTime"],r);const o=xe(e,["updateTime"]);null!=o&&Ie(t,["updateTime"],o);return t}(l));const a=xe(e,["inputTokenLimit"]);null!=a&&Ie(t,["inputTokenLimit"],a);const s=xe(e,["outputTokenLimit"]);null!=s&&Ie(t,["outputTokenLimit"],s);const u=xe(e,["supportedGenerationMethods"]);null!=u&&Ie(t,["supportedActions"],u);const c=xe(e,["temperature"]);null!=c&&Ie(t,["temperature"],c);const d=xe(e,["maxTemperature"]);null!=d&&Ie(t,["maxTemperature"],d);const p=xe(e,["topP"]);null!=p&&Ie(t,["topP"],p);const f=xe(e,["topK"]);null!=f&&Ie(t,["topK"],f);const m=xe(e,["thinking"]);return null!=m&&Ie(t,["thinking"],m),t}function ui(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["displayName"]);null!=r&&Ie(t,["displayName"],r);const o=xe(e,["description"]);null!=o&&Ie(t,["description"],o);const i=xe(e,["versionId"]);null!=i&&Ie(t,["version"],i);const l=xe(e,["deployedModels"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["endpoint"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["deployedModelId"]);return null!=r&&Ie(t,["deployedModelId"],r),t}(e))),Ie(t,["endpoints"],e)}const a=xe(e,["labels"]);null!=a&&Ie(t,["labels"],a);const s=xe(e,["_self"]);null!=s&&Ie(t,["tunedModelInfo"],function(e){const t={},n=xe(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&Ie(t,["baseModel"],n);const r=xe(e,["createTime"]);null!=r&&Ie(t,["createTime"],r);const o=xe(e,["updateTime"]);null!=o&&Ie(t,["updateTime"],o);return t}(s));const u=xe(e,["defaultCheckpointId"]);null!=u&&Ie(t,["defaultCheckpointId"],u);const c=xe(e,["checkpoints"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["checkpoints"],e)}return t}function ci(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["source"]);null!=o&&function(e,t){const n={},r=xe(e,["prompt"]);void 0!==t&&null!=r&&Ie(t,["instances[0]","prompt"],r);const o=xe(e,["personImage"]);void 0!==t&&null!=o&&Ie(t,["instances[0]","personImage","image"],ii(o));const i=xe(e,["productImages"]);if(void 0!==t&&null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["productImage"]);return null!=n&&Ie(t,["image"],ii(n)),t}(e))),Ie(t,["instances[0]","productImages"],e)}}(o,n);const i=xe(t,["config"]);return null!=i&&function(e,t){const n=xe(e,["numberOfImages"]);void 0!==t&&null!=n&&Ie(t,["parameters","sampleCount"],n);const r=xe(e,["baseSteps"]);void 0!==t&&null!=r&&Ie(t,["parameters","baseSteps"],r);const o=xe(e,["outputGcsUri"]);void 0!==t&&null!=o&&Ie(t,["parameters","storageUri"],o);const i=xe(e,["seed"]);void 0!==t&&null!=i&&Ie(t,["parameters","seed"],i);const l=xe(e,["safetyFilterLevel"]);void 0!==t&&null!=l&&Ie(t,["parameters","safetySetting"],l);const a=xe(e,["personGeneration"]);void 0!==t&&null!=a&&Ie(t,["parameters","personGeneration"],a);const s=xe(e,["addWatermark"]);void 0!==t&&null!=s&&Ie(t,["parameters","addWatermark"],s);const u=xe(e,["outputMimeType"]);void 0!==t&&null!=u&&Ie(t,["parameters","outputOptions","mimeType"],u);const c=xe(e,["outputCompressionQuality"]);void 0!==t&&null!=c&&Ie(t,["parameters","outputOptions","compressionQuality"],c);const d=xe(e,["enhancePrompt"]);void 0!==t&&null!=d&&Ie(t,["parameters","enhancePrompt"],d);const p=xe(e,["labels"]);void 0!==t&&null!=p&&Ie(t,["labels"],p)}(i,n),n}function di(e){const t={},n=xe(e,["safetyAttributes","categories"]);null!=n&&Ie(t,["categories"],n);const r=xe(e,["safetyAttributes","scores"]);null!=r&&Ie(t,["scores"],r);const o=xe(e,["contentType"]);return null!=o&&Ie(t,["contentType"],o),t}function pi(e){const t={},n=xe(e,["safetyAttributes","categories"]);null!=n&&Ie(t,["categories"],n);const r=xe(e,["safetyAttributes","scores"]);null!=r&&Ie(t,["scores"],r);const o=xe(e,["contentType"]);return null!=o&&Ie(t,["contentType"],o),t}function fi(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["source"]);null!=o&&function(e,t){const n={},r=xe(e,["prompt"]);void 0!==t&&null!=r&&Ie(t,["instances[0]","prompt"],r);const o=xe(e,["image"]);void 0!==t&&null!=o&&Ie(t,["instances[0]","image"],ii(o));const i=xe(e,["scribbleImage"]);void 0!==t&&null!=i&&Ie(t,["instances[0]","scribble"],function(e){const t={},n=xe(e,["image"]);return null!=n&&Ie(t,["image"],ii(n)),t}(i))}(o,n);const i=xe(t,["config"]);return null!=i&&function(e,t){const n=xe(e,["mode"]);void 0!==t&&null!=n&&Ie(t,["parameters","mode"],n);const r=xe(e,["maxPredictions"]);void 0!==t&&null!=r&&Ie(t,["parameters","maxPredictions"],r);const o=xe(e,["confidenceThreshold"]);void 0!==t&&null!=o&&Ie(t,["parameters","confidenceThreshold"],o);const i=xe(e,["maskDilation"]);void 0!==t&&null!=i&&Ie(t,["parameters","maskDilation"],i);const l=xe(e,["binaryColorThreshold"]);void 0!==t&&null!=l&&Ie(t,["parameters","binaryColorThreshold"],l);const a=xe(e,["labels"]);void 0!==t&&null!=a&&Ie(t,["labels"],a)}(i,n),n}function mi(e){const t={},n=xe(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["_self"]);null!=n&&Ie(t,["mask"],ri(n));const r=xe(e,["labels"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["labels"],e)}return t}(e))),Ie(t,["generatedMasks"],e)}return t}function hi(e){const t={},n=xe(e,["languageCode"]);null!=n&&Ie(t,["languageCode"],n);const r=xe(e,["voiceConfig"]);if(null!=r&&Ie(t,["voiceConfig"],r),void 0!==xe(e,["multiSpeakerVoiceConfig"]))throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return t}function gi(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={};if(void 0!==xe(e,["behavior"]))throw new Error("behavior parameter is not supported in Vertex AI.");const n=xe(e,["description"]);null!=n&&Ie(t,["description"],n);const r=xe(e,["name"]);null!=r&&Ie(t,["name"],r);const o=xe(e,["parameters"]);null!=o&&Ie(t,["parameters"],o);const i=xe(e,["parametersJsonSchema"]);null!=i&&Ie(t,["parametersJsonSchema"],i);const l=xe(e,["response"]);null!=l&&Ie(t,["response"],l);const a=xe(e,["responseJsonSchema"]);return null!=a&&Ie(t,["responseJsonSchema"],a),t}(e))),Ie(t,["functionDeclarations"],e)}const r=xe(e,["retrieval"]);null!=r&&Ie(t,["retrieval"],r);const o=xe(e,["googleSearchRetrieval"]);null!=o&&Ie(t,["googleSearchRetrieval"],o);const i=xe(e,["computerUse"]);if(null!=i&&Ie(t,["computerUse"],i),void 0!==xe(e,["fileSearch"]))throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);const a=xe(e,["enterpriseWebSearch"]);null!=a&&Ie(t,["enterpriseWebSearch"],a);const s=xe(e,["googleMaps"]);null!=s&&Ie(t,["googleMaps"],s);const u=xe(e,["googleSearch"]);null!=u&&Ie(t,["googleSearch"],u);const c=xe(e,["urlContext"]);return null!=c&&Ie(t,["urlContext"],c),t}function vi(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","name"],fr(e,r));const o=xe(t,["config"]);return null!=o&&function(e,t){const n=xe(e,["displayName"]);void 0!==t&&null!=n&&Ie(t,["displayName"],n);const r=xe(e,["description"]);void 0!==t&&null!=r&&Ie(t,["description"],r);const o=xe(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&Ie(t,["defaultCheckpointId"],o)}(o,n),n}function yi(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["config"]);return null!=o&&function(e,t){const n=xe(e,["displayName"]);void 0!==t&&null!=n&&Ie(t,["displayName"],n);const r=xe(e,["description"]);void 0!==t&&null!=r&&Ie(t,["description"],r);const o=xe(e,["defaultCheckpointId"]);void 0!==t&&null!=o&&Ie(t,["defaultCheckpointId"],o)}(o,n),n}function _i(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["image"]);null!=o&&Ie(n,["instances[0]","image"],ii(o));const i=xe(t,["upscaleFactor"]);null!=i&&Ie(n,["parameters","upscaleConfig","upscaleFactor"],i);const l=xe(t,["config"]);return null!=l&&function(e,t){const n=xe(e,["outputGcsUri"]);void 0!==t&&null!=n&&Ie(t,["parameters","storageUri"],n);const r=xe(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&Ie(t,["parameters","safetySetting"],r);const o=xe(e,["personGeneration"]);void 0!==t&&null!=o&&Ie(t,["parameters","personGeneration"],o);const i=xe(e,["includeRaiReason"]);void 0!==t&&null!=i&&Ie(t,["parameters","includeRaiReason"],i);const l=xe(e,["outputMimeType"]);void 0!==t&&null!=l&&Ie(t,["parameters","outputOptions","mimeType"],l);const a=xe(e,["outputCompressionQuality"]);void 0!==t&&null!=a&&Ie(t,["parameters","outputOptions","compressionQuality"],a);const s=xe(e,["enhanceInputImage"]);void 0!==t&&null!=s&&Ie(t,["parameters","upscaleConfig","enhanceInputImage"],s);const u=xe(e,["imagePreservationFactor"]);void 0!==t&&null!=u&&Ie(t,["parameters","upscaleConfig","imagePreservationFactor"],u);const c=xe(e,["labels"]);void 0!==t&&null!=c&&Ie(t,["labels"],c);const d=xe(e,["numberOfImages"]);void 0!==t&&null!=d&&Ie(t,["parameters","sampleCount"],d);const p=xe(e,["mode"]);void 0!==t&&null!=p&&Ie(t,["parameters","mode"],p)}(l,n),n}function bi(e){const t={},n=xe(e,["uri"]);null!=n&&Ie(t,["uri"],n);const r=xe(e,["videoBytes"]);null!=r&&Ie(t,["encodedVideo"],Dr(r));const o=xe(e,["mimeType"]);return null!=o&&Ie(t,["encoding"],o),t}function Ei(e){const t={},n=xe(e,["uri"]);null!=n&&Ie(t,["gcsUri"],n);const r=xe(e,["videoBytes"]);null!=r&&Ie(t,["bytesBase64Encoded"],Dr(r));const o=xe(e,["mimeType"]);return null!=o&&Ie(t,["mimeType"],o),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Si="x-goog-api-client",wi=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ti{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=null!==(t=this.clientOptions.apiVersion)&&void 0!==t?t:"v1beta1",r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=null!==(n=this.clientOptions.apiVersion)&&void 0!==n?n:"v1beta",r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:(this.clientOptions.project=void 0,this.clientOptions.location=void 0)}isVertexAI(){var e;return null!==(e=this.clientOptions.vertexai)&&void 0!==e&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw new Error("HTTP options are not correctly set.");const t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="http:"==t.protocol?"ws":"wss",t.toString()}setBaseUrl(e){if(!this.clientOptions.httpOptions)throw new Error("HTTP options are not correctly set.");this.clientOptions.httpOptions.baseUrl=e}constructUrl(e,t,n){const r=[this.getRequestUrlInternal(t)];n&&r.push(this.getBaseResourcePath()),""!==e&&r.push(e);return new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!this.clientOptions.apiKey&&(!!this.clientOptions.vertexai&&(!e.path.startsWith("projects/")&&("GET"!==e.httpMethod||!e.path.startsWith("publishers/google/models"))))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[i,l]of Object.entries(e.queryParams))r.searchParams.append(i,String(l));let o={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(t))"object"==typeof o?n[r]=Object.assign(Object.assign({},n[r]),o):void 0!==o&&(n[r]=o);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,n);r.searchParams.has("alt")&&"sse"===r.searchParams.get("alt")||r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,r){if(t&&t.timeout||r){const n=new AbortController,o=n.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){const e=setTimeout(()=>n.abort(),t.timeout);e&&"function"==typeof e.unref&&e.unref()}r&&r.addEventListener("abort",()=>{n.abort()}),e.signal=o}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return void console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"==typeof e.body&&e.body.length>0)try{const t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(i){return void console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.")}function r(e,t){const n=Object.assign({},e);for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const e=t[o],i=n[o];e&&"object"==typeof e&&!Array.isArray(e)&&i&&"object"==typeof i&&!Array.isArray(i)?n[o]=r(i,e):(i&&e&&typeof i!=typeof e&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${o}". Original type: ${typeof i}, New type: ${typeof e}. Overwriting.`),n[o]=e)}return n}const o=r(n,t);e.body=JSON.stringify(o)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Ai(e),new Hn(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await Ai(e),this.processStreamResponse(e))).catch(e=>{throw e instanceof Error?e:new Error(JSON.stringify(e))})}processStreamResponse(e){var t;return ho(this,arguments,function*(){const n=null===(t=null==e?void 0:e.body)||void 0===t?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!n)throw new Error("Response body is empty");try{let t="";for(;;){const{done:i,value:l}=yield mo(n.read());if(i){if(t.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const a=r.decode(l,{stream:!0});try{const e=JSON.parse(a);if("error"in e){const t=JSON.parse(JSON.stringify(e.error)),n=t.status,r=t.code,o=`got status: ${n}. ${JSON.stringify(e)}`;if(r>=400&&r<600){throw new So({message:o,status:r})}}}catch(o){if("ApiError"===o.name)throw o}t+=a;let s=t.match(wi);for(;s;){const n=s[1];try{const r=new Response(n,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield mo(new Hn(r)),t=t.slice(s[0].length),s=t.match(wi)}catch(o){throw new Error(`exception parsing stream chunk ${n}. ${o}`)}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw new Error(`exception ${e} sending request`)})}getDefaultHeaders(){const e={},t="google-genai-sdk/1.30.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[Si]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[t,r]of Object.entries(e.headers))n.append(t,r);e.timeout&&e.timeout>0&&n.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return"string"==typeof e&&(n=e.replace(/[/\\]+$/,""),n=null!==(t=n.split(/[/\\]/).pop())&&void 0!==t?t:""),n}async uploadFile(e,t){var n;const r={};null!=t&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,i=await o.stat(e);r.sizeBytes=String(i.size);const l=null!==(n=null==t?void 0:t.mimeType)&&void 0!==n?n:i.type;if(void 0===l||""===l)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;const a={file:r},s=this.getFileName(e),u=Ce("upload/v1beta/files",a._url),c=await this.fetchUploadUrl(u,r.sizeBytes,r.mimeType,s,a,null==t?void 0:t.httpOptions);return o.upload(e,c,this)}async uploadFileToFileSearchStore(e,t,n){var r;const o=this.clientOptions.uploader,i=await o.stat(t),l=String(i.size),a=null!==(r=null==n?void 0:n.mimeType)&&void 0!==r?r:i.type;if(void 0===a||""===a)throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const s=`upload/v1beta/${e}:uploadToFileSearchStore`,u=this.getFileName(t),c={};(null==n?void 0:n.customMetadata)&&(c.customMetadata=n.customMetadata),(null==n?void 0:n.chunkingConfig)&&(c.chunkingConfig=n.chunkingConfig);const d=await this.fetchUploadUrl(s,l,a,u,c,null==n?void 0:n.httpOptions);return o.uploadToFileSearchStore(t,d,this)}async downloadFile(e){const t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t,n,r,o,i){var l;let a={};a=i||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},r?{"X-Goog-Upload-File-Name":r}:{})};const s=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:a});if(!s||!(null==s?void 0:s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=null===(l=null==s?void 0:s.headers)||void 0===l?void 0:l["x-goog-upload-url"];if(void 0===u)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ai(e){var t;if(void 0===e)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;r=(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}};const o=JSON.stringify(r);if(n>=400&&n<600){throw new So({message:o,status:n})}throw new Error(o)}}function Ci(e){for(const t of e){if(xi(t))return!0;if("object"==typeof t&&"inputSchema"in t)return!0}return false}function Ii(e){var t;const n=null!==(t=e[Si])&&void 0!==t?t:"";e[Si]=(n+" mcp_used/unknown").trimStart()}function xi(e){return null!==e&&"object"==typeof e&&e instanceof Oi}function ki(e,t=100){return ho(this,arguments,function*(){let n,r=0;for(;r<t;){const t=yield mo(e.listTools({cursor:n}));for(const e of t.tools)yield yield mo(e),r++;if(!t.nextCursor)break;n=t.nextCursor}})}class Oi{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Oi(e,t)}async initialize(){var e,t,n,r;if(this.mcpTools.length>0)return;const o={},i=[];for(const c of this.mcpClients)try{for(var l,a=!0,s=(t=void 0,go(ki(c)));!(e=(l=await s.next()).done);a=!0){r=l.value,a=!1;const e=r;i.push(e);const t=e.name;if(o[t])throw new Error(`Duplicate function name ${t} found in MCP tools. Please ensure function names are unique.`);o[t]=c}}catch(u){t={error:u}}finally{try{a||e||!(n=s.return)||await n.call(s)}finally{if(t)throw t.error}}this.mcpTools=i,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),function(e,t={}){const n=[],r=new Set;for(const o of e){const e=o.name;if(r.has(e))throw new Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);r.add(e);const i=Hr(o,t);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const e=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await e.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return t}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ni{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),i=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(this.apiClient.getDefaultHeaders()),l=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${this.apiClient.getApiKey()}`;let a=()=>{};const s=new Promise(e=>{a=e}),u=e.callbacks,c=(this.apiClient,{onopen:function(){a({})},onmessage:e=>{!async function(e,t,n){const r=new dr;let o;o=n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data),Object.assign(r,o),t(r)}(0,u.onmessage,e)},onerror:null!==(t=null==u?void 0:u.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==u?void 0:u.onclose)&&void 0!==n?n:function(e){}}),d=this.webSocketFactory.create(l,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(i),c);d.connect(),await s;const p={setup:{model:fr(this.apiClient,e.model)}};return d.send(JSON.stringify(p)),new Pi(d,this.apiClient)}}class Pi{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=function(e){const t={},n=xe(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["weightedPrompts"],e)}return t}(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=function(e){const t={},n=xe(e,["musicGenerationConfig"]);return null!=n&&Ie(t,["musicGenerationConfig"],n),t}(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ln.PLAY)}pause(){this.sendPlaybackControl(Ln.PAUSE)}stop(){this.sendPlaybackControl(Ln.STOP)}resetContext(){this.sendPlaybackControl(Ln.RESET_CONTEXT)}close(){this.conn.close()}}class Ri{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new Ni(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,r,o,i,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const a=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion();let u;const c=this.apiClient.getHeaders();e.config&&e.config.tools&&Ci(e.config.tools)&&Ii(c);const d=function(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(c);if(this.apiClient.isVertexAI())u=`${a}/ws/google.cloud.aiplatform.${s}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(d,u);else{const e=this.apiClient.getApiKey();let t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==s&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),u=`${a}/ws/google.ai.generativelanguage.${s}.GenerativeService.${t}?${n}=${e}`}let p=()=>{};const f=new Promise(e=>{p=e}),m=e.callbacks,h=this.apiClient,g={onopen:function(){var e;null===(e=null==m?void 0:m.onopen)||void 0===e||e.call(m),p({})},onmessage:e=>{!async function(e,t,n){const r=new cr;let o;o=n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?(new TextDecoder).decode(n.data):n.data;const i=JSON.parse(o);if(e.isVertexAI()){const e=No(i);Object.assign(r,e)}else{const e=i;Object.assign(r,e)}t(r)}(h,m.onmessage,e)},onerror:null!==(t=null==m?void 0:m.onerror)&&void 0!==t?t:function(e){},onclose:null!==(n=null==m?void 0:m.onclose)&&void 0!==n?n:function(e){}},v=this.webSocketFactory.create(u,function(e){const t={};return e.forEach((e,n)=>{t[n]=e}),t}(d),g);v.connect(),await f;let y=fr(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&y.startsWith("publishers/")){y=`projects/${this.apiClient.getProject()}/locations/${this.apiClient.getLocation()}/`+y}let _={};this.apiClient.isVertexAI()&&void 0===(null===(r=e.config)||void 0===r?void 0:r.responseModalities)&&(void 0===e.config?e.config={responseModalities:[_t.AUDIO]}:e.config.responseModalities=[_t.AUDIO]),(null===(o=e.config)||void 0===o?void 0:o.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=null!==(l=null===(i=e.config)||void 0===i?void 0:i.tools)&&void 0!==l?l:[],E=[];for(const w of b)if(this.isCallableTool(w)){const e=w;E.push(await e.tool())}else E.push(w);E.length>0&&(e.config.tools=E);const S={model:y,config:e.config,callbacks:e.callbacks};return _=this.apiClient.isVertexAI()?function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["setup","model"],fr(e,r));const o=xe(t,["config"]);return null!=o&&Ie(n,["config"],xo(o,n)),n}(this.apiClient,S):function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["setup","model"],fr(e,r));const o=xe(t,["config"]);return null!=o&&Ie(n,["config"],Io(o,n)),n}(this.apiClient,S),delete _.config,v.send(JSON.stringify(_)),new Di(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const Mi={turnComplete:!0};class Di{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let r=[];try{r=Cr(t.turns),e.isVertexAI()||(r=r.map(e=>Do(e)))}catch(n){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses)throw new Error("functionResponses is required.");if(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses],0===n.length)throw new Error("functionResponses is required.");for(const r of n){if("object"!=typeof r||null===r||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Mi),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:Oo(e)}:{realtimeInput:ko(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Li(e){var t,n,r;if(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.disable)return!0;let o=!1;for(const l of null!==(n=null==e?void 0:e.tools)&&void 0!==n?n:[])if(Ui(l)){o=!0;break}if(!o)return!0;const i=null===(r=null==e?void 0:e.automaticFunctionCalling)||void 0===r?void 0:r.maximumRemoteCalls;return!!(i&&(i<0||!Number.isInteger(i))||0==i)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0)}function Ui(e){return"callTool"in e&&"function"==typeof e.callTool}function ji(e){var t;const n=[];return(null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.tools)?(e.config.tools.forEach((e,t)=>{if(Ui(e))return;const r=e;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(t)}),n):n}function Fi(e){var t;return!(null===(t=null==e?void 0:e.automaticFunctionCalling)||void 0===t?void 0:t.ignoreCallHistory)}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hi extends Ae{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,r,o,i;const l=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.tools)||void 0===n?void 0:n.some(e=>Ui(e)))&&void 0!==r&&r}(e)||Li(e.config))return await this.generateContentInternal(l);const a=ji(e);if(a.length>0){const e=a.map(e=>`tools[${e}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${e}.`)}let s,u;const c=Cr(l.contents),d=null!==(r=null===(n=null===(t=l.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let p=0;for(;p<d&&(s=await this.generateContentInternal(l),s.functionCalls&&0!==s.functionCalls.length);){const t=s.candidates[0].content,n=[];for(const r of null!==(i=null===(o=e.config)||void 0===o?void 0:o.tools)&&void 0!==i?i:[])if(Ui(r)){const e=r,t=await e.callTool(s.functionCalls);n.push(...t)}p++,u={role:"user",parts:n},l.contents=Cr(l.contents),l.contents.push(t),l.contents.push(u),Fi(l.config)&&(c.push(t),c.push(u))}return Fi(l.config)&&(s.automaticFunctionCallingHistory=c),s},this.generateContentStream=async e=>{var t,n,r,o,i;if(this.maybeMoveToResponseJsonSchem(e),Li(e.config)){const t=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(t)}const l=ji(e);if(l.length>0){const e=l.map(e=>`tools[${e}]`).join(", ");throw new Error(`Incompatible tools found at ${e}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const a=null===(r=null===(n=null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.toolConfig)||void 0===n?void 0:n.functionCallingConfig)||void 0===r?void 0:r.streamFunctionCallArguments,s=null===(i=null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.automaticFunctionCalling)||void 0===i?void 0:i.disable;if(a&&!s)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n;const r=[];if(null==e?void 0:e.generatedImages)for(const i of e.generatedImages)i&&(null==i?void 0:i.safetyAttributes)&&"Positive Prompt"===(null===(t=null==i?void 0:i.safetyAttributes)||void 0===t?void 0:t.contentType)?n=null==i?void 0:i.safetyAttributes:r.push(i);let o;return o=n?{generatedImages:r,positivePromptSafetyAttributes:n,sdkHttpResponse:e.sdkHttpResponse}:{generatedImages:r,sdkHttpResponse:e.sdkHttpResponse},o}),this.list=async e=>{var t;const n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase){if(null===(t=n.config)||void 0===t?void 0:t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");n.config.filter="labels.tune-type:*"}return new no(jn.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{const t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));const n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)},this.generateVideos=async e=>{var t,n,r,o,i,l;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||((null===(t=e.video)||void 0===t?void 0:t.uri)&&(null===(n=e.video)||void 0===n?void 0:n.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:(null===(o=null===(r=e.source)||void 0===r?void 0:r.video)||void 0===o?void 0:o.uri)&&(null===(l=null===(i=e.source)||void 0===i?void 0:i.video)||void 0===l?void 0:l.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,r;const o=null===(t=e.config)||void 0===t?void 0:t.tools;if(!o)return e;const i=await Promise.all(o.map(async e=>{if(Ui(e)){const t=e;return await t.tool()}return e})),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(l.config.tools=i,e.config&&e.config.tools&&Ci(e.config.tools)){const t=null!==(r=null===(n=e.config.httpOptions)||void 0===n?void 0:n.headers)&&void 0!==r?r:{};let o=Object.assign({},t);0===Object.keys(o).length&&(o=this.apiClient.getDefaultHeaders()),Ii(o),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:o})}return l}async initAfcToolsMap(e){var t,n,r;const o=new Map;for(const i of null!==(n=null===(t=e.config)||void 0===t?void 0:t.tools)&&void 0!==n?n:[])if(Ui(i)){const e=i,t=await e.tool();for(const n of null!==(r=t.functionDeclarations)&&void 0!==r?r:[]){if(!n.name)throw new Error("Function declaration name is required.");if(o.has(n.name))throw new Error(`Duplicate tool declaration name: ${n.name}`);o.set(n.name,e)}}return o}async processAfcStream(e){var t,n,r;const o=null!==(r=null===(n=null===(t=e.config)||void 0===t?void 0:t.automaticFunctionCalling)||void 0===n?void 0:n.maximumRemoteCalls)&&void 0!==r?r:10;let i=!1,l=0;return function(e,t,n){var r,a;return ho(this,arguments,function*(){for(var s,u,c,d;l<o;){i&&(l++,i=!1);const g=yield mo(e.processParamsMaybeAddMcpUsage(n)),v=yield mo(e.generateContentStreamInternal(g)),y=[],_=[];try{for(var p,f=!0,m=(u=void 0,go(v));!(s=(p=yield mo(m.next())).done);f=!0){d=p.value,f=!1;const e=d;if(yield yield mo(e),e.candidates&&(null===(r=e.candidates[0])||void 0===r?void 0:r.content)){_.push(e.candidates[0].content);for(const n of null!==(a=e.candidates[0].content.parts)&&void 0!==a?a:[])if(l<o&&n.functionCall){if(!n.functionCall.name)throw new Error("Function call name was not returned by the model.");if(!t.has(n.functionCall.name))throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${n.functionCall.name}`);{const e=yield mo(t.get(n.functionCall.name).callTool([n.functionCall]));y.push(...e)}}}}}catch(h){u={error:h}}finally{try{f||s||!(c=m.return)||(yield mo(c.call(m)))}finally{if(u)throw u.error}}if(!(y.length>0))break;{i=!0;const e=new qn;e.candidates=[{content:{role:"user",parts:y}}],yield yield mo(e);const t=[];t.push(..._),t.push({role:"user",parts:y});const r=Cr(n.contents).concat(t);n.contents=r}}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=Vo(this.apiClient,e);return l=Ce("{model}:generateContent",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=$o(e),n=new qn;return Object.assign(n,t),n})}{const t=zo(this.apiClient,e);return l=Ce("{model}:generateContent",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=Bo(e),n=new qn;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=Vo(this.apiClient,e);l=Ce("{model}:streamGenerateContent?alt=sse",r._url),a=r._query,delete r._url,delete r._query;return i=this.apiClient.requestStream({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}),i.then(function(e){return ho(this,arguments,function*(){var t,n,r,o;try{for(var i,l=!0,a=go(e);!(t=(i=yield mo(a.next())).done);l=!0){o=i.value,l=!1;const e=o,t=$o(yield mo(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new qn;Object.assign(n,t),yield yield mo(n)}}catch(s){n={error:s}}finally{try{l||t||!(r=a.return)||(yield mo(r.call(a)))}finally{if(n)throw n.error}}})})}{const t=zo(this.apiClient,e);l=Ce("{model}:streamGenerateContent?alt=sse",t._url),a=t._query,delete t._url,delete t._query;return i=this.apiClient.requestStream({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}),i.then(function(e){return ho(this,arguments,function*(){var t,n,r,o;try{for(var i,l=!0,a=go(e);!(t=(i=yield mo(a.next())).done);l=!0){o=i.value,l=!1;const e=o,t=Bo(yield mo(e.json()));t.sdkHttpResponse={headers:e.headers};const n=new qn;Object.assign(n,t),yield yield mo(n)}}catch(s){n={error:s}}finally{try{l||t||!(r=a.return)||(yield mo(r.call(a)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=Ho(this.apiClient,e);return l=Ce("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["predictions[]","embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>Mo(e))),Ie(t,["embeddings"],e)}const o=xe(e,["metadata"]);return null!=o&&Ie(t,["metadata"],o),t}(e),n=new Gn;return Object.assign(n,t),n})}{const t=Fo(this.apiClient,e);return l=Ce("{model}:batchEmbedContents",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["embeddings"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["embeddings"],e)}const o=xe(e,["metadata"]);return null!=o&&Ie(t,["metadata"],o),t}(e),n=new Gn;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=Yo(this.apiClient,e);return l=Ce("{model}:predict",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>ni(e))),Ie(t,["generatedImages"],e)}const o=xe(e,["positivePromptSafetyAttributes"]);return null!=o&&Ie(t,["positivePromptSafetyAttributes"],pi(o)),t}(e),n=new zn;return Object.assign(n,t),n})}{const t=Jo(this.apiClient,e);return l=Ce("{model}:predict",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=Wo(e),n=new zn;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const l=jo(this.apiClient,e);return o=Ce("{model}:predict",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>ni(e))),Ie(t,["generatedImages"],e)}return t}(e),n=new Vn;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const l=_i(this.apiClient,e);return o=Ce("{model}:predict",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["predictions"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>ni(e))),Ie(t,["generatedImages"],e)}return t}(e),n=new Bn;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const l=ci(this.apiClient,e);return o=Ce("{model}:predict",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=xe(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>ni(e))),Ie(t,["generatedImages"],e)}return t}(e),n=new $n;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const l=fi(this.apiClient,e);return o=Ce("{model}:predict",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=mi(e),n=new Jn;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["model"]);return null!=r&&Ie(n,["_url","name"],fr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>ui(e))}{const t=function(e,t){const n={},r=xe(t,["model"]);return null!=r&&Ie(n,["_url","name"],fr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>si(e))}}async listInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=ai(this.apiClient,e);return l=Ce("{models_url}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["_self"]);if(null!=o){let e=jr(o);Array.isArray(e)&&(e=e.map(e=>ui(e))),Ie(t,["models"],e)}return t}(e),n=new Yn;return Object.assign(n,t),n})}{const t=li(this.apiClient,e);return l=Ce("{models_url}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["_self"]);if(null!=o){let e=jr(o);Array.isArray(e)&&(e=e.map(e=>si(e))),Ie(t,["models"],e)}return t}(e),n=new Yn;return Object.assign(n,t),n})}}async update(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=yi(this.apiClient,e);return l=Ce("{model}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"PATCH",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>ui(e))}{const t=vi(this.apiClient,e);return l=Ce("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>si(e))}}async delete(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["model"]);return null!=r&&Ie(n,["_url","name"],fr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);return null!=n&&Ie(t,["sdkHttpResponse"],n),t}(e),n=new Wn;return Object.assign(n,t),n})}{const t=function(e,t){const n={},r=xe(t,["model"]);return null!=r&&Ie(n,["_url","name"],fr(e,r)),n}(this.apiClient,e);return l=Ce("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);return null!=n&&Ie(t,["sdkHttpResponse"],n),t}(e),n=new Wn;return Object.assign(n,t),n})}}async countTokens(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let e=Cr(o);Array.isArray(e)&&(e=e.map(e=>e)),Ie(n,["contents"],e)}const i=xe(t,["config"]);return null!=i&&Lo(i,n),n}(this.apiClient,e);return l=Ce("{model}:countTokens",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["totalTokens"]);return null!=r&&Ie(t,["totalTokens"],r),t}(e),n=new Kn;return Object.assign(n,t),n})}{const t=Uo(this.apiClient,e);return l=Ce("{model}:countTokens",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["totalTokens"]);null!=r&&Ie(t,["totalTokens"],r);const o=xe(e,["cachedContentTokenCount"]);return null!=o&&Ie(t,["cachedContentTokenCount"],o),t}(e),n=new Kn;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const l=function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["_url","model"],fr(e,r));const o=xe(t,["contents"]);if(null!=o){let e=Cr(o);Array.isArray(e)&&(e=e.map(e=>e)),Ie(n,["contents"],e)}return n}(this.apiClient,e);return o=Ce("{model}:computeTokens",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["tokensInfo"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["tokensInfo"],e)}return t}(e),n=new Qn;return Object.assign(n,t),n})}throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=ti(this.apiClient,e);return l=Ce("{model}:predictLongRunning",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i.then(e=>{const t=Zo(e),n=new Xn;return Object.assign(n,t),n})}{const t=ei(this.apiClient,e);return l=Ce("{model}:predictLongRunning",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i.then(e=>{const t=Xo(e),n=new Xn;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qi extends Ae{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const e=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:e,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}{const e=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:e,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=xe(e,["operationName"]);return null!=n&&Ie(t,["_url","operationName"],n),t}(e);return l=Ce("{operationName}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),i}{const t=function(e){const t={},n=xe(e,["operationName"]);return null!=n&&Ie(t,["_url","operationName"],n),t}(e);return l=Ce("{operationName}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json()),i}}async fetchPredictVideosOperationInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const l=function(e){const t={},n=xe(e,["operationName"]);null!=n&&Ie(t,["operationName"],n);const r=xe(e,["resourceName"]);return null!=r&&Ie(t,["_url","resourceName"],r),t}(e);return o=Ce("{resourceName}:fetchPredictOperation",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r}throw new Error("This method is only supported by the Vertex AI.")}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gi(e){const t={},n=xe(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["mediaResolution"]);null!=n&&Ie(t,["mediaResolution"],n);const r=xe(e,["codeExecutionResult"]);null!=r&&Ie(t,["codeExecutionResult"],r);const o=xe(e,["executableCode"]);null!=o&&Ie(t,["executableCode"],o);const i=xe(e,["fileData"]);null!=i&&Ie(t,["fileData"],function(e){const t={};if(void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const n=xe(e,["fileUri"]);null!=n&&Ie(t,["fileUri"],n);const r=xe(e,["mimeType"]);null!=r&&Ie(t,["mimeType"],r);return t}(i));const l=xe(e,["functionCall"]);null!=l&&Ie(t,["functionCall"],function(e){const t={},n=xe(e,["id"]);null!=n&&Ie(t,["id"],n);const r=xe(e,["args"]);null!=r&&Ie(t,["args"],r);const o=xe(e,["name"]);null!=o&&Ie(t,["name"],o);if(void 0!==xe(e,["partialArgs"]))throw new Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==xe(e,["willContinue"]))throw new Error("willContinue parameter is not supported in Gemini API.");return t}(l));const a=xe(e,["functionResponse"]);null!=a&&Ie(t,["functionResponse"],a);const s=xe(e,["inlineData"]);null!=s&&Ie(t,["inlineData"],function(e){const t={},n=xe(e,["data"]);if(null!=n&&Ie(t,["data"],n),void 0!==xe(e,["displayName"]))throw new Error("displayName parameter is not supported in Gemini API.");const r=xe(e,["mimeType"]);return null!=r&&Ie(t,["mimeType"],r),t}(s));const u=xe(e,["text"]);null!=u&&Ie(t,["text"],u);const c=xe(e,["thought"]);null!=c&&Ie(t,["thought"],c);const d=xe(e,["thoughtSignature"]);null!=d&&Ie(t,["thoughtSignature"],d);const p=xe(e,["videoMetadata"]);null!=p&&Ie(t,["videoMetadata"],p);return t}(e))),Ie(t,["parts"],e)}const r=xe(e,["role"]);return null!=r&&Ie(t,["role"],r),t}function zi(e,t,n){const r=xe(t,["expireTime"]);void 0!==n&&null!=r&&Ie(n,["expireTime"],r);const o=xe(t,["newSessionExpireTime"]);void 0!==n&&null!=o&&Ie(n,["newSessionExpireTime"],o);const i=xe(t,["uses"]);void 0!==n&&null!=i&&Ie(n,["uses"],i);const l=xe(t,["liveConnectConstraints"]);void 0!==n&&null!=l&&Ie(n,["bidiGenerateContentSetup"],function(e,t){const n={},r=xe(t,["model"]);null!=r&&Ie(n,["setup","model"],fr(e,r));const o=xe(t,["config"]);null!=o&&Ie(n,["config"],function(e,t){const n={},r=xe(e,["generationConfig"]);void 0!==t&&null!=r&&Ie(t,["setup","generationConfig"],r);const o=xe(e,["responseModalities"]);void 0!==t&&null!=o&&Ie(t,["setup","generationConfig","responseModalities"],o);const i=xe(e,["temperature"]);void 0!==t&&null!=i&&Ie(t,["setup","generationConfig","temperature"],i);const l=xe(e,["topP"]);void 0!==t&&null!=l&&Ie(t,["setup","generationConfig","topP"],l);const a=xe(e,["topK"]);void 0!==t&&null!=a&&Ie(t,["setup","generationConfig","topK"],a);const s=xe(e,["maxOutputTokens"]);void 0!==t&&null!=s&&Ie(t,["setup","generationConfig","maxOutputTokens"],s);const u=xe(e,["mediaResolution"]);void 0!==t&&null!=u&&Ie(t,["setup","generationConfig","mediaResolution"],u);const c=xe(e,["seed"]);void 0!==t&&null!=c&&Ie(t,["setup","generationConfig","seed"],c);const d=xe(e,["speechConfig"]);void 0!==t&&null!=d&&Ie(t,["setup","generationConfig","speechConfig"],Or(d));const p=xe(e,["thinkingConfig"]);void 0!==t&&null!=p&&Ie(t,["setup","generationConfig","thinkingConfig"],p);const f=xe(e,["enableAffectiveDialog"]);void 0!==t&&null!=f&&Ie(t,["setup","generationConfig","enableAffectiveDialog"],f);const m=xe(e,["systemInstruction"]);void 0!==t&&null!=m&&Ie(t,["setup","systemInstruction"],Gi(Tr(m)));const h=xe(e,["tools"]);if(void 0!==t&&null!=h){let e=Pr(h);Array.isArray(e)&&(e=e.map(e=>function(e){const t={},n=xe(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["functionDeclarations"],e)}if(void 0!==xe(e,["retrieval"]))throw new Error("retrieval parameter is not supported in Gemini API.");const r=xe(e,["googleSearchRetrieval"]);null!=r&&Ie(t,["googleSearchRetrieval"],r);const o=xe(e,["computerUse"]);null!=o&&Ie(t,["computerUse"],o);const i=xe(e,["fileSearch"]);null!=i&&Ie(t,["fileSearch"],i);const l=xe(e,["codeExecution"]);null!=l&&Ie(t,["codeExecution"],l);if(void 0!==xe(e,["enterpriseWebSearch"]))throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=xe(e,["googleMaps"]);null!=a&&Ie(t,["googleMaps"],function(e){const t={};if(void 0!==xe(e,["authConfig"]))throw new Error("authConfig parameter is not supported in Gemini API.");const n=xe(e,["enableWidget"]);null!=n&&Ie(t,["enableWidget"],n);return t}(a));const s=xe(e,["googleSearch"]);null!=s&&Ie(t,["googleSearch"],function(e){const t={};if(void 0!==xe(e,["excludeDomains"]))throw new Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==xe(e,["blockingConfidence"]))throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=xe(e,["timeRangeFilter"]);null!=n&&Ie(t,["timeRangeFilter"],n);return t}(s));const u=xe(e,["urlContext"]);null!=u&&Ie(t,["urlContext"],u);return t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(Nr(e)))),Ie(t,["setup","tools"],e)}const g=xe(e,["sessionResumption"]);void 0!==t&&null!=g&&Ie(t,["setup","sessionResumption"],function(e){const t={},n=xe(e,["handle"]);null!=n&&Ie(t,["handle"],n);if(void 0!==xe(e,["transparent"]))throw new Error("transparent parameter is not supported in Gemini API.");return t}(g));const v=xe(e,["inputAudioTranscription"]);void 0!==t&&null!=v&&Ie(t,["setup","inputAudioTranscription"],v);const y=xe(e,["outputAudioTranscription"]);void 0!==t&&null!=y&&Ie(t,["setup","outputAudioTranscription"],y);const _=xe(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&Ie(t,["setup","realtimeInputConfig"],_);const b=xe(e,["contextWindowCompression"]);void 0!==t&&null!=b&&Ie(t,["setup","contextWindowCompression"],b);const E=xe(e,["proactivity"]);void 0!==t&&null!=E&&Ie(t,["setup","proactivity"],E);return n}(o,n));return n}(e,l));const a=xe(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&Ie(n,["fieldMask"],a),{}}function Vi(e,t){let n=null;const r=e.bidiGenerateContentSetup;if("object"==typeof r&&null!==r&&"setup"in r){const t=r.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==r&&delete e.bidiGenerateContentSetup;const o=e.fieldMask;if(n){const r=function(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if("object"==typeof r&&null!=r&&Object.keys(r).length>0){const e=Object.keys(r).map(e=>`${n}.${e}`);t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&0===(null==t?void 0:t.lockAdditionalFields.length))r?e.fieldMask=r:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==o&&Array.isArray(o)&&o.length>0){const t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let n=[];o.length>0&&(n=o.map(e=>t.includes(e)?`generationConfig.${e}`:e));const i=[];r&&i.push(r),n.length>0&&i.push(...n),i.length>0?e.fieldMask=i.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==o&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}class Bi extends Ae{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=function(e,t){const n={},r=xe(t,["config"]);return null!=r&&Ie(n,["config"],zi(e,r,n)),n}(this.apiClient,e);o=Ce("auth_tokens",l._url),i=l._query,delete l.config,delete l._url,delete l._query;const a=Vi(l,e.config);return r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $i(e){const t={},n=xe(e,["config"]);return null!=n&&function(e,t){const n=xe(e,["displayName"]);void 0!==t&&null!=n&&Ie(t,["displayName"],n)}(n,t),t}function Ji(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["_url","name"],n);const r=xe(e,["config"]);return null!=r&&function(e,t){const n=xe(e,["force"]);void 0!==t&&null!=n&&Ie(t,["_query","force"],n)}(r,t),t}function Yi(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["name"],n);const r=xe(e,["metadata"]);null!=r&&Ie(t,["metadata"],r);const o=xe(e,["done"]);null!=o&&Ie(t,["done"],o);const i=xe(e,["error"]);null!=i&&Ie(t,["error"],i);const l=xe(e,["response"]);return null!=l&&Ie(t,["response"],function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["parent"]);null!=r&&Ie(t,["parent"],r);const o=xe(e,["documentName"]);null!=o&&Ie(t,["documentName"],o);return t}(l)),t}function Wi(e){const t={},n=xe(e,["fileSearchStoreName"]);null!=n&&Ie(t,["_url","file_search_store_name"],n);const r=xe(e,["fileName"]);null!=r&&Ie(t,["fileName"],r);const o=xe(e,["config"]);return null!=o&&function(e,t){const n=xe(e,["customMetadata"]);if(void 0!==t&&null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["customMetadata"],e)}const r=xe(e,["chunkingConfig"]);void 0!==t&&null!=r&&Ie(t,["chunkingConfig"],r)}(o,t),t}function Ki(e){const t={},n=xe(e,["config"]);return null!=n&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r)}(n,t),t}function Qi(e){const t={},n=xe(e,["fileSearchStoreName"]);null!=n&&Ie(t,["_url","file_search_store_name"],n);const r=xe(e,["config"]);return null!=r&&function(e,t){const n=xe(e,["mimeType"]);void 0!==t&&null!=n&&Ie(t,["mimeType"],n);const r=xe(e,["displayName"]);void 0!==t&&null!=r&&Ie(t,["displayName"],r);const o=xe(e,["customMetadata"]);if(void 0!==t&&null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["customMetadata"],e)}const i=xe(e,["chunkingConfig"]);void 0!==t&&null!=i&&Ie(t,["chunkingConfig"],i)}(r,t),t}function Xi(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["_url","name"],n);const r=xe(e,["config"]);return null!=r&&
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function(e,t){const n=xe(e,["force"]);void 0!==t&&null!=n&&Ie(t,["_query","force"],n)}(r,t),t}function Zi(e){const t={},n=xe(e,["parent"]);null!=n&&Ie(t,["_url","parent"],n);const r=xe(e,["config"]);return null!=r&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r)}(r,t),t}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class el extends Ae{constructor(e){super(),this.apiClient=e,this.list=async e=>new no(jn.PAGED_ITEM_DOCUMENTS,t=>this.listInternal({parent:e.parent,config:t.config}),await this.listInternal(e),e)}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","name"],n),t}(e);return o=Ce("{name}",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Xi(e);r=Ce("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Zi(e);return o=Ce("{parent}/documents",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["documents"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["documents"],e)}return t}(e),n=new nr;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tl extends Ae{constructor(e,t=new el(e)){super(),this.apiClient=e,this.documents=t,this.list=async(e={})=>new no(jn.PAGED_ITEM_FILE_SEARCH_STORES,e=>this.listInternal(e),await this.listInternal(e),e)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$i(e);return o=Ce("fileSearchStores",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async get(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","name"],n),t}(e);return o=Ce("{name}",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>e)}}async delete(e){var t,n;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=Ji(e);r=Ce("{name}",i._url),o=i._query,delete i._url,delete i._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}}async listInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Ki(e);return o=Ce("fileSearchStores",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["fileSearchStores"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["fileSearchStores"],e)}return t}(e),n=new rr;return Object.assign(n,t),n})}}async uploadToFileSearchStoreInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Qi(e);return o=Ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);return null!=n&&Ie(t,["sdkHttpResponse"],n),t}(e),n=new or;return Object.assign(n,t),n})}}async importFile(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Wi(e);return o=Ce("{file_search_store_name}:importFile",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json()),r.then(e=>{const t=Yi(e),n=new ir;return Object.assign(n,t),n})}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nl(e,t){const n={},r=xe(e,["baseModel"]);null!=r&&Ie(n,["baseModel"],r);const o=xe(e,["preTunedModel"]);null!=o&&Ie(n,["preTunedModel"],o);const i=xe(e,["trainingDataset"]);null!=i&&function(e){const t={};if(void 0!==xe(e,["gcsUri"]))throw new Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==xe(e,["vertexDatasetResource"]))throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=xe(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e)),Ie(t,["examples","examples"],e)}}(i);const l=xe(e,["config"]);return null!=l&&function(e,t){const n={};if(void 0!==xe(e,["validationDataset"]))throw new Error("validationDataset parameter is not supported in Gemini API.");const r=xe(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=r&&Ie(t,["displayName"],r),void 0!==xe(e,["description"]))throw new Error("description parameter is not supported in Gemini API.");const o=xe(e,["epochCount"]);void 0!==t&&null!=o&&Ie(t,["tuningTask","hyperparameters","epochCount"],o);const i=xe(e,["learningRateMultiplier"]);if(null!=i&&Ie(n,["tuningTask","hyperparameters","learningRateMultiplier"],i),void 0!==xe(e,["exportLastCheckpointOnly"]))throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==xe(e,["preTunedModelCheckpointId"]))throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==xe(e,["adapterSize"]))throw new Error("adapterSize parameter is not supported in Gemini API.");const l=xe(e,["batchSize"]);void 0!==t&&null!=l&&Ie(t,["tuningTask","hyperparameters","batchSize"],l);const a=xe(e,["learningRate"]);if(void 0!==t&&null!=a&&Ie(t,["tuningTask","hyperparameters","learningRate"],a),void 0!==xe(e,["labels"]))throw new Error("labels parameter is not supported in Gemini API.");if(void 0!==xe(e,["beta"]))throw new Error("beta parameter is not supported in Gemini API.")}(l,n),n}function rl(e,t){const n={},r=xe(e,["baseModel"]);null!=r&&Ie(n,["baseModel"],r);const o=xe(e,["preTunedModel"]);null!=o&&Ie(n,["preTunedModel"],o);const i=xe(e,["trainingDataset"]);null!=i&&function(e,t,n){const r={};let o=xe(n,["config","method"]);void 0===o&&(o="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===o){const n=xe(e,["gcsUri"]);void 0!==t&&null!=n&&Ie(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===o){const n=xe(e,["gcsUri"]);void 0!==t&&null!=n&&Ie(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}let i=xe(n,["config","method"]);void 0===i&&(i="SUPERVISED_FINE_TUNING");if("SUPERVISED_FINE_TUNING"===i){const n=xe(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&Ie(t,["supervisedTuningSpec","trainingDatasetUri"],n)}else if("PREFERENCE_TUNING"===i){const n=xe(e,["vertexDatasetResource"]);void 0!==t&&null!=n&&Ie(t,["preferenceOptimizationSpec","trainingDatasetUri"],n)}if(void 0!==xe(e,["examples"]))throw new Error("examples parameter is not supported in Vertex AI.")}(i,n,t);const l=xe(e,["config"]);return null!=l&&function(e,t,n){let r=xe(n,["config","method"]);if(void 0===r&&(r="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===r){const n=xe(e,["validationDataset"]);void 0!==t&&null!=n&&Ie(t,["supervisedTuningSpec"],sl(n))}else if("PREFERENCE_TUNING"===r){const n=xe(e,["validationDataset"]);void 0!==t&&null!=n&&Ie(t,["preferenceOptimizationSpec"],sl(n))}const o=xe(e,["tunedModelDisplayName"]);void 0!==t&&null!=o&&Ie(t,["tunedModelDisplayName"],o);const i=xe(e,["description"]);void 0!==t&&null!=i&&Ie(t,["description"],i);let l=xe(n,["config","method"]);if(void 0===l&&(l="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===l){const n=xe(e,["epochCount"]);void 0!==t&&null!=n&&Ie(t,["supervisedTuningSpec","hyperParameters","epochCount"],n)}else if("PREFERENCE_TUNING"===l){const n=xe(e,["epochCount"]);void 0!==t&&null!=n&&Ie(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],n)}let a=xe(n,["config","method"]);if(void 0===a&&(a="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===a){const n=xe(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&Ie(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],n)}else if("PREFERENCE_TUNING"===a){const n=xe(e,["learningRateMultiplier"]);void 0!==t&&null!=n&&Ie(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],n)}let s=xe(n,["config","method"]);if(void 0===s&&(s="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===s){const n=xe(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&Ie(t,["supervisedTuningSpec","exportLastCheckpointOnly"],n)}else if("PREFERENCE_TUNING"===s){const n=xe(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=n&&Ie(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],n)}let u=xe(n,["config","method"]);if(void 0===u&&(u="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===u){const n=xe(e,["adapterSize"]);void 0!==t&&null!=n&&Ie(t,["supervisedTuningSpec","hyperParameters","adapterSize"],n)}else if("PREFERENCE_TUNING"===u){const n=xe(e,["adapterSize"]);void 0!==t&&null!=n&&Ie(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],n)}if(void 0!==xe(e,["batchSize"]))throw new Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==xe(e,["learningRate"]))throw new Error("learningRate parameter is not supported in Vertex AI.");const c=xe(e,["labels"]);void 0!==t&&null!=c&&Ie(t,["labels"],c);const d=xe(e,["beta"]);void 0!==t&&null!=d&&Ie(t,["preferenceOptimizationSpec","hyperParameters","beta"],d)}(l,n,t),n}function ol(e,t){const n={},r=xe(e,["config"]);return null!=r&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r);const o=xe(e,["filter"]);void 0!==t&&null!=o&&Ie(t,["_query","filter"],o)}(r,n),n}function il(e,t){const n={},r=xe(e,["config"]);return null!=r&&function(e,t){const n=xe(e,["pageSize"]);void 0!==t&&null!=n&&Ie(t,["_query","pageSize"],n);const r=xe(e,["pageToken"]);void 0!==t&&null!=r&&Ie(t,["_query","pageToken"],r);const o=xe(e,["filter"]);void 0!==t&&null!=o&&Ie(t,["_query","filter"],o)}(r,n),n}function ll(e,t){const n={},r=xe(e,["sdkHttpResponse"]);null!=r&&Ie(n,["sdkHttpResponse"],r);const o=xe(e,["name"]);null!=o&&Ie(n,["name"],o);const i=xe(e,["state"]);null!=i&&Ie(n,["state"],Mr(i));const l=xe(e,["createTime"]);null!=l&&Ie(n,["createTime"],l);const a=xe(e,["tuningTask","startTime"]);null!=a&&Ie(n,["startTime"],a);const s=xe(e,["tuningTask","completeTime"]);null!=s&&Ie(n,["endTime"],s);const u=xe(e,["updateTime"]);null!=u&&Ie(n,["updateTime"],u);const c=xe(e,["description"]);null!=c&&Ie(n,["description"],c);const d=xe(e,["baseModel"]);null!=d&&Ie(n,["baseModel"],d);const p=xe(e,["_self"]);return null!=p&&Ie(n,["tunedModel"],function(e){const t={},n=xe(e,["name"]);null!=n&&Ie(t,["model"],n);const r=xe(e,["name"]);return null!=r&&Ie(t,["endpoint"],r),t}(p)),n}function al(e,t){const n={},r=xe(e,["sdkHttpResponse"]);null!=r&&Ie(n,["sdkHttpResponse"],r);const o=xe(e,["name"]);null!=o&&Ie(n,["name"],o);const i=xe(e,["state"]);null!=i&&Ie(n,["state"],Mr(i));const l=xe(e,["createTime"]);null!=l&&Ie(n,["createTime"],l);const a=xe(e,["startTime"]);null!=a&&Ie(n,["startTime"],a);const s=xe(e,["endTime"]);null!=s&&Ie(n,["endTime"],s);const u=xe(e,["updateTime"]);null!=u&&Ie(n,["updateTime"],u);const c=xe(e,["error"]);null!=c&&Ie(n,["error"],c);const d=xe(e,["description"]);null!=d&&Ie(n,["description"],d);const p=xe(e,["baseModel"]);null!=p&&Ie(n,["baseModel"],p);const f=xe(e,["tunedModel"]);null!=f&&Ie(n,["tunedModel"],f);const m=xe(e,["preTunedModel"]);null!=m&&Ie(n,["preTunedModel"],m);const h=xe(e,["supervisedTuningSpec"]);null!=h&&Ie(n,["supervisedTuningSpec"],h);const g=xe(e,["preferenceOptimizationSpec"]);null!=g&&Ie(n,["preferenceOptimizationSpec"],g);const v=xe(e,["tuningDataStats"]);null!=v&&Ie(n,["tuningDataStats"],v);const y=xe(e,["encryptionSpec"]);null!=y&&Ie(n,["encryptionSpec"],y);const _=xe(e,["partnerModelTuningSpec"]);null!=_&&Ie(n,["partnerModelTuningSpec"],_);const b=xe(e,["customBaseModel"]);null!=b&&Ie(n,["customBaseModel"],b);const E=xe(e,["experiment"]);null!=E&&Ie(n,["experiment"],E);const S=xe(e,["labels"]);null!=S&&Ie(n,["labels"],S);const w=xe(e,["outputUri"]);null!=w&&Ie(n,["outputUri"],w);const T=xe(e,["pipelineJob"]);null!=T&&Ie(n,["pipelineJob"],T);const A=xe(e,["serviceAccount"]);null!=A&&Ie(n,["serviceAccount"],A);const C=xe(e,["tunedModelDisplayName"]);null!=C&&Ie(n,["tunedModelDisplayName"],C);const I=xe(e,["veoTuningSpec"]);return null!=I&&Ie(n,["veoTuningSpec"],I),n}function sl(e,t){const n={},r=xe(e,["gcsUri"]);null!=r&&Ie(n,["validationDatasetUri"],r);const o=xe(e,["vertexDatasetResource"]);return null!=o&&Ie(n,["validationDatasetUri"],o),n}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ul extends Ae{constructor(e){super(),this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new no(jn.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.tune=async e=>{var t;if(this.apiClient.isVertexAI()){if(e.baseModel.startsWith("projects/")){const n={tunedModelName:e.baseModel};(null===(t=e.config)||void 0===t?void 0:t.preTunedModelCheckpointId)&&(n.checkpointId=e.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},e),{preTunedModel:n});return r.baseModel=void 0,await this.tuneInternal(r)}{const t=Object.assign({},e);return await this.tuneInternal(t)}}{const t=Object.assign({},e),n=await this.tuneMldevInternal(t);let r="";void 0!==n.metadata&&void 0!==n.metadata.tunedModel?r=n.metadata.tunedModel:void 0!==n.name&&n.name.includes("/operations/")&&(r=n.name.split("/operations/")[0]);return{name:r,state:It.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","name"],n),t}(e);return l=Ce("{name}",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>al(e))}{const t=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","name"],n),t}(e);return l=Ce("{name}",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>ll(e))}}async listInternal(e){var t,n,r,o;let i,l="",a={};if(this.apiClient.isVertexAI()){const r=il(e);return l=Ce("tuningJobs",r._url),a=r._query,delete r._url,delete r._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["tuningJobs"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>al(e))),Ie(t,["tuningJobs"],e)}return t}(e),n=new Zn;return Object.assign(n,t),n})}{const t=ol(e);return l=Ce("tunedModels",t._url),a=t._query,delete t._url,delete t._query,i=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),i.then(e=>{const t=function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["nextPageToken"]);null!=r&&Ie(t,["nextPageToken"],r);const o=xe(e,["tunedModels"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>ll(e))),Ie(t,["tuningJobs"],e)}return t}(e),n=new Zn;return Object.assign(n,t),n})}}async cancel(e){var t,n,r,o;let i="",l={};if(this.apiClient.isVertexAI()){const r=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","name"],n),t}(e);i=Ce("{name}:cancel",r._url),l=r._query,delete r._url,delete r._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal})}else{const t=function(e){const t={},n=xe(e,["name"]);return null!=n&&Ie(t,["_url","name"],n),t}(e);i=Ce("{name}:cancel",t._url),l=t._query,delete t._url,delete t._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null===(r=e.config)||void 0===r?void 0:r.httpOptions,abortSignal:null===(o=e.config)||void 0===o?void 0:o.abortSignal})}}async tuneInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI()){const l=rl(e,e);return o=Ce("tuningJobs",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>al(e))}throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let r,o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=nl(e);return o=Ce("tunedModels",l._url),i=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null===(t=e.config)||void 0===t?void 0:t.httpOptions,abortSignal:null===(n=e.config)||void 0===n?void 0:n.abortSignal}).then(e=>e.json().then(t=>{const n=t;return n.sdkHttpResponse={headers:e.headers},n})),r.then(e=>function(e){const t={},n=xe(e,["sdkHttpResponse"]);null!=n&&Ie(t,["sdkHttpResponse"],n);const r=xe(e,["name"]);null!=r&&Ie(t,["name"],r);const o=xe(e,["metadata"]);null!=o&&Ie(t,["metadata"],o);const i=xe(e,["done"]);null!=i&&Ie(t,["done"],i);const l=xe(e,["error"]);return null!=l&&Ie(t,["error"],l),t}(e))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cl{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dl="x-goog-upload-status";async function pl(e,t,n){var r,o;let i=0,l=0,a=new Hn(new Response),s="upload";for(i=e.size;l<i;){const u=Math.min(8388608,i-l),c=e.slice(l,l+u);l+u>=i&&(s+=", finalize");let d=0,p=1e3;for(;d<3&&(a=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":s,"X-Goog-Upload-Offset":String(l),"Content-Length":String(u)}}}),!(null===(r=null==a?void 0:a.headers)||void 0===r?void 0:r[dl]));)d++,await fl(p),p*=2;if(l+=u,"active"!==(null===(o=null==a?void 0:a.headers)||void 0===o?void 0:o[dl]))break;if(i<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}function fl(e){return new Promise(t=>setTimeout(t,e))}class ml{async upload(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const o=await pl(e,t,n),i=await(null==o?void 0:o.json());if("final"!==(null===(r=null==o?void 0:o.headers)||void 0===r?void 0:r[dl]))throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}(e,t,n)}async uploadToFileSearchStore(e,t,n){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e,t,n){var r;const o=await pl(e,t,n),i=await(null==o?void 0:o.json());if("final"!==(null===(r=null==o?void 0:o.headers)||void 0===r?void 0:r[dl]))throw new Error("Failed to upload file: Upload status is not finalized.");const l=Me(i),a=new pr;return Object.assign(a,l),a}(e,t,n)}async stat(e){if("string"==typeof e)throw new Error("File path is not supported in browser uploader.");return await async function(e){return{size:e.size,type:e.type}}(e)}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hl{create(e,t,n){return new gl(e,t,n)}}class gl{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw new Error("WebSocket is not connected");this.ws.close()}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vl="x-goog-api-key";class yl{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(null===e.get(vl)){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(vl,this.apiKey)}}}
/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _l=new class{constructor(e){var t;if(null==e.apiKey)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!==(t=e.vertexai)&&void 0!==t&&t,this.apiKey=e.apiKey;const n=Te(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const r=new yl(this.apiKey);this.apiClient=new Ti({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:"gl-node/web",uploader:new ml,downloader:new cl}),this.models=new Hi(this.apiClient),this.live=new Ri(this.apiClient,r,new hl),this.batches=new ro(this.apiClient),this.chats=new bo(this.models,this.apiClient),this.caches=new po(this.apiClient),this.files=new To(this.apiClient),this.operations=new qi(this.apiClient),this.authTokens=new Bi(this.apiClient),this.tunings=new ul(this.apiClient),this.fileSearchStores=new tl(this.apiClient)}}({apiKey:"AIzaSyAVlX-ManTbUehU79YU2If1dy9Cz1YHskY"}),bl="gemini-2.5-flash-image",El=async(e,t)=>{try{const n=`\n       ():\n      ${e.map(e=>"dialogue"===e.type?`${e.speaker}: "${e.text}"`:"choice"===e.type?`> : ${e.text}`:`(): ${e.text}`).slice(-12).join("\n\n")}\n      \n      ---\n      :\n      ${t}\n    `,r=(await _l.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{systemInstruction:'\n -   (Dungeon Master)   " ".\n , , . \n\n :    ,   .\n   3 .     .\n-  I: \',   .\n-  II:  ,  .\n-  III:   \' ().\n\n:\n1.   .  NPC  HOUSE_NPCS.\n2.     ( ),    (  ).\n3.  is_game_over = true, \'    game_over_reason.\n\n JSON :\n{\n  "narrative": "   . (2-3 ).",\n  "speaker": "\' NPC.     - null.",\n  "dialogue": "  .     - null.",\n  "visual_description": "     ().",\n  "options": [\n    {"id": "1", "text": "..."}\n  ],\n  "health_change": number,\n  "influence_change": number,\n  "is_game_over": boolean,\n  "game_over_reason": ",    (  )"\n}\n',responseMimeType:"application/json",responseSchema:{type:qe.OBJECT,properties:{narrative:{type:qe.STRING},speaker:{type:qe.STRING,nullable:!0},dialogue:{type:qe.STRING,nullable:!0},visual_description:{type:qe.STRING},options:{type:qe.ARRAY,items:{type:qe.OBJECT,properties:{id:{type:qe.STRING},text:{type:qe.STRING}},required:["id","text"]}},health_change:{type:qe.INTEGER},influence_change:{type:qe.INTEGER},is_game_over:{type:qe.BOOLEAN},game_over_reason:{type:qe.STRING,nullable:!0}},required:["narrative","visual_description","options","health_change","influence_change","is_game_over"]}}})).text;if(!r)throw new Error("No text returned from Gemini");return JSON.parse(r)}catch(n){return console.error("Story generation error:",n),{narrative:"   ...      (API Error).   .",visual_description:"Heavy fog in a dark forest",speaker:null,dialogue:null,options:[{id:"retry",text:" "}],health_change:0,influence_change:0,is_game_over:!1}}},Sl=async e=>{var t,n,r;try{const o=`Cinematic shot, Game of Thrones style, dark fantasy, realistic, 8k, detailed textures. No text. Scene description: ${e}`,i=null==(r=null==(n=null==(t=(await _l.models.generateContent({model:bl,contents:{parts:[{text:o}]}})).candidates)?void 0:t[0])?void 0:n.content)?void 0:r.parts;if(i)for(const e of i)if(e.inlineData&&e.inlineData.data)return`data:${e.inlineData.mimeType||"image/png"};base64,${e.inlineData.data}`;return null}catch(o){return console.error("Image generation error:",o),null}},wl="got_saves_v2",Tl=()=>{const[e,t]=f.useState({stage:P.MENU,character:null,history:[],currentScene:null,isLoading:!1,sceneImage:null,turnCount:0,maxTurns:re,currentAct:"",npcPortraits:{}});f.useEffect(()=>{const n=async()=>{var n;if(!(null==(n=e.currentScene)?void 0:n.speaker))return;const r=e.currentScene.speaker;if(!e.npcPortraits[r])try{const e=await(async e=>{var t,n,r;try{const o=`Character portrait of ${e} from Game of Thrones universe. Close-up face shot, oil painting style, dark fantasy, detailed, neutral background, dramatic lighting. No text.`,i=null==(r=null==(n=null==(t=(await _l.models.generateContent({model:bl,contents:{parts:[{text:o}]}})).candidates)?void 0:t[0])?void 0:n.content)?void 0:r.parts;if(i)for(const e of i)if(e.inlineData&&e.inlineData.data)return`data:${e.inlineData.mimeType||"image/png"};base64,${e.inlineData.data}`;return null}catch(o){return console.error("Portrait generation error:",o),null}})(r);e&&t(t=>({...t,npcPortraits:{...t.npcPortraits,[r]:e}}))}catch(o){console.error("Failed to generate portrait background",o)}};e.stage===P.PLAYING&&n()},[e.currentScene,e.stage,e.npcPortraits]);const n=f.useCallback(async(n,o)=>{if(!e.character||!e.currentScene)return;const i=e.turnCount+1;t(e=>({...e,isLoading:!0}));try{const n=await(async(e,t,n,r,o)=>{let i="",l=" I";r<=oe.ACT_1_END?(l=" I (')",i="   .    ."):r<=oe.ACT_2_END?(l=" II ()",i=" .   ."):(l=" III ()",i="   .   '.   ."),r>=o-1&&(i+="   .     (  )    .  is_game_over = true.");const a=`\n    : ${r}  ${o}. : ${l}.\n    : ${t.name} (${t.house}).\n    ': ${t.health}, : ${t.influence}.\n      : "${n}".\n    \n    ${i}\n    \n     ,  .\n  `;return await El(e,a)})(e.history,e.character,o,i,e.maxTurns),l=Math.max(0,Math.min(100,e.character.health+n.health_change)),a=Math.max(0,Math.min(100,e.character.influence+n.influence_change));let s=" I";i>oe.ACT_1_END&&(s=" II"),i>oe.ACT_2_END&&(s=" III"),t(e=>{if(!e.character)return e;const t=[];t.push({type:"choice",text:o}),n.narrative&&t.push({type:"narrative",text:n.narrative}),n.speaker&&n.dialogue&&t.push({type:"dialogue",text:n.dialogue,speaker:n.speaker});const u={...e,character:{...e.character,health:l,influence:a},currentScene:n,history:[...e.history,...t],isLoading:!1,sceneImage:null,turnCount:i,currentAct:s};return l>0&&!n.is_game_over&&r({character:u.character,history:u.history,currentScene:u.currentScene,turnCount:u.turnCount,lastSaved:Date.now()}),u}),n.visual_description&&Sl(n.visual_description).then(e=>{t(t=>({...t,sceneImage:e}))})}catch(l){console.error(l),t(e=>({...e,isLoading:!1}))}},[e.character,e.history,e.currentScene,e.turnCount,e.maxTurns]),r=e=>{try{const t=localStorage.getItem(wl),n=t?JSON.parse(t):{};n[e.character.name]=e,localStorage.setItem(wl,JSON.stringify(n))}catch(t){console.error("Failed to save",t)}},o=()=>{t(e=>({...e,stage:P.MENU,character:null,currentScene:null,npcPortraits:{}}))};return s.jsxs("div",{className:"font-sans antialiased",children:[e.isLoading&&s.jsx(Ee,{}),e.stage===P.MENU&&s.jsx(de,{onStartNew:()=>{t(e=>({...e,stage:P.CREATION}))},onLoadGame:e=>{let n=" I";e.turnCount>oe.ACT_1_END&&(n=" II"),e.turnCount>oe.ACT_2_END&&(n=" III"),t({stage:P.PLAYING,character:e.character,history:e.history,currentScene:e.currentScene,isLoading:!1,sceneImage:null,turnCount:e.turnCount,maxTurns:re,currentAct:n,npcPortraits:{}}),e.currentScene.visual_description&&Sl(e.currentScene.visual_description).then(e=>{t(t=>({...t,sceneImage:e}))})}}),e.stage===P.CREATION&&s.jsx(pe,{onComplete:async e=>{t(t=>({...t,character:e,isLoading:!0}));try{const n=await(async e=>{const t=ce[e.house].join(", "),n=`\n      ( I).\n    : ${e.name}, : ${e.house}.\n    : ${e.bio}.\n    \n              : ${t}.\n    \n                . \n     .\n  `;return await El([],n)})(e),o=[];n.narrative&&o.push({type:"narrative",text:n.narrative}),n.speaker&&n.dialogue&&o.push({type:"dialogue",text:n.dialogue,speaker:n.speaker}),t(t=>({...t,character:e,stage:P.PLAYING,currentScene:n,history:o,isLoading:!1,turnCount:1,currentAct:" I"})),r({character:e,history:o,currentScene:n,turnCount:1,lastSaved:Date.now()}),n.visual_description&&Sl(n.visual_description).then(e=>{t(t=>({...t,sceneImage:e}))})}catch(n){console.error(n),t(e=>({...e,isLoading:!1})),alert("   .  API .")}}}),e.stage===P.PLAYING&&s.jsx(be,{gameState:e,onOptionSelect:n,onRestart:o,onSave:()=>{const{character:t,history:n,currentScene:o,turnCount:i}=e;t&&o&&r({character:t,history:n,currentScene:o,turnCount:i,lastSaved:Date.now()})},onExit:o,onPlayAgain:()=>{t({stage:P.CREATION,character:null,history:[],currentScene:null,isLoading:!1,sceneImage:null,turnCount:0,maxTurns:re,currentAct:"",npcPortraits:{}})}})]})},Al=document.getElementById("root");if(!Al)throw new Error("Could not find root element to mount to");O.createRoot(Al).render(s.jsx(m.StrictMode,{children:s.jsx(Tl,{})}));
